¿<# Genuine OJ é¡¹ç›®æ¦‚è§ˆ

## ðŸ“¦ å·²ä¸‹è½½çš„é¡¹ç›®

### 1. Backend (åŽç«¯) - `/root/backend/`
**æŠ€æœ¯æ ˆ**: Django 3.2 + Python 3.7+

**ä¸»è¦æ¨¡å—**:
- `oj_user/` - ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ
  - ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†
  - ç”¨æˆ·èµ„æ–™ç®¡ç†
  
- `oj_problem/` - é¢˜ç›®ç®¡ç†ç³»ç»Ÿ
  - é¢˜ç›®çš„å¢žåˆ æ”¹æŸ¥
  - é¢˜ç›®æ ‡ç­¾ç®¡ç†
  - æµ‹è¯•ç”¨ä¾‹ç®¡ç†
  - SPJ (Special Judge) æ”¯æŒ
  
- `oj_submission/` - æäº¤å’Œè¯„æµ‹ç³»ç»Ÿ
  - ä»£ç æäº¤
  - è¯„æµ‹ä»»åŠ¡é˜Ÿåˆ— (Celery)
  - è¯„æµ‹ç»“æžœç®¡ç†
  
- `oj_contest/` - æ¯”èµ›ç³»ç»Ÿ
  - æ¯”èµ›åˆ›å»ºå’Œç®¡ç†
  - æ¯”èµ›æŽ’è¡Œæ¦œ
  - æ¯”èµ›æƒé™æŽ§åˆ¶
  
- `oj_discussion/` - è®¨è®ºåŒº
  - å¸–å­å‘å¸ƒ
  - å›žå¤åŠŸèƒ½

**ä¾èµ–æœåŠ¡**:
- PostgreSQL (æ•°æ®åº“)
- Redis (ç¼“å­˜å’Œä¼šè¯)
- RabbitMQ (æ¶ˆæ¯é˜Ÿåˆ—)
- Celery (å¼‚æ­¥ä»»åŠ¡)

**API æ–‡æ¡£**: https://genuine-oj.apifox.cn/

---

### 2. Frontend-Naive (å‰ç«¯) - `/root/frontend-naive/`
**æŠ€æœ¯æ ˆ**: Vue 3 + NaiveUI + Vite

**ä¸»è¦åŠŸèƒ½é¡µé¢**:
- é¦–é¡µå’Œé¢˜ç›®åˆ—è¡¨
- é¢˜ç›®è¯¦æƒ…å’Œä»£ç æäº¤
- æ¯”èµ›ç³»ç»Ÿ
- ç”¨æˆ·ä¸­å¿ƒ
- è®¨è®ºåŒº
- æŽ’è¡Œæ¦œ
- ç®¡ç†åŽå°

**UI ç»„ä»¶åº“**: NaiveUI (çŽ°ä»£åŒ–çš„ Vue 3 ç»„ä»¶åº“)

**ä»£ç ç¼–è¾‘å™¨**: CodeMirror 6 (æ”¯æŒ C++, Python ç­‰å¤šç§è¯­è¨€)

**Markdown ç¼–è¾‘å™¨**: md-editor-v3

---

### 3. Judger (è¯„æµ‹æœåŠ¡å™¨) - `/root/judger/`
**æŠ€æœ¯æ ˆ**: Python 3.8+ + WebSocket

**ä¸»è¦åŠŸèƒ½**:
- æŽ¥æ”¶åŽç«¯çš„è¯„æµ‹ä»»åŠ¡
- åœ¨æ²™ç®±çŽ¯å¢ƒä¸­è¿è¡Œç”¨æˆ·ä»£ç 
- é™åˆ¶ CPUã€å†…å­˜ã€æ—¶é—´ç­‰èµ„æº
- æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ (C, C++, Python, Java ç­‰)
- æ”¯æŒ SPJ (Special Judge)
- è¿”å›žè¯„æµ‹ç»“æžœ

**å®‰å…¨ç‰¹æ€§**:
- ä½¿ç”¨ Linux ç”¨æˆ·éš”ç¦»
- èµ„æºé™åˆ¶ (seccomp)
- åªè¯»æ–‡ä»¶ç³»ç»Ÿ

---

### 4. Deploy (éƒ¨ç½²é…ç½®) - `/root/deploy/`
**Docker Compose é…ç½®**

**åŒ…å«çš„æœåŠ¡**:
- `frontend` - Nginx é™æ€æ–‡ä»¶æœåŠ¡å™¨
- `backend` - Django åŽç«¯åº”ç”¨
- `judge-server` - è¯„æµ‹æœåŠ¡å™¨
- `postgres` - PostgreSQL æ•°æ®åº“
- `redis` - Redis ç¼“å­˜
- `rabbitmq` - RabbitMQ æ¶ˆæ¯é˜Ÿåˆ—

---

## ðŸ—ï¸ ç³»ç»Ÿæž¶æž„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ HTTP
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Nginx     â”‚ (Frontend: Vue3 + NaiveUI)
â”‚  (Port 80)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ API Requests
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Django    â”‚ (Backend: REST API)
â”‚  (Port 8080)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚             â”‚
       â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL â”‚ â”‚    Redis    â”‚
â”‚  (Port 5432)â”‚ â”‚  (Port 6379)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RabbitMQ   â”‚ (Message Queue)
â”‚  (Port 5672)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Judge Tasks
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Judge Server â”‚ (Code Execution)
â”‚  (Port 8080)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“Š æ•°æ®æµ

### 1. ç”¨æˆ·æäº¤ä»£ç æµç¨‹
```
ç”¨æˆ· â†’ å‰ç«¯ â†’ åŽç«¯ API â†’ æ•°æ®åº“ (ä¿å­˜æäº¤)
                    â†“
              RabbitMQ (è¯„æµ‹ä»»åŠ¡é˜Ÿåˆ—)
                    â†“
              Judge Server (æ‰§è¡Œä»£ç )
                    â†“
              åŽç«¯ API (æ›´æ–°ç»“æžœ)
                    â†“
              æ•°æ®åº“ (ä¿å­˜è¯„æµ‹ç»“æžœ)
                    â†“
              å‰ç«¯ (æ˜¾ç¤ºç»“æžœ)
```

### 2. æ¯”èµ›ç³»ç»Ÿæµç¨‹
```
ç®¡ç†å‘˜åˆ›å»ºæ¯”èµ› â†’ è®¾ç½®é¢˜ç›®å’Œæƒé™
                    â†“
ç”¨æˆ·æŠ¥å/å‚åŠ  â†’ æäº¤ä»£ç  â†’ è¯„æµ‹
                    â†“
å®žæ—¶æŽ’è¡Œæ¦œæ›´æ–° (Redis ç¼“å­˜)
```

---

## ðŸ”‘ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### åŽç«¯æ ¸å¿ƒ API
- `/api/user/` - ç”¨æˆ·ç›¸å…³
- `/api/problem/` - é¢˜ç›®ç›¸å…³
- `/api/submission/` - æäº¤ç›¸å…³
- `/api/contest/` - æ¯”èµ›ç›¸å…³
- `/api/discussion/` - è®¨è®ºç›¸å…³

### å‰ç«¯æ ¸å¿ƒè·¯ç”±
- `/` - é¦–é¡µ
- `/problem` - é¢˜ç›®åˆ—è¡¨
- `/problem/:id` - é¢˜ç›®è¯¦æƒ…
- `/contest` - æ¯”èµ›åˆ—è¡¨
- `/contest/:id` - æ¯”èµ›è¯¦æƒ…
- `/status` - æäº¤çŠ¶æ€
- `/rank` - æŽ’è¡Œæ¦œ
- `/discussion` - è®¨è®ºåŒº
- `/user` - ç”¨æˆ·ä¸­å¿ƒ
- `/admin` - ç®¡ç†åŽå°

---

## ðŸ› ï¸ å¼€å‘å»ºè®®

### å¸¸è§äºŒæ¬¡å¼€å‘åœºæ™¯

#### 1. æ·»åŠ æ–°çš„ç¼–ç¨‹è¯­è¨€æ”¯æŒ
- ä¿®æ”¹ `judger/` ä¸­çš„è¯­è¨€é…ç½®
- æ›´æ–°å‰ç«¯ä»£ç ç¼–è¾‘å™¨çš„è¯­è¨€æ”¯æŒ
- æ·»åŠ å¯¹åº”çš„ç¼–è¯‘å’Œè¿è¡Œè„šæœ¬

#### 2. è‡ªå®šä¹‰é¢˜ç›®ç±»åž‹
- æ‰©å±• `backend/oj_problem/models.py`
- ä¿®æ”¹å‰ç«¯é¢˜ç›®æ˜¾ç¤ºç»„ä»¶
- æ›´æ–°è¯„æµ‹é€»è¾‘

#### 3. å¢žå¼ºç”¨æˆ·ç³»ç»Ÿ
- æ‰©å±• `backend/oj_user/models.py`
- æ·»åŠ æ–°çš„ API ç«¯ç‚¹
- æ›´æ–°å‰ç«¯ç”¨æˆ·ç•Œé¢

#### 4. è‡ªå®šä¹‰ UI ä¸»é¢˜
- ä¿®æ”¹ `frontend-naive/` ä¸­çš„æ ·å¼æ–‡ä»¶
- ä½¿ç”¨ NaiveUI çš„ä¸»é¢˜å®šåˆ¶åŠŸèƒ½

#### 5. æ·»åŠ æ–°çš„ç»Ÿè®¡åŠŸèƒ½
- åœ¨åŽç«¯æ·»åŠ ç»Ÿè®¡ API
- ä½¿ç”¨ Django ORM è¿›è¡Œæ•°æ®èšåˆ
- å‰ç«¯ä½¿ç”¨å›¾è¡¨åº“å±•ç¤º

---

## ðŸ“ é‡è¦æ–‡ä»¶è¯´æ˜Ž

### åŽç«¯
- `backend/oj_backend/settings.py` - Django é…ç½®
- `backend/oj_backend/urls.py` - URL è·¯ç”±
- `backend/config.py` - è‡ªå®šä¹‰é…ç½® (éœ€åˆ›å»º)
- `backend/secret.key` - Django å¯†é’¥ (éœ€åˆ›å»º)
- `backend/requirements.txt` - Python ä¾èµ–

### å‰ç«¯
- `frontend-naive/src/main.js` - å…¥å£æ–‡ä»¶
- `frontend-naive/src/router/index.js` - è·¯ç”±é…ç½®
- `frontend-naive/src/views/` - é¡µé¢ç»„ä»¶
- `frontend-naive/src/components/` - å¯å¤ç”¨ç»„ä»¶
- `frontend-naive/package.json` - Node.js ä¾èµ–
- `frontend-naive/vite.config.js` - Vite é…ç½®

### è¯„æµ‹æœåŠ¡å™¨
- `judger/server.py` - ä¸»æœåŠ¡å™¨
- `judger/config.py` - é…ç½®æ–‡ä»¶ (éœ€åˆ›å»º)
- `judger/requirements.txt` - Python ä¾èµ–

### éƒ¨ç½²
- `deploy/docker-compose.yml` - Docker Compose é…ç½®
- `deploy/.env` - çŽ¯å¢ƒå˜é‡
- `deploy/config/` - å„æœåŠ¡çš„é…ç½®æ–‡ä»¶

---

## ðŸš€ å¿«é€Ÿå¼€å§‹å¼€å‘

### æ–¹å¼ 1: ä½¿ç”¨å¯åŠ¨è„šæœ¬
```bash
/root/start-dev.sh
```

### æ–¹å¼ 2: æ‰‹åŠ¨å¯åŠ¨

#### å¯åŠ¨åŸºç¡€æœåŠ¡
```bash
cd /root/deploy
docker-compose up -d postgres redis rabbitmq
```

#### å¯åŠ¨åŽç«¯å¼€å‘æœåŠ¡å™¨
```bash
cd /root/backend
python3 manage.py runserver 0.0.0.0:8080

# å¦å¼€ç»ˆç«¯å¯åŠ¨ Celery
celery -A oj_backend worker -l info
```

#### å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
```bash
cd /root/frontend-naive
yarn dev
```

---

## ðŸ“š å­¦ä¹ èµ„æº

### åŽç«¯æŠ€æœ¯
- [Django å®˜æ–¹æ–‡æ¡£](https://docs.djangoproject.com/)
- [Django REST Framework](https://www.django-rest-framework.org/)
- [Celery æ–‡æ¡£](https://docs.celeryproject.org/)

### å‰ç«¯æŠ€æœ¯
- [Vue 3 æ–‡æ¡£](https://vuejs.org/)
- [NaiveUI ç»„ä»¶åº“](https://www.naiveui.com/)
- [Vite æ–‡æ¡£](https://vitejs.dev/)

### æ•°æ®åº“
- [PostgreSQL æ–‡æ¡£](https://www.postgresql.org/docs/)
- [Redis æ–‡æ¡£](https://redis.io/documentation)

---

## ðŸ› å¸¸è§é—®é¢˜

### Q: å¦‚ä½•é‡ç½®æ•°æ®åº“ï¼Ÿ
```bash
cd /root/deploy
docker-compose down -v  # åˆ é™¤æ‰€æœ‰æ•°æ®
docker-compose up -d postgres
cd /root/backend
python3 manage.py migrate
python3 manage.py createsuperuser
```

### Q: å¦‚ä½•ä¿®æ”¹ç®¡ç†å‘˜å¯†ç ï¼Ÿ
```bash
cd /root/backend
python3 manage.py changepassword admin
```

### Q: å‰ç«¯å¦‚ä½•è¿žæŽ¥åˆ°æœ¬åœ°åŽç«¯ï¼Ÿ
ä¿®æ”¹å‰ç«¯é…ç½®æ–‡ä»¶ä¸­çš„ API åœ°å€ä¸º `http://localhost:8080`

### Q: è¯„æµ‹æœåŠ¡å™¨æ— æ³•è¿žæŽ¥ï¼Ÿ
æ£€æŸ¥åŽç«¯é…ç½®ä¸­çš„ `OJ_JUDGE_HOST` æ˜¯å¦æ­£ç¡®

---

## ðŸ“ž èŽ·å–å¸®åŠ©

- æŸ¥çœ‹ `/root/DEVELOPMENT_GUIDE.md` èŽ·å–è¯¦ç»†å¼€å‘æŒ‡å—
- æŸ¥çœ‹å„é¡¹ç›®çš„ README.md
- è®¿é—® GitHub ä»“åº“æŸ¥çœ‹ Issues å’Œè®¨è®º

---

ç¥ä½ å¼€å‘é¡ºåˆ©ï¼ðŸŽ‰
¿<*cascade082 file:///root/PROJECT_OVERVIEW.md