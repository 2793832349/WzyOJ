import{d as $,r as T,a8 as h,F as x,am as M,ay as k,e as C,o as I,l as R,w as B,n as A,k as d,aK as D,az as w,E as y}from"./index.eb4377b0.1766986584207.js";import{j as S}from"./consts.72579ead.1766986584207.js";import{_ as F}from"./Time.2d3501e9.1766986584207.js";import{_ as P}from"./DataTable.8d4e61d5.1766986584207.js";import{_ as j}from"./Spin.3ae5ee7d.1766986584207.js";const E={duration:{type:Number,default:0},active:{type:Boolean,default:!0},precision:{type:Number,default:0},render:Function,onFinish:Function},q=$({name:"Countdown",props:E,setup(n){let r=null,s=0,i=!1;const u=T(0);h(()=>{u.value=n.duration});let e=-1;function p(a){return n.duration-s+e-a}function t(a){const m=Math.floor(a/36e5),l=Math.floor(a%36e5/6e4),c=Math.floor(a%6e4/1e3),b=Math.floor(a%1e3);return{hours:m,minutes:l,seconds:c,milliseconds:b}}function o(a){const{hours:m,minutes:l,seconds:c,milliseconds:b}=a,{precision:f}=n;switch(f){case 0:return`${String(m).padStart(2,"0")}:${String(l).padStart(2,"0")}:${String(c).padStart(2,"0")}`;default:return`${String(m).padStart(2,"0")}:${String(l).padStart(2,"0")}:${String(c).padStart(2,"0")}.${String(Math.floor(b/(f===1?100:f===2?10:1))).padStart(f,"0")}`}}const _=()=>{var a;const{precision:m}=n,l=p(performance.now());if(l<=0){u.value=0,g(),i||(i=!0,(a=n.onFinish)===null||a===void 0||a.call(n));return}let c;switch(m){case 3:case 2:c=l%34;break;case 1:c=l%100;break;default:c=l%1e3}u.value=l,r=window.setTimeout(()=>{_()},c)},g=()=>{r!==null&&(window.clearTimeout(r),r=null)};x(()=>{h(()=>{if(n.active)e=performance.now(),_();else{const a=performance.now();e!==-1&&(s+=a-e),g()}})}),M(()=>{g()});function v(){u.value=n.duration,s=0,e=performance.now(),n.active&&i&&_(),i=!1}return Object.assign({reset:v},{distance:u,getTimeInfo:t,getDisplayValue:o})},render(){const{render:n,precision:r,distance:s,getTimeInfo:i,getDisplayValue:u}=this;let e;switch(r){case 0:e=i(s+999),e.milliseconds=0;break;case 1:e=i(s+99),e.milliseconds=Math.floor(e.milliseconds/100)*100;break;case 2:e=i(s+9),e.milliseconds=Math.floor(e.milliseconds/10)*10;break;case 3:e=i(s)}return n?n(e):u(e)}});const N={__name:"RankingTable",props:{data:{type:Object,default:{}},loading:{type:Boolean,default:!1},isProblemSet:{type:Boolean,default:!1}},setup(n){const r=n,s=()=>r.data.rule_type||"IOI",i=()=>{const e=[{title:"\u540D\u6B21",render(t,o){return`# ${o+1}`},width:100},{title:"\u7528\u6237",render(t){return d(w,{to:{name:"user_detail",params:{id:t.id}}},{default:()=>d(y,{text:!0,size:"small"},{default:()=>t.username})})}},{title(){const t=s();return r.isProblemSet?"AC\u6570\u91CF":t==="ACM"?"AC\u6570":"\u603B\u5206"},render(t){const o=s();return r.isProblemSet&&t.ac_count!==void 0?`${t.ac_count} \u9898`:o==="ACM"?`${t.ac_count||0} \u9898`:t.score}}];return s()==="ACM"&&!r.isProblemSet&&e.push({title:"\u7F5A\u65F6",render(t){return`${t.penalty||0} \u5206\u949F`}}),e.push({title:"\u63D0\u4EA4\u8FC7\u7684\u9898\u76EE",render(t){return d("div",{style:"display: flex; flex-wrap: wrap; gap: 8px; max-width: 600px;"},t.problems.map(o=>d(D,{trigger:"hover"},{trigger:()=>d(w,{to:{name:"submission_detail",params:{id:o.submission_id}}},d(y,{size:"small",color:S.getColorClass(o.status)},{default:()=>o.title})),default:()=>[`\u5206\u6570\uFF1A${o.score}`,d("br"),`\u72B6\u6001\uFF1A${S.getDisplay(o.status)}`,d("br"),"\u65F6\u95F4\uFF1A",d(F,{time:Number(new Date(o.time))})]})))}}),e},u=C(()=>i());return(e,p)=>{const t=P,o=j;return I(),R(o,{show:n.loading},{default:B(()=>[A(t,{columns:u.value,data:n.data.users,bordered:!1},null,8,["columns","data"])]),_:1},8,["show"])}}},G=k(N,[["__scopeId","data-v-b1d1b089"]]);export{G as R,q as _};
