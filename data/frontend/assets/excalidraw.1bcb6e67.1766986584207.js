var es=Object.defineProperty;var is=(lt,f,ct)=>f in lt?es(lt,f,{enumerable:!0,configurable:!0,writable:!0,value:ct}):lt[f]=ct;var se=(lt,f,ct)=>(is(lt,typeof f!="symbol"?f+"":f,ct),ct),Ue=(lt,f,ct)=>{if(!f.has(lt))throw TypeError("Cannot "+ct)};var t=(lt,f,ct)=>(Ue(lt,f,"read from private field"),ct?ct.call(lt):f.get(lt)),B=(lt,f,ct)=>{if(f.has(lt))throw TypeError("Cannot add the same private member more than once");f instanceof WeakSet?f.add(lt):f.set(lt,ct)},st=(lt,f,ct,d)=>(Ue(lt,f,"write to private field"),d?d.call(lt,ct):f.set(lt,ct),ct),be=(lt,f,ct,d)=>({set _(M){st(lt,f,M,ct)},get _(){return t(lt,f,d)}}),q=(lt,f,ct)=>(Ue(lt,f,"access private method"),ct);import{c as commonjsRequire}from"./_commonjs-dynamic-modules.85296e00.1766986584207.js";import{c as commonLight,cH as sizeVariables,r as ref,cI as onBeforeUpdate,S as c,b as cB,O as cM,N as cE,aZ as fadeInScaleUpTransition,a_ as insideModal,a$ as insidePopover,d as defineComponent,u as useConfig,g as useTheme,a5 as useFormItem,e as computed,V as toRef,a4 as useMergedState,a0 as watch,af as nextTick,am as onBeforeUnmount,j as useThemeClass,bg as isMounted,aN as useAdjustedTo,k as h,bh as VBinder,bi as VTarget,X as resolveSlot,bj as VFollower,ar as Transition,ag as on,aj as off,ai as call,cJ as getAugmentedNamespace,y as useMessage,o as openBlock,l as createBlock,w as withCtx,_ as __unplugin_components_7,n as createVNode,C as createTextVNode,t as toDisplayString,L as createCommentVNode,m as createBaseVNode,E as __unplugin_components_0,aA as __unplugin_components_1}from"./index.eb4377b0.1766986584207.js";import{a as __unplugin_components_2}from"./Upload.6cd5da4e.1766986584207.js";import{_ as __unplugin_components_3}from"./text.10f0e60f.1766986584207.js";import{_ as __unplugin_components_5}from"./Alert.62d754d7.1766986584207.js";import{_ as __unplugin_components_6}from"./Spin.3ae5ee7d.1766986584207.js";import{_ as __unplugin_components_8,a as __unplugin_components_9}from"./Grid.ea7b98dc.1766986584207.js";import"./Add.3491e10c.1766986584207.js";import"./utils.83ed917f.1766986584207.js";import"./Eye.1e3444f4.1766986584207.js";import"./Tooltip.2d4fe76d.1766986584207.js";const self=lt=>{const f="rgba(0, 0, 0, .85)",ct="0 2px 8px 0 rgba(0, 0, 0, 0.12)",{railColor:d,primaryColor:M,baseColor:nt,cardColor:$,modalColor:ft,popoverColor:H,borderRadius:F,fontSize:m,opacityDisabled:U}=lt;return Object.assign(Object.assign({},sizeVariables),{fontSize:m,markFontSize:m,railColor:d,railColorHover:d,fillColor:M,fillColorHover:M,opacityDisabled:U,handleColor:"#FFF",dotColor:$,dotColorModal:ft,dotColorPopover:H,handleBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowHover:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowActive:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",handleBoxShadowFocus:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",indicatorColor:f,indicatorBoxShadow:ct,indicatorTextColor:nt,indicatorBorderRadius:F,dotBorder:`2px solid ${d}`,dotBorderActive:`2px solid ${M}`,dotBoxShadow:""})},sliderLight={name:"Slider",common:commonLight,self},sliderLight$1=sliderLight;function isTouchEvent(lt){return window.TouchEvent&&lt instanceof window.TouchEvent}function useRefs(){const lt=ref(new Map),f=ct=>d=>{lt.value.set(ct,d)};return onBeforeUpdate(()=>{lt.value.clear()}),[lt,f]}const style=c([cB("slider",`
 display: block;
 padding: calc((var(--n-handle-size) - var(--n-rail-height)) / 2) 0;
 position: relative;
 z-index: 0;
 width: 100%;
 cursor: pointer;
 user-select: none;
 -webkit-user-select: none;
 `,[cM("reverse",[cB("slider-handles",[cB("slider-handle-wrapper",`
 transform: translate(50%, -50%);
 `)]),cB("slider-dots",[cB("slider-dot",`
 transform: translateX(50%, -50%);
 `)]),cM("vertical",[cB("slider-handles",[cB("slider-handle-wrapper",`
 transform: translate(-50%, -50%);
 `)]),cB("slider-marks",[cB("slider-mark",`
 transform: translateY(calc(-50% + var(--n-dot-height) / 2));
 `)]),cB("slider-dots",[cB("slider-dot",`
 transform: translateX(-50%) translateY(0);
 `)])])]),cM("vertical",`
 padding: 0 calc((var(--n-handle-size) - var(--n-rail-height)) / 2);
 width: var(--n-rail-width-vertical);
 height: 100%;
 `,[cB("slider-handles",`
 top: calc(var(--n-handle-size) / 2);
 right: 0;
 bottom: calc(var(--n-handle-size) / 2);
 left: 0;
 `,[cB("slider-handle-wrapper",`
 top: unset;
 left: 50%;
 transform: translate(-50%, 50%);
 `)]),cB("slider-rail",`
 height: 100%;
 `,[cE("fill",`
 top: unset;
 right: 0;
 bottom: unset;
 left: 0;
 `)]),cM("with-mark",`
 width: var(--n-rail-width-vertical);
 margin: 0 32px 0 8px;
 `),cB("slider-marks",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 22px;
 font-size: var(--n-mark-font-size);
 `,[cB("slider-mark",`
 transform: translateY(50%);
 white-space: nowrap;
 `)]),cB("slider-dots",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 50%;
 `,[cB("slider-dot",`
 transform: translateX(-50%) translateY(50%);
 `)])]),cM("disabled",`
 cursor: not-allowed;
 opacity: var(--n-opacity-disabled);
 `,[cB("slider-handle",`
 cursor: not-allowed;
 `)]),cM("with-mark",`
 width: 100%;
 margin: 8px 0 32px 0;
 `),c("&:hover",[cB("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[cE("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),cB("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),cM("active",[cB("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[cE("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),cB("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),cB("slider-marks",`
 position: absolute;
 top: 18px;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[cB("slider-mark",`
 position: absolute;
 transform: translateX(-50%);
 white-space: nowrap;
 `)]),cB("slider-rail",`
 width: 100%;
 position: relative;
 height: var(--n-rail-height);
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 border-radius: calc(var(--n-rail-height) / 2);
 `,[cE("fill",`
 position: absolute;
 top: 0;
 bottom: 0;
 border-radius: calc(var(--n-rail-height) / 2);
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-fill-color);
 `)]),cB("slider-handles",`
 position: absolute;
 top: 0;
 right: calc(var(--n-handle-size) / 2);
 bottom: 0;
 left: calc(var(--n-handle-size) / 2);
 `,[cB("slider-handle-wrapper",`
 outline: none;
 position: absolute;
 top: 50%;
 transform: translate(-50%, -50%);
 cursor: pointer;
 display: flex;
 `,[cB("slider-handle",`
 height: var(--n-handle-size);
 width: var(--n-handle-size);
 border-radius: 50%;
 overflow: hidden;
 transition: box-shadow .2s var(--n-bezier), background-color .3s var(--n-bezier);
 background-color: var(--n-handle-color);
 box-shadow: var(--n-handle-box-shadow);
 `,[c("&:hover",`
 box-shadow: var(--n-handle-box-shadow-hover);
 `)]),c("&:focus",[cB("slider-handle",`
 box-shadow: var(--n-handle-box-shadow-focus);
 `,[c("&:hover",`
 box-shadow: var(--n-handle-box-shadow-active);
 `)])])])]),cB("slider-dots",`
 position: absolute;
 top: 50%;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[cM("transition-disabled",[cB("slider-dot","transition: none;")]),cB("slider-dot",`
 transition:
 border-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 transform: translate(-50%, -50%);
 height: var(--n-dot-height);
 width: var(--n-dot-width);
 border-radius: var(--n-dot-border-radius);
 overflow: hidden;
 box-sizing: border-box;
 border: var(--n-dot-border);
 background-color: var(--n-dot-color);
 `,[cM("active","border: var(--n-dot-border-active);")])])]),cB("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[fadeInScaleUpTransition()]),cB("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[cM("top",`
 margin-bottom: 12px;
 `),cM("right",`
 margin-left: 12px;
 `),cM("bottom",`
 margin-top: 12px;
 `),cM("left",`
 margin-right: 12px;
 `),fadeInScaleUpTransition()]),insideModal(cB("slider",[cB("slider-dot","background-color: var(--n-dot-color-modal);")])),insidePopover(cB("slider",[cB("slider-dot","background-color: var(--n-dot-color-popover);")]))]),eventButtonLeft=0,sliderProps=Object.assign(Object.assign({},useTheme.props),{to:useAdjustedTo.propTo,defaultValue:{type:[Number,Array],default:0},marks:Object,disabled:{type:Boolean,default:void 0},formatTooltip:Function,keyboard:{type:Boolean,default:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:[Number,String],default:1},range:Boolean,value:[Number,Array],placement:String,showTooltip:{type:Boolean,default:void 0},tooltip:{type:Boolean,default:!0},vertical:Boolean,reverse:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),__unplugin_components_4=defineComponent({name:"Slider",props:sliderProps,setup(lt){const{mergedClsPrefixRef:f,namespaceRef:ct,inlineThemeDisabled:d}=useConfig(lt),M=useTheme("Slider","-slider",style,sliderLight$1,lt,f),nt=ref(null),[$,ft]=useRefs(),[H,F]=useRefs(),m=ref(new Set),U=useFormItem(lt),{mergedDisabledRef:j}=U,R=computed(()=>{const{step:D}=lt;if(Number(D)<=0||D==="mark")return 0;const N=D.toString();let J=0;return N.includes(".")&&(J=N.length-N.indexOf(".")-1),J}),E=ref(lt.defaultValue),S=toRef(lt,"value"),p=useMergedState(S,E),_=computed(()=>{const{value:D}=p;return(lt.range?D:[D]).map(Mt)}),T=computed(()=>_.value.length>2),x=computed(()=>lt.placement===void 0?lt.vertical?"right":"top":lt.placement),A=computed(()=>{const{marks:D}=lt;return D?Object.keys(D).map(parseFloat):null}),r=ref(-1),o=ref(-1),P=ref(-1),g=ref(!1),a=ref(!1),k=computed(()=>{const{vertical:D,reverse:N}=lt;return D?N?"top":"bottom":N?"right":"left"}),v=computed(()=>{if(T.value)return;const D=_.value,N=w(lt.range?Math.min(...D):lt.min),J=w(lt.range?Math.max(...D):D[0]),{value:mt}=k;return lt.vertical?{[mt]:`${N}%`,height:`${J-N}%`}:{[mt]:`${N}%`,width:`${J-N}%`}}),z=computed(()=>{const D=[],{marks:N}=lt;if(N){const J=_.value.slice();J.sort((Nt,Vt)=>Nt-Vt);const{value:mt}=k,{value:At}=T,{range:Bt}=lt,zt=At?()=>!1:Nt=>Bt?Nt>=J[0]&&Nt<=J[J.length-1]:Nt<=J[0];for(const Nt of Object.keys(N)){const Vt=Number(Nt);D.push({active:zt(Vt),label:N[Nt],style:{[mt]:`${w(Vt)}%`}})}}return D});function X(D,N){const J=w(D),{value:mt}=k;return{[mt]:`${J}%`,zIndex:N===r.value?1:0}}function C(D){return lt.showTooltip||P.value===D||r.value===D&&g.value}function K(D){return g.value?!(r.value===D&&o.value===D):!0}function rt(D){var N;~D&&(r.value=D,(N=$.value.get(D))===null||N===void 0||N.focus())}function dt(){H.value.forEach((D,N)=>{C(N)&&D.syncPosition()})}function V(D){const{"onUpdate:value":N,onUpdateValue:J}=lt,{nTriggerFormInput:mt,nTriggerFormChange:At}=U;J&&call(J,D),N&&call(N,D),E.value=D,mt(),At()}function ut(D){const{range:N}=lt;if(N){if(Array.isArray(D)){const{value:J}=_;D.join()!==J.join()&&V(D)}}else Array.isArray(D)||_.value[0]!==D&&V(D)}function _t(D,N){if(lt.range){const J=_.value.slice();J.splice(N,1,D),ut(J)}else ut(D)}function xt(D,N,J){const mt=J!==void 0;J||(J=D-N>0?1:-1);const At=A.value||[],{step:Bt}=lt;if(Bt==="mark"){const Vt=s(D,At.concat(N),mt?J:void 0);return Vt?Vt.value:N}if(Bt<=0)return N;const{value:zt}=R;let Nt;if(mt){const Vt=Number((N/Bt).toFixed(zt)),$t=Math.floor(Vt),Xt=Vt>$t?$t:$t-1,qt=Vt<$t?$t:$t+1;Nt=s(N,[Number((Xt*Bt).toFixed(zt)),Number((qt*Bt).toFixed(zt)),...At],J)}else{const Vt=n(D);Nt=s(D,[...At,Vt])}return Nt?Mt(Nt.value):N}function Mt(D){return Math.min(lt.max,Math.max(lt.min,D))}function w(D){const{max:N,min:J}=lt;return(D-J)/(N-J)*100}function i(D){const{max:N,min:J}=lt;return J+(N-J)*D}function n(D){const{step:N,min:J}=lt;if(Number(N)<=0||N==="mark")return D;const mt=Math.round((D-J)/N)*N+J;return Number(mt.toFixed(R.value))}function s(D,N=A.value,J){if(!(N!=null&&N.length))return null;let mt=null,At=-1;for(;++At<N.length;){const Bt=N[At]-D,zt=Math.abs(Bt);(J===void 0||Bt*J>0)&&(mt===null||zt<mt.distance)&&(mt={index:At,distance:zt,value:N[At]})}return mt}function l(D){const N=nt.value;if(!N)return;const J=isTouchEvent(D)?D.touches[0]:D,mt=N.getBoundingClientRect();let At;return lt.vertical?At=(mt.bottom-J.clientY)/mt.height:At=(J.clientX-mt.left)/mt.width,lt.reverse&&(At=1-At),i(At)}function u(D){if(j.value||!lt.keyboard)return;const{vertical:N,reverse:J}=lt;switch(D.key){case"ArrowUp":D.preventDefault(),y(N&&J?-1:1);break;case"ArrowRight":D.preventDefault(),y(!N&&J?-1:1);break;case"ArrowDown":D.preventDefault(),y(N&&J?1:-1);break;case"ArrowLeft":D.preventDefault(),y(!N&&J?1:-1);break}}function y(D){const N=r.value;if(N===-1)return;const{step:J}=lt,mt=_.value[N],At=Number(J)<=0||J==="mark"?mt:mt+J*D;_t(xt(At,mt,D>0?1:-1),N)}function I(D){var N,J;if(j.value||!isTouchEvent(D)&&D.button!==eventButtonLeft)return;const mt=l(D);if(mt===void 0)return;const At=_.value.slice(),Bt=lt.range?(J=(N=s(mt,At))===null||N===void 0?void 0:N.index)!==null&&J!==void 0?J:-1:0;Bt!==-1&&(D.preventDefault(),rt(Bt),W(),_t(xt(mt,_.value[Bt]),Bt))}function W(){g.value||(g.value=!0,on("touchend",document,ot),on("mouseup",document,ot),on("touchmove",document,et),on("mousemove",document,et))}function it(){g.value&&(g.value=!1,off("touchend",document,ot),off("mouseup",document,ot),off("touchmove",document,et),off("mousemove",document,et))}function et(D){const{value:N}=r;if(!g.value||N===-1){it();return}const J=l(D);_t(xt(J,_.value[N]),N)}function ot(){it()}function pt(D){r.value=D,j.value||(P.value=D)}function Et(D){r.value===D&&(r.value=-1,it()),P.value===D&&(P.value=-1)}function gt(D){P.value=D}function Ft(D){P.value===D&&(P.value=-1)}watch(r,(D,N)=>void nextTick(()=>o.value=N)),watch(p,()=>{if(lt.marks){if(a.value)return;a.value=!0,nextTick(()=>{a.value=!1})}nextTick(dt)}),onBeforeUnmount(()=>{it()});const Wt=computed(()=>{const{self:{markFontSize:D,railColor:N,railColorHover:J,fillColor:mt,fillColorHover:At,handleColor:Bt,opacityDisabled:zt,dotColor:Nt,dotColorModal:Vt,handleBoxShadow:$t,handleBoxShadowHover:Xt,handleBoxShadowActive:qt,handleBoxShadowFocus:ht,dotBorder:tt,dotBoxShadow:Y,railHeight:vt,railWidthVertical:Ct,handleSize:ie,dotHeight:ee,dotWidth:Z,dotBorderRadius:Tt,fontSize:Ot,dotBorderActive:Pt,dotColorPopover:Ut},common:{cubicBezierEaseInOut:jt}}=M.value;return{"--n-bezier":jt,"--n-dot-border":tt,"--n-dot-border-active":Pt,"--n-dot-border-radius":Tt,"--n-dot-box-shadow":Y,"--n-dot-color":Nt,"--n-dot-color-modal":Vt,"--n-dot-color-popover":Ut,"--n-dot-height":ee,"--n-dot-width":Z,"--n-fill-color":mt,"--n-fill-color-hover":At,"--n-font-size":Ot,"--n-handle-box-shadow":$t,"--n-handle-box-shadow-active":qt,"--n-handle-box-shadow-focus":ht,"--n-handle-box-shadow-hover":Xt,"--n-handle-color":Bt,"--n-handle-size":ie,"--n-opacity-disabled":zt,"--n-rail-color":N,"--n-rail-color-hover":J,"--n-rail-height":vt,"--n-rail-width-vertical":Ct,"--n-mark-font-size":D}}),wt=d?useThemeClass("slider",void 0,Wt,lt):void 0,Lt=computed(()=>{const{self:{fontSize:D,indicatorColor:N,indicatorBoxShadow:J,indicatorTextColor:mt,indicatorBorderRadius:At}}=M.value;return{"--n-font-size":D,"--n-indicator-border-radius":At,"--n-indicator-box-shadow":J,"--n-indicator-color":N,"--n-indicator-text-color":mt}}),bt=d?useThemeClass("slider-indicator",void 0,Lt,lt):void 0;return{mergedClsPrefix:f,namespace:ct,uncontrolledValue:E,mergedValue:p,mergedDisabled:j,mergedPlacement:x,isMounted:isMounted(),adjustedTo:useAdjustedTo(lt),dotTransitionDisabled:a,markInfos:z,isShowTooltip:C,shouldKeepTooltipTransition:K,handleRailRef:nt,setHandleRefs:ft,setFollowerRefs:F,fillStyle:v,getHandleStyle:X,activeIndex:r,arrifiedValues:_,followerEnabledIndexSet:m,handleRailMouseDown:I,handleHandleFocus:pt,handleHandleBlur:Et,handleHandleMouseEnter:gt,handleHandleMouseLeave:Ft,handleRailKeyDown:u,indicatorCssVars:d?void 0:Lt,indicatorThemeClass:bt==null?void 0:bt.themeClass,indicatorOnRender:bt==null?void 0:bt.onRender,cssVars:d?void 0:Wt,themeClass:wt==null?void 0:wt.themeClass,onRender:wt==null?void 0:wt.onRender}},render(){var lt;const{mergedClsPrefix:f,themeClass:ct,formatTooltip:d}=this;return(lt=this.onRender)===null||lt===void 0||lt.call(this),h("div",{class:[`${f}-slider`,ct,{[`${f}-slider--disabled`]:this.mergedDisabled,[`${f}-slider--active`]:this.activeIndex!==-1,[`${f}-slider--with-mark`]:this.marks,[`${f}-slider--vertical`]:this.vertical,[`${f}-slider--reverse`]:this.reverse}],style:this.cssVars,onKeydown:this.handleRailKeyDown,onMousedown:this.handleRailMouseDown,onTouchstart:this.handleRailMouseDown},h("div",{class:`${f}-slider-rail`},h("div",{class:`${f}-slider-rail__fill`,style:this.fillStyle}),this.marks?h("div",{class:[`${f}-slider-dots`,this.dotTransitionDisabled&&`${f}-slider-dots--transition-disabled`]},this.markInfos.map(M=>h("div",{key:M.label,class:[`${f}-slider-dot`,{[`${f}-slider-dot--active`]:M.active}],style:M.style}))):null,h("div",{ref:"handleRailRef",class:`${f}-slider-handles`},this.arrifiedValues.map((M,nt)=>{const $=this.isShowTooltip(nt);return h(VBinder,null,{default:()=>[h(VTarget,null,{default:()=>h("div",{ref:this.setHandleRefs(nt),class:`${f}-slider-handle-wrapper`,tabindex:this.mergedDisabled?-1:0,style:this.getHandleStyle(M,nt),onFocus:()=>{this.handleHandleFocus(nt)},onBlur:()=>{this.handleHandleBlur(nt)},onMouseenter:()=>{this.handleHandleMouseEnter(nt)},onMouseleave:()=>{this.handleHandleMouseLeave(nt)}},resolveSlot(this.$slots.thumb,()=>[h("div",{class:`${f}-slider-handle`})]))}),this.tooltip&&h(VFollower,{ref:this.setFollowerRefs(nt),show:$,to:this.adjustedTo,enabled:this.showTooltip&&!this.range||this.followerEnabledIndexSet.has(nt),teleportDisabled:this.adjustedTo===useAdjustedTo.tdkey,placement:this.mergedPlacement,containerClass:this.namespace},{default:()=>h(Transition,{name:"fade-in-scale-up-transition",appear:this.isMounted,css:this.shouldKeepTooltipTransition(nt),onEnter:()=>{this.followerEnabledIndexSet.add(nt)},onAfterLeave:()=>{this.followerEnabledIndexSet.delete(nt)}},{default:()=>{var ft;return $?((ft=this.indicatorOnRender)===null||ft===void 0||ft.call(this),h("div",{class:[`${f}-slider-handle-indicator`,this.indicatorThemeClass,`${f}-slider-handle-indicator--${this.mergedPlacement}`],style:this.indicatorCssVars},typeof d=="function"?d(M):M)):null}})})]})})),this.marks?h("div",{class:`${f}-slider-marks`},this.markInfos.map(M=>h("div",{key:M.label,class:`${f}-slider-mark`,style:M.style},M.label))):null))}});var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(f,ct){module.exports=f.pdfjsLib=ct()})(globalThis,()=>(()=>{var __webpack_modules__=[,(lt,f)=>{var qt;Object.defineProperty(f,"__esModule",{value:!0}),f.VerbosityLevel=f.Util=f.UnknownErrorException=f.UnexpectedResponseException=f.TextRenderingMode=f.RenderingIntentFlag=f.PromiseCapability=f.PermissionFlag=f.PasswordResponses=f.PasswordException=f.PageActionEventType=f.OPS=f.MissingPDFException=f.MAX_IMAGE_SIZE_TO_CACHE=f.LINE_FACTOR=f.LINE_DESCENT_FACTOR=f.InvalidPDFException=f.ImageKind=f.IDENTITY_MATRIX=f.FormatError=f.FeatureTest=f.FONT_IDENTITY_MATRIX=f.DocumentActionEventType=f.CMapCompressionType=f.BaseException=f.BASELINE_FACTOR=f.AnnotationType=f.AnnotationReplyType=f.AnnotationPrefix=f.AnnotationMode=f.AnnotationFlag=f.AnnotationFieldFlag=f.AnnotationEditorType=f.AnnotationEditorPrefix=f.AnnotationEditorParamsType=f.AnnotationBorderStyleType=f.AnnotationActionEventType=f.AbortException=void 0,f.assert=ut,f.bytesToString=W,f.createValidAbsoluteUrl=xt,f.getModificationDate=At,f.getUuid=$t,f.getVerbosityLevel=K,f.info=rt,f.isArrayBuffer=J,f.isArrayEqual=mt,f.isNodeJS=void 0,f.normalizeUnicode=Vt,f.objectFromMap=pt,f.objectSize=ot,f.setVerbosityLevel=C,f.shadow=Mt,f.string32=et,f.stringToBytes=it,f.stringToPDFString=bt,f.stringToUTF8String=D,f.unreachable=V,f.utf8StringToString=N,f.warn=dt;const ct=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");f.isNodeJS=ct;const d=[1,0,0,1,0,0];f.IDENTITY_MATRIX=d;const M=[.001,0,0,.001,0,0];f.FONT_IDENTITY_MATRIX=M;const nt=1e7;f.MAX_IMAGE_SIZE_TO_CACHE=nt;const $=1.35;f.LINE_FACTOR=$;const ft=.35;f.LINE_DESCENT_FACTOR=ft;const H=ft/$;f.BASELINE_FACTOR=H;const F={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};f.RenderingIntentFlag=F;const m={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};f.AnnotationMode=m;const U="pdfjs_internal_editor_";f.AnnotationEditorPrefix=U;const j={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};f.AnnotationEditorType=j;const R={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};f.AnnotationEditorParamsType=R;const E={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};f.PermissionFlag=E;const S={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};f.TextRenderingMode=S;const p={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};f.ImageKind=p;const _={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};f.AnnotationType=_;const T={GROUP:"Group",REPLY:"R"};f.AnnotationReplyType=T;const x={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};f.AnnotationFlag=x;const A={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};f.AnnotationFieldFlag=A;const r={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};f.AnnotationBorderStyleType=r;const o={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};f.AnnotationActionEventType=o;const P={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};f.DocumentActionEventType=P;const g={O:"PageOpen",C:"PageClose"};f.PageActionEventType=g;const a={ERRORS:0,WARNINGS:1,INFOS:5};f.VerbosityLevel=a;const k={NONE:0,BINARY:1};f.CMapCompressionType=k;const v={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};f.OPS=v;const z={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};f.PasswordResponses=z;let X=a.WARNINGS;function C(ht){Number.isInteger(ht)&&(X=ht)}function K(){return X}function rt(ht){X>=a.INFOS&&console.log(`Info: ${ht}`)}function dt(ht){X>=a.WARNINGS&&console.log(`Warning: ${ht}`)}function V(ht){throw new Error(ht)}function ut(ht,tt){ht||V(tt)}function _t(ht){switch(ht==null?void 0:ht.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function xt(ht,tt=null,Y=null){if(!ht)return null;try{if(Y&&typeof ht=="string"){if(Y.addDefaultProtocol&&ht.startsWith("www.")){const Ct=ht.match(/\./g);(Ct==null?void 0:Ct.length)>=2&&(ht=`http://${ht}`)}if(Y.tryConvertEncoding)try{ht=D(ht)}catch{}}const vt=tt?new URL(ht,tt):new URL(ht);if(_t(vt))return vt}catch{}return null}function Mt(ht,tt,Y,vt=!1){return Object.defineProperty(ht,tt,{value:Y,enumerable:!vt,configurable:!0,writable:!1}),Y}const w=function(){function tt(Y,vt){this.constructor===tt&&V("Cannot initialize BaseException."),this.message=Y,this.name=vt}return tt.prototype=new Error,tt.constructor=tt,tt}();f.BaseException=w;class i extends w{constructor(tt,Y){super(tt,"PasswordException"),this.code=Y}}f.PasswordException=i;class n extends w{constructor(tt,Y){super(tt,"UnknownErrorException"),this.details=Y}}f.UnknownErrorException=n;class s extends w{constructor(tt){super(tt,"InvalidPDFException")}}f.InvalidPDFException=s;class l extends w{constructor(tt){super(tt,"MissingPDFException")}}f.MissingPDFException=l;class u extends w{constructor(tt,Y){super(tt,"UnexpectedResponseException"),this.status=Y}}f.UnexpectedResponseException=u;class y extends w{constructor(tt){super(tt,"FormatError")}}f.FormatError=y;class I extends w{constructor(tt){super(tt,"AbortException")}}f.AbortException=I;function W(ht){(typeof ht!="object"||(ht==null?void 0:ht.length)===void 0)&&V("Invalid argument for bytesToString");const tt=ht.length,Y=8192;if(tt<Y)return String.fromCharCode.apply(null,ht);const vt=[];for(let Ct=0;Ct<tt;Ct+=Y){const ie=Math.min(Ct+Y,tt),ee=ht.subarray(Ct,ie);vt.push(String.fromCharCode.apply(null,ee))}return vt.join("")}function it(ht){typeof ht!="string"&&V("Invalid argument for stringToBytes");const tt=ht.length,Y=new Uint8Array(tt);for(let vt=0;vt<tt;++vt)Y[vt]=ht.charCodeAt(vt)&255;return Y}function et(ht){return String.fromCharCode(ht>>24&255,ht>>16&255,ht>>8&255,ht&255)}function ot(ht){return Object.keys(ht).length}function pt(ht){const tt=Object.create(null);for(const[Y,vt]of ht)tt[Y]=vt;return tt}function Et(){const ht=new Uint8Array(4);return ht[0]=1,new Uint32Array(ht.buffer,0,1)[0]===1}function gt(){try{return new Function(""),!0}catch{return!1}}class Ft{static get isLittleEndian(){return Mt(this,"isLittleEndian",Et())}static get isEvalSupported(){return Mt(this,"isEvalSupported",gt())}static get isOffscreenCanvasSupported(){return Mt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Mt(this,"platform",{isWin:!1,isMac:!1}):Mt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var tt,Y;return Mt(this,"isCSSRoundSupported",(Y=(tt=globalThis.CSS)==null?void 0:tt.supports)==null?void 0:Y.call(tt,"width: round(1.5px, 1px)"))}}f.FeatureTest=Ft;const Wt=[...Array(256).keys()].map(ht=>ht.toString(16).padStart(2,"0"));class wt{static makeHexColor(tt,Y,vt){return`#${Wt[tt]}${Wt[Y]}${Wt[vt]}`}static scaleMinMax(tt,Y){let vt;tt[0]?(tt[0]<0&&(vt=Y[0],Y[0]=Y[1],Y[1]=vt),Y[0]*=tt[0],Y[1]*=tt[0],tt[3]<0&&(vt=Y[2],Y[2]=Y[3],Y[3]=vt),Y[2]*=tt[3],Y[3]*=tt[3]):(vt=Y[0],Y[0]=Y[2],Y[2]=vt,vt=Y[1],Y[1]=Y[3],Y[3]=vt,tt[1]<0&&(vt=Y[2],Y[2]=Y[3],Y[3]=vt),Y[2]*=tt[1],Y[3]*=tt[1],tt[2]<0&&(vt=Y[0],Y[0]=Y[1],Y[1]=vt),Y[0]*=tt[2],Y[1]*=tt[2]),Y[0]+=tt[4],Y[1]+=tt[4],Y[2]+=tt[5],Y[3]+=tt[5]}static transform(tt,Y){return[tt[0]*Y[0]+tt[2]*Y[1],tt[1]*Y[0]+tt[3]*Y[1],tt[0]*Y[2]+tt[2]*Y[3],tt[1]*Y[2]+tt[3]*Y[3],tt[0]*Y[4]+tt[2]*Y[5]+tt[4],tt[1]*Y[4]+tt[3]*Y[5]+tt[5]]}static applyTransform(tt,Y){const vt=tt[0]*Y[0]+tt[1]*Y[2]+Y[4],Ct=tt[0]*Y[1]+tt[1]*Y[3]+Y[5];return[vt,Ct]}static applyInverseTransform(tt,Y){const vt=Y[0]*Y[3]-Y[1]*Y[2],Ct=(tt[0]*Y[3]-tt[1]*Y[2]+Y[2]*Y[5]-Y[4]*Y[3])/vt,ie=(-tt[0]*Y[1]+tt[1]*Y[0]+Y[4]*Y[1]-Y[5]*Y[0])/vt;return[Ct,ie]}static getAxialAlignedBoundingBox(tt,Y){const vt=this.applyTransform(tt,Y),Ct=this.applyTransform(tt.slice(2,4),Y),ie=this.applyTransform([tt[0],tt[3]],Y),ee=this.applyTransform([tt[2],tt[1]],Y);return[Math.min(vt[0],Ct[0],ie[0],ee[0]),Math.min(vt[1],Ct[1],ie[1],ee[1]),Math.max(vt[0],Ct[0],ie[0],ee[0]),Math.max(vt[1],Ct[1],ie[1],ee[1])]}static inverseTransform(tt){const Y=tt[0]*tt[3]-tt[1]*tt[2];return[tt[3]/Y,-tt[1]/Y,-tt[2]/Y,tt[0]/Y,(tt[2]*tt[5]-tt[4]*tt[3])/Y,(tt[4]*tt[1]-tt[5]*tt[0])/Y]}static singularValueDecompose2dScale(tt){const Y=[tt[0],tt[2],tt[1],tt[3]],vt=tt[0]*Y[0]+tt[1]*Y[2],Ct=tt[0]*Y[1]+tt[1]*Y[3],ie=tt[2]*Y[0]+tt[3]*Y[2],ee=tt[2]*Y[1]+tt[3]*Y[3],Z=(vt+ee)/2,Tt=Math.sqrt((vt+ee)**2-4*(vt*ee-ie*Ct))/2,Ot=Z+Tt||1,Pt=Z-Tt||1;return[Math.sqrt(Ot),Math.sqrt(Pt)]}static normalizeRect(tt){const Y=tt.slice(0);return tt[0]>tt[2]&&(Y[0]=tt[2],Y[2]=tt[0]),tt[1]>tt[3]&&(Y[1]=tt[3],Y[3]=tt[1]),Y}static intersect(tt,Y){const vt=Math.max(Math.min(tt[0],tt[2]),Math.min(Y[0],Y[2])),Ct=Math.min(Math.max(tt[0],tt[2]),Math.max(Y[0],Y[2]));if(vt>Ct)return null;const ie=Math.max(Math.min(tt[1],tt[3]),Math.min(Y[1],Y[3])),ee=Math.min(Math.max(tt[1],tt[3]),Math.max(Y[1],Y[3]));return ie>ee?null:[vt,ie,Ct,ee]}static bezierBoundingBox(tt,Y,vt,Ct,ie,ee,Z,Tt){const Ot=[],Pt=[[],[]];let Ut,jt,Zt,St,Jt,Ht,L,e;for(let Q=0;Q<2;++Q){if(Q===0?(jt=6*tt-12*vt+6*ie,Ut=-3*tt+9*vt-9*ie+3*Z,Zt=3*vt-3*tt):(jt=6*Y-12*Ct+6*ee,Ut=-3*Y+9*Ct-9*ee+3*Tt,Zt=3*Ct-3*Y),Math.abs(Ut)<1e-12){if(Math.abs(jt)<1e-12)continue;St=-Zt/jt,0<St&&St<1&&Ot.push(St);continue}L=jt*jt-4*Zt*Ut,e=Math.sqrt(L),!(L<0)&&(Jt=(-jt+e)/(2*Ut),0<Jt&&Jt<1&&Ot.push(Jt),Ht=(-jt-e)/(2*Ut),0<Ht&&Ht<1&&Ot.push(Ht))}let b=Ot.length,O;const G=b;for(;b--;)St=Ot[b],O=1-St,Pt[0][b]=O*O*O*tt+3*O*O*St*vt+3*O*St*St*ie+St*St*St*Z,Pt[1][b]=O*O*O*Y+3*O*O*St*Ct+3*O*St*St*ee+St*St*St*Tt;return Pt[0][G]=tt,Pt[1][G]=Y,Pt[0][G+1]=Z,Pt[1][G+1]=Tt,Pt[0].length=Pt[1].length=G+2,[Math.min(...Pt[0]),Math.min(...Pt[1]),Math.max(...Pt[0]),Math.max(...Pt[1])]}}f.Util=wt;const Lt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function bt(ht){if(ht[0]>="\xEF"){let Y;if(ht[0]==="\xFE"&&ht[1]==="\xFF"?Y="utf-16be":ht[0]==="\xFF"&&ht[1]==="\xFE"?Y="utf-16le":ht[0]==="\xEF"&&ht[1]==="\xBB"&&ht[2]==="\xBF"&&(Y="utf-8"),Y)try{const vt=new TextDecoder(Y,{fatal:!0}),Ct=it(ht);return vt.decode(Ct)}catch(vt){dt(`stringToPDFString: "${vt}".`)}}const tt=[];for(let Y=0,vt=ht.length;Y<vt;Y++){const Ct=Lt[ht.charCodeAt(Y)];tt.push(Ct?String.fromCharCode(Ct):ht.charAt(Y))}return tt.join("")}function D(ht){return decodeURIComponent(escape(ht))}function N(ht){return unescape(encodeURIComponent(ht))}function J(ht){return typeof ht=="object"&&(ht==null?void 0:ht.byteLength)!==void 0}function mt(ht,tt){if(ht.length!==tt.length)return!1;for(let Y=0,vt=ht.length;Y<vt;Y++)if(ht[Y]!==tt[Y])return!1;return!0}function At(ht=new Date){return[ht.getUTCFullYear().toString(),(ht.getUTCMonth()+1).toString().padStart(2,"0"),ht.getUTCDate().toString().padStart(2,"0"),ht.getUTCHours().toString().padStart(2,"0"),ht.getUTCMinutes().toString().padStart(2,"0"),ht.getUTCSeconds().toString().padStart(2,"0")].join("")}class Bt{constructor(){B(this,qt,!1);this.promise=new Promise((tt,Y)=>{this.resolve=vt=>{st(this,qt,!0),tt(vt)},this.reject=vt=>{st(this,qt,!0),Y(vt)}})}get settled(){return t(this,qt)}}qt=new WeakMap,f.PromiseCapability=Bt;let zt=null,Nt=null;function Vt(ht){return zt||(zt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Nt=new Map([["\uFB05","\u017Ft"]])),ht.replaceAll(zt,(tt,Y,vt)=>Y?Y.normalize("NFKC"):Nt.get(vt))}function $t(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const ht=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(ht);else for(let tt=0;tt<32;tt++)ht[tt]=Math.floor(Math.random()*255);return W(ht)}const Xt="pdfjs_internal_id_";f.AnnotationPrefix=Xt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var lt,ct,d,M,ue,$,Ce,H,F,m,U,j,R,E,S,p,Te,T,x,je,r,o;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(g){var Bt,zt;if(typeof g=="string"||g instanceof URL?g={url:g}:(0,_util.isArrayBuffer)(g)&&(g={data:g}),typeof g!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!g.url&&!g.data&&!g.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const a=new PDFDocumentLoadingTask,{docId:k}=a,v=g.url?getUrlProp(g.url):null,z=g.data?getDataProp(g.data):null,X=g.httpHeaders||null,C=g.withCredentials===!0,K=(Bt=g.password)!=null?Bt:null,rt=g.range instanceof PDFDataRangeTransport?g.range:null,dt=Number.isInteger(g.rangeChunkSize)&&g.rangeChunkSize>0?g.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let V=g.worker instanceof PDFWorker?g.worker:null;const ut=g.verbosity,_t=typeof g.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(g.docBaseUrl)?g.docBaseUrl:null,xt=typeof g.cMapUrl=="string"?g.cMapUrl:null,Mt=g.cMapPacked!==!1,w=g.CMapReaderFactory||DefaultCMapReaderFactory,i=typeof g.standardFontDataUrl=="string"?g.standardFontDataUrl:null,n=g.StandardFontDataFactory||DefaultStandardFontDataFactory,s=g.stopAtErrors!==!0,l=Number.isInteger(g.maxImageSize)&&g.maxImageSize>-1?g.maxImageSize:-1,u=g.isEvalSupported!==!1,y=typeof g.isOffscreenCanvasSupported=="boolean"?g.isOffscreenCanvasSupported:!_util.isNodeJS,I=Number.isInteger(g.canvasMaxAreaInBytes)?g.canvasMaxAreaInBytes:-1,W=typeof g.disableFontFace=="boolean"?g.disableFontFace:_util.isNodeJS,it=g.fontExtraProperties===!0,et=g.enableXfa===!0,ot=g.ownerDocument||globalThis.document,pt=g.disableRange===!0,Et=g.disableStream===!0,gt=g.disableAutoFetch===!0,Ft=g.pdfBug===!0,Wt=rt?rt.length:(zt=g.length)!=null?zt:NaN,wt=typeof g.useSystemFonts=="boolean"?g.useSystemFonts:!_util.isNodeJS&&!W,Lt=typeof g.useWorkerFetch=="boolean"?g.useWorkerFetch:w===_display_utils.DOMCMapReaderFactory&&n===_display_utils.DOMStandardFontDataFactory&&xt&&i&&(0,_display_utils.isValidFetchUrl)(xt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(i,document.baseURI),bt=g.canvasFactory||new DefaultCanvasFactory({ownerDocument:ot}),D=g.filterFactory||new DefaultFilterFactory({docId:k,ownerDocument:ot}),N=null;(0,_util.setVerbosityLevel)(ut);const J={canvasFactory:bt,filterFactory:D};if(Lt||(J.cMapReaderFactory=new w({baseUrl:xt,isCompressed:Mt}),J.standardFontDataFactory=new n({baseUrl:i})),!V){const Nt={verbosity:ut,port:_worker_options.GlobalWorkerOptions.workerPort};V=Nt.port?PDFWorker.fromPort(Nt):new PDFWorker(Nt),a._worker=V}const mt={docId:k,apiVersion:"3.11.174",data:z,password:K,disableAutoFetch:gt,rangeChunkSize:dt,length:Wt,docBaseUrl:_t,enableXfa:et,evaluatorOptions:{maxImageSize:l,disableFontFace:W,ignoreErrors:s,isEvalSupported:u,isOffscreenCanvasSupported:y,canvasMaxAreaInBytes:I,fontExtraProperties:it,useSystemFonts:wt,cMapUrl:Lt?xt:null,standardFontDataUrl:Lt?i:null}},At={ignoreErrors:s,isEvalSupported:u,disableFontFace:W,fontExtraProperties:it,enableXfa:et,ownerDocument:ot,disableAutoFetch:gt,pdfBug:Ft,styleElement:N};return V.promise.then(function(){if(a.destroyed)throw new Error("Loading aborted");const Nt=_fetchDocument(V,mt),Vt=new Promise(function($t){let Xt;rt?Xt=new _transport_stream.PDFDataTransportStream({length:Wt,initialData:rt.initialData,progressiveDone:rt.progressiveDone,contentDispositionFilename:rt.contentDispositionFilename,disableRange:pt,disableStream:Et},rt):z||(Xt=(ht=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(ht):(0,_display_utils.isValidFetchUrl)(ht.url)?new _displayFetch_stream.PDFFetchStream(ht):new _displayNetwork.PDFNetworkStream(ht))({url:v,length:Wt,httpHeaders:X,withCredentials:C,rangeChunkSize:dt,disableRange:pt,disableStream:Et})),$t(Xt)});return Promise.all([Nt,Vt]).then(function([$t,Xt]){if(a.destroyed)throw new Error("Loading aborted");const qt=new _message_handler.MessageHandler(k,$t,V.port),ht=new WorkerTransport(qt,a,Xt,At,J);a._transport=ht,qt.send("Ready",null)})}).catch(a._capability.reject),a}async function _fetchDocument(g,a){if(g.destroyed)throw new Error("Worker was destroyed");const k=await g.messageHandler.sendWithPromise("GetDocRequest",a,a.data?[a.data.buffer]:null);if(g.destroyed)throw new Error("Worker was destroyed");return k}function getUrlProp(g){if(g instanceof URL)return g.href;try{return new URL(g,window.location).href}catch{if(_util.isNodeJS&&typeof g=="string")return g}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(g){if(_util.isNodeJS&&typeof Buffer<"u"&&g instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength)return g;if(typeof g=="string")return(0,_util.stringToBytes)(g);if(typeof g=="object"&&!isNaN(g==null?void 0:g.length)||(0,_util.isArrayBuffer)(g))return new Uint8Array(g);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const f=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${be(f,lt)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var a,k,v;this.destroyed=!0;try{(a=this._worker)!=null&&a.port&&(this._worker._pendingDestroy=!0),await((k=this._transport)==null?void 0:k.destroy())}catch(z){throw(v=this._worker)!=null&&v.port&&delete this._worker._pendingDestroy,z}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=f;lt=new WeakMap,B(PDFDocumentLoadingTask,lt,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(a,k,v=!1,z=null){this.length=a,this.initialData=k,this.progressiveDone=v,this.contentDispositionFilename=z,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(a){this._rangeListeners.push(a)}addProgressListener(a){this._progressListeners.push(a)}addProgressiveReadListener(a){this._progressiveReadListeners.push(a)}addProgressiveDoneListener(a){this._progressiveDoneListeners.push(a)}onDataRange(a,k){for(const v of this._rangeListeners)v(a,k)}onDataProgress(a,k){this._readyCapability.promise.then(()=>{for(const v of this._progressListeners)v(a,k)})}onDataProgressiveRead(a){this._readyCapability.promise.then(()=>{for(const k of this._progressiveReadListeners)k(a)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const a of this._progressiveDoneListeners)a()})}transportReady(){this._readyCapability.resolve()}requestDataRange(a,k){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(a,k){this._pdfInfo=a,this._transport=k,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(v=>{if(!v)return v;const z=[];for(const X in v)z.push(...v[X]);return z}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(a){return this._transport.getPage(a)}getPageIndex(a){return this._transport.getPageIndex(a)}getDestinations(){return this._transport.getDestinations()}getDestination(a){return this._transport.getDestination(a)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(a=!1){return this._transport.startCleanup(a||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(a,k,v,z=!1){B(this,M);B(this,$);B(this,ct,null);B(this,d,!1);this._pageIndex=a,this._pageInfo=k,this._transport=v,this._stats=z?new _display_utils.StatTimer:null,this._pdfBug=z,this.commonObjs=v.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:a,rotation:k=this.rotate,offsetX:v=0,offsetY:z=0,dontFlip:X=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:a,rotation:k,offsetX:v,offsetY:z,dontFlip:X})}getAnnotations({intent:a="display"}={}){const k=this._transport.getRenderingIntent(a);return this._transport.getAnnotations(this._pageIndex,k.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var a;return((a=this._transport._htmlForXfa)==null?void 0:a.children[this._pageIndex])||null}render({canvasContext:a,viewport:k,intent:v="display",annotationMode:z=_util.AnnotationMode.ENABLE,transform:X=null,background:C=null,optionalContentConfigPromise:K=null,annotationCanvasMap:rt=null,pageColors:dt=null,printAnnotationStorage:V=null}){var n,s;(n=this._stats)==null||n.time("Overall");const ut=this._transport.getRenderingIntent(v,z,V);st(this,d,!1),q(this,$,Ce).call(this),K||(K=this._transport.getOptionalContentConfig());let _t=this._intentStates.get(ut.cacheKey);_t||(_t=Object.create(null),this._intentStates.set(ut.cacheKey,_t)),_t.streamReaderCancelTimeout&&(clearTimeout(_t.streamReaderCancelTimeout),_t.streamReaderCancelTimeout=null);const xt=!!(ut.renderingIntent&_util.RenderingIntentFlag.PRINT);_t.displayReadyCapability||(_t.displayReadyCapability=new _util.PromiseCapability,_t.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(s=this._stats)==null||s.time("Page Request"),this._pumpOperatorList(ut));const Mt=l=>{var u,y;_t.renderTasks.delete(w),(this._maybeCleanupAfterRender||xt)&&st(this,d,!0),q(this,M,ue).call(this,!xt),l?(w.capability.reject(l),this._abortOperatorList({intentState:_t,reason:l instanceof Error?l:new Error(l)})):w.capability.resolve(),(u=this._stats)==null||u.timeEnd("Rendering"),(y=this._stats)==null||y.timeEnd("Overall")},w=new InternalRenderTask({callback:Mt,params:{canvasContext:a,viewport:k,transform:X,background:C},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:rt,operatorList:_t.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!xt,pdfBug:this._pdfBug,pageColors:dt});(_t.renderTasks||(_t.renderTasks=new Set)).add(w);const i=w.task;return Promise.all([_t.displayReadyCapability.promise,K]).then(([l,u])=>{var y;if(this.destroyed){Mt();return}(y=this._stats)==null||y.time("Rendering"),w.initializeGraphics({transparency:l,optionalContentConfig:u}),w.operatorListChanged()}).catch(Mt),i}getOperatorList({intent:a="display",annotationMode:k=_util.AnnotationMode.ENABLE,printAnnotationStorage:v=null}={}){var rt;function z(){C.operatorList.lastChunk&&(C.opListReadCapability.resolve(C.operatorList),C.renderTasks.delete(K))}const X=this._transport.getRenderingIntent(a,k,v,!0);let C=this._intentStates.get(X.cacheKey);C||(C=Object.create(null),this._intentStates.set(X.cacheKey,C));let K;return C.opListReadCapability||(K=Object.create(null),K.operatorListChanged=z,C.opListReadCapability=new _util.PromiseCapability,(C.renderTasks||(C.renderTasks=new Set)).add(K),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(rt=this._stats)==null||rt.time("Page Request"),this._pumpOperatorList(X)),C.opListReadCapability.promise}streamTextContent({includeMarkedContent:a=!1,disableNormalization:k=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:a===!0,disableNormalization:k===!0},{highWaterMark:100,size(z){return z.items.length}})}getTextContent(a={}){if(this._transport._htmlForXfa)return this.getXfa().then(v=>_xfa_text.XfaText.textContent(v));const k=this.streamTextContent(a);return new Promise(function(v,z){function X(){C.read().then(function({value:rt,done:dt}){if(dt){v(K);return}Object.assign(K.styles,rt.styles),K.items.push(...rt.items),X()},z)}const C=k.getReader(),K={items:[],styles:Object.create(null)};X()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const a=[];for(const k of this._intentStates.values())if(this._abortOperatorList({intentState:k,reason:new Error("Page was destroyed."),force:!0}),!k.opListReadCapability)for(const v of k.renderTasks)a.push(v.completed),v.cancel();return this.objs.clear(),st(this,d,!1),q(this,$,Ce).call(this),Promise.all(a)}cleanup(a=!1){st(this,d,!0);const k=q(this,M,ue).call(this,!1);return a&&k&&this._stats&&(this._stats=new _display_utils.StatTimer),k}_startRenderPage(a,k){var z,X;const v=this._intentStates.get(k);!v||((z=this._stats)==null||z.timeEnd("Page Request"),(X=v.displayReadyCapability)==null||X.resolve(a))}_renderPageChunk(a,k){for(let v=0,z=a.length;v<z;v++)k.operatorList.fnArray.push(a.fnArray[v]),k.operatorList.argsArray.push(a.argsArray[v]);k.operatorList.lastChunk=a.lastChunk,k.operatorList.separateAnnots=a.separateAnnots;for(const v of k.renderTasks)v.operatorListChanged();a.lastChunk&&q(this,M,ue).call(this,!0)}_pumpOperatorList({renderingIntent:a,cacheKey:k,annotationStorageSerializable:v}){const{map:z,transfers:X}=v,K=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:a,cacheKey:k,annotationStorage:z},X).getReader(),rt=this._intentStates.get(k);rt.streamReader=K;const dt=()=>{K.read().then(({value:V,done:ut})=>{if(ut){rt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(V,rt),dt())},V=>{if(rt.streamReader=null,!this._transport.destroyed){if(rt.operatorList){rt.operatorList.lastChunk=!0;for(const ut of rt.renderTasks)ut.operatorListChanged();q(this,M,ue).call(this,!0)}if(rt.displayReadyCapability)rt.displayReadyCapability.reject(V);else if(rt.opListReadCapability)rt.opListReadCapability.reject(V);else throw V}})};dt()}_abortOperatorList({intentState:a,reason:k,force:v=!1}){if(!!a.streamReader){if(a.streamReaderCancelTimeout&&(clearTimeout(a.streamReaderCancelTimeout),a.streamReaderCancelTimeout=null),!v){if(a.renderTasks.size>0)return;if(k instanceof _display_utils.RenderingCancelledException){let z=RENDERING_CANCELLED_TIMEOUT;k.extraDelay>0&&k.extraDelay<1e3&&(z+=k.extraDelay),a.streamReaderCancelTimeout=setTimeout(()=>{a.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:a,reason:k,force:!0})},z);return}}if(a.streamReader.cancel(new _util.AbortException(k.message)).catch(()=>{}),a.streamReader=null,!this._transport.destroyed){for(const[z,X]of this._intentStates)if(X===a){this._intentStates.delete(z);break}this.cleanup()}}}get stats(){return this._stats}}ct=new WeakMap,d=new WeakMap,M=new WeakSet,ue=function(a=!1){if(q(this,$,Ce).call(this),!t(this,d)||this.destroyed)return!1;if(a)return st(this,ct,setTimeout(()=>{st(this,ct,null),q(this,M,ue).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:k,operatorList:v}of this._intentStates.values())if(k.size>0||!v.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),st(this,d,!1),!0},$=new WeakSet,Ce=function(){t(this,ct)&&(clearTimeout(t(this,ct)),st(this,ct,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){B(this,H,new Set);B(this,F,Promise.resolve())}postMessage(a,k){const v={data:structuredClone(a,k?{transfer:k}:null)};t(this,F).then(()=>{for(const z of t(this,H))z.call(this,v)})}addEventListener(a,k){t(this,H).add(k)}removeEventListener(a,k){t(this,H).delete(k)}terminate(){t(this,H).clear()}}H=new WeakMap,F=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const g=(m=document==null?void 0:document.currentScript)==null?void 0:m.src;g&&(PDFWorkerUtil.fallbackWorkerSrc=g.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(g,a){let k;try{if(k=new URL(g),!k.origin||k.origin==="null")return!1}catch{return!1}const v=new URL(a,k);return k.origin===v.origin},PDFWorkerUtil.createCDNWrapper=function(g){const a=`importScripts("${g}");`;return URL.createObjectURL(new Blob([a]))}}const _PDFWorker=class{constructor({name:g=null,port:a=null,verbosity:k=(0,_util.getVerbosityLevel)()}={}){var v;if(this.name=g,this.destroyed=!1,this.verbosity=k,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,a){if((v=t(_PDFWorker,U))!=null&&v.has(a))throw new Error("Cannot use more than one PDFWorker per port.");(t(_PDFWorker,U)||st(_PDFWorker,U,new WeakMap)).set(a,this),this._initializeFromPort(a);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(g){this._port=g,this._messageHandler=new _message_handler.MessageHandler("main","worker",g),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:g}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,g)||(g=PDFWorkerUtil.createCDNWrapper(new URL(g,window.location).href));const a=new Worker(g),k=new _message_handler.MessageHandler("main","worker",a),v=()=>{a.removeEventListener("error",z),k.destroy(),a.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},z=()=>{this._webWorker||v()};a.addEventListener("error",z),k.on("test",C=>{if(a.removeEventListener("error",z),this.destroyed){v();return}C?(this._messageHandler=k,this._port=a,this._webWorker=a,this._readyCapability.resolve(),k.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),k.destroy(),a.terminate())}),k.on("ready",C=>{if(a.removeEventListener("error",z),this.destroyed){v();return}try{X()}catch{this._setupFakeWorker()}});const X=()=>{const C=new Uint8Array;k.send("test",C,[C.buffer])};X();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(g=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const a=new LoopbackPort;this._port=a;const k=`fake${PDFWorkerUtil.fakeWorkerId++}`,v=new _message_handler.MessageHandler(k+"_worker",k,a);g.setup(v,a);const z=new _message_handler.MessageHandler(k,k+"_worker",a);this._messageHandler=z,this._readyCapability.resolve(),z.send("configure",{verbosity:this.verbosity})}).catch(g=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${g.message}".`))})}destroy(){var g;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(g=t(_PDFWorker,U))==null||g.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(g){var k;if(!(g!=null&&g.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const a=(k=t(this,U))==null?void 0:k.get(g.port);if(a){if(a._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return a}return new _PDFWorker(g)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var g;try{return((g=globalThis.pdfjsWorker)==null?void 0:g.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;U=new WeakMap,B(PDFWorker,U,void 0),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(a,k,v,z,X){B(this,p);B(this,j,new Map);B(this,R,new Map);B(this,E,new Map);B(this,S,null);this.messageHandler=a,this.loadingTask=k,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:z.ownerDocument,styleElement:z.styleElement}),this._params=z,this.canvasFactory=X.canvasFactory,this.filterFactory=X.filterFactory,this.cMapReaderFactory=X.cMapReaderFactory,this.standardFontDataFactory=X.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=v,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(a,k=_util.AnnotationMode.ENABLE,v=null,z=!1){let X=_util.RenderingIntentFlag.DISPLAY,C=_annotation_storage.SerializableEmpty;switch(a){case"any":X=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":X=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${a}`)}switch(k){case _util.AnnotationMode.DISABLE:X+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:X+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:X+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,C=(X&_util.RenderingIntentFlag.PRINT&&v instanceof _annotation_storage.PrintAnnotationStorage?v:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${k}`)}return z&&(X+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:X,cacheKey:`${X}_${C.hash}`,annotationStorageSerializable:C}}destroy(){var v;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(v=t(this,S))==null||v.reject(new Error("Worker was destroyed during onPassword callback"));const a=[];for(const z of t(this,R).values())a.push(z._destroy());t(this,R).clear(),t(this,E).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const k=this.messageHandler.sendWithPromise("Terminate",null);return a.push(k),Promise.all(a).then(()=>{var z;this.commonObjs.clear(),this.fontLoader.clear(),t(this,j).clear(),this.filterFactory.destroy(),(z=this._networkStream)==null||z.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:a,loadingTask:k}=this;a.on("GetReader",(v,z)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=X=>{this._lastProgress={loaded:X.loaded,total:X.total}},z.onPull=()=>{this._fullReader.read().then(function({value:X,done:C}){if(C){z.close();return}(0,_util.assert)(X instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),z.enqueue(new Uint8Array(X),1,[X])}).catch(X=>{z.error(X)})},z.onCancel=X=>{this._fullReader.cancel(X),z.ready.catch(C=>{if(!this.destroyed)throw C})}}),a.on("ReaderHeadersReady",v=>{const z=new _util.PromiseCapability,X=this._fullReader;return X.headersReady.then(()=>{var C;(!X.isStreamingSupported||!X.isRangeSupported)&&(this._lastProgress&&((C=k.onProgress)==null||C.call(k,this._lastProgress)),X.onProgress=K=>{var rt;(rt=k.onProgress)==null||rt.call(k,{loaded:K.loaded,total:K.total})}),z.resolve({isStreamingSupported:X.isStreamingSupported,isRangeSupported:X.isRangeSupported,contentLength:X.contentLength})},z.reject),z.promise}),a.on("GetRangeReader",(v,z)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const X=this._networkStream.getRangeReader(v.begin,v.end);if(!X){z.close();return}z.onPull=()=>{X.read().then(function({value:C,done:K}){if(K){z.close();return}(0,_util.assert)(C instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),z.enqueue(new Uint8Array(C),1,[C])}).catch(C=>{z.error(C)})},z.onCancel=C=>{X.cancel(C),z.ready.catch(K=>{if(!this.destroyed)throw K})}}),a.on("GetDoc",({pdfInfo:v})=>{this._numPages=v.numPages,this._htmlForXfa=v.htmlForXfa,delete v.htmlForXfa,k._capability.resolve(new PDFDocumentProxy(v,this))}),a.on("DocException",function(v){let z;switch(v.name){case"PasswordException":z=new _util.PasswordException(v.message,v.code);break;case"InvalidPDFException":z=new _util.InvalidPDFException(v.message);break;case"MissingPDFException":z=new _util.MissingPDFException(v.message);break;case"UnexpectedResponseException":z=new _util.UnexpectedResponseException(v.message,v.status);break;case"UnknownErrorException":z=new _util.UnknownErrorException(v.message,v.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}k._capability.reject(z)}),a.on("PasswordRequest",v=>{if(st(this,S,new _util.PromiseCapability),k.onPassword){const z=X=>{X instanceof Error?t(this,S).reject(X):t(this,S).resolve({password:X})};try{k.onPassword(z,v.code)}catch(X){t(this,S).reject(X)}}else t(this,S).reject(new _util.PasswordException(v.message,v.code));return t(this,S).promise}),a.on("DataLoaded",v=>{var z;(z=k.onProgress)==null||z.call(k,{loaded:v.length,total:v.length}),this.downloadInfoCapability.resolve(v)}),a.on("StartRenderPage",v=>{if(this.destroyed)return;t(this,R).get(v.pageIndex)._startRenderPage(v.transparency,v.cacheKey)}),a.on("commonobj",([v,z,X])=>{var C;if(!this.destroyed&&!this.commonObjs.has(v))switch(z){case"Font":const K=this._params;if("error"in X){const V=X.error;(0,_util.warn)(`Error during font loading: ${V}`),this.commonObjs.resolve(v,V);break}const rt=K.pdfBug&&((C=globalThis.FontInspector)==null?void 0:C.enabled)?(V,ut)=>globalThis.FontInspector.fontAdded(V,ut):null,dt=new _font_loader.FontFaceObject(X,{isEvalSupported:K.isEvalSupported,disableFontFace:K.disableFontFace,ignoreErrors:K.ignoreErrors,inspectFont:rt});this.fontLoader.bind(dt).catch(V=>a.sendWithPromise("FontFallback",{id:v})).finally(()=>{!K.fontExtraProperties&&dt.data&&(dt.data=null),this.commonObjs.resolve(v,dt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(v,X);break;default:throw new Error(`Got unknown common object type ${z}`)}}),a.on("obj",([v,z,X,C])=>{var rt;if(this.destroyed)return;const K=t(this,R).get(z);if(!K.objs.has(v))switch(X){case"Image":if(K.objs.resolve(v,C),C){let dt;if(C.bitmap){const{width:V,height:ut}=C;dt=V*ut*4}else dt=((rt=C.data)==null?void 0:rt.length)||0;dt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(K._maybeCleanupAfterRender=!0)}break;case"Pattern":K.objs.resolve(v,C);break;default:throw new Error(`Got unknown object type ${X}`)}}),a.on("DocProgress",v=>{var z;this.destroyed||(z=k.onProgress)==null||z.call(k,{loaded:v.loaded,total:v.total})}),a.on("FetchBuiltInCMap",v=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(v):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),a.on("FetchStandardFontData",v=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(v):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var v,z;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:a,transfers:k}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:a,filename:(z=(v=this._fullReader)==null?void 0:v.filename)!=null?z:null},k).finally(()=>{this.annotationStorage.resetModified()})}getPage(a){if(!Number.isInteger(a)||a<=0||a>this._numPages)return Promise.reject(new Error("Invalid page request."));const k=a-1,v=t(this,E).get(k);if(v)return v;const z=this.messageHandler.sendWithPromise("GetPage",{pageIndex:k}).then(X=>{if(this.destroyed)throw new Error("Transport destroyed");const C=new PDFPageProxy(k,X,this,this._params.pdfBug);return t(this,R).set(k,C),C});return t(this,E).set(k,z),z}getPageIndex(a){return typeof a!="object"||a===null||!Number.isInteger(a.num)||a.num<0||!Number.isInteger(a.gen)||a.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:a.num,gen:a.gen})}getAnnotations(a,k){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:a,intent:k})}getFieldObjects(){return q(this,p,Te).call(this,"GetFieldObjects")}hasJSActions(){return q(this,p,Te).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(a){return typeof a!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:a})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return q(this,p,Te).call(this,"GetDocJSActions")}getPageJSActions(a){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:a})}getStructTree(a){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:a})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(a=>new _optional_content_config.OptionalContentConfig(a))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const a="GetMetadata",k=t(this,j).get(a);if(k)return k;const v=this.messageHandler.sendWithPromise(a,null).then(z=>{var X,C,K,rt;return{info:z[0],metadata:z[1]?new _metadata.Metadata(z[1]):null,contentDispositionFilename:(C=(X=this._fullReader)==null?void 0:X.filename)!=null?C:null,contentLength:(rt=(K=this._fullReader)==null?void 0:K.contentLength)!=null?rt:null}});return t(this,j).set(a,v),v}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(a=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const k of t(this,R).values())if(!k.cleanup())throw new Error(`startCleanup: Page ${k.pageNumber} is currently rendering.`);this.commonObjs.clear(),a||this.fontLoader.clear(),t(this,j).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:a,enableXfa:k}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:a,enableXfa:k})}}j=new WeakMap,R=new WeakMap,E=new WeakMap,S=new WeakMap,p=new WeakSet,Te=function(a,k=null){const v=t(this,j).get(a);if(v)return v;const z=this.messageHandler.sendWithPromise(a,k);return t(this,j).set(a,z),z};class PDFObjects{constructor(){B(this,x);B(this,T,Object.create(null))}get(a,k=null){if(k){const z=q(this,x,je).call(this,a);return z.capability.promise.then(()=>k(z.data)),null}const v=t(this,T)[a];if(!(v!=null&&v.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${a}.`);return v.data}has(a){const k=t(this,T)[a];return(k==null?void 0:k.capability.settled)||!1}resolve(a,k=null){const v=q(this,x,je).call(this,a);v.data=k,v.capability.resolve()}clear(){var a;for(const k in t(this,T)){const{data:v}=t(this,T)[k];(a=v==null?void 0:v.bitmap)==null||a.close()}st(this,T,Object.create(null))}}T=new WeakMap,x=new WeakSet,je=function(a){var k;return(k=t(this,T))[a]||(k[a]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(a){B(this,r,null);st(this,r,a),this.onContinue=null}get promise(){return t(this,r).capability.promise}cancel(a=0){t(this,r).cancel(null,a)}get separateAnnots(){const{separateAnnots:a}=t(this,r).operatorList;if(!a)return!1;const{annotationCanvasMap:k}=t(this,r);return a.form||a.canvas&&(k==null?void 0:k.size)>0}}r=new WeakMap,exports.RenderTask=RenderTask;const P=class{constructor({callback:a,params:k,objs:v,commonObjs:z,annotationCanvasMap:X,operatorList:C,pageIndex:K,canvasFactory:rt,filterFactory:dt,useRequestAnimationFrame:V=!1,pdfBug:ut=!1,pageColors:_t=null}){this.callback=a,this.params=k,this.objs=v,this.commonObjs=z,this.annotationCanvasMap=X,this.operatorListIdx=null,this.operatorList=C,this._pageIndex=K,this.canvasFactory=rt,this.filterFactory=dt,this._pdfBug=ut,this.pageColors=_t,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=V===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=k.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:a=!1,optionalContentConfig:k}){var K,rt;if(this.cancelled)return;if(this._canvas){if(t(P,o).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(P,o).add(this._canvas)}this._pdfBug&&((K=globalThis.StepperManager)==null?void 0:K.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:v,viewport:z,transform:X,background:C}=this.params;this.gfx=new _canvas.CanvasGraphics(v,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:k},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:X,viewport:z,transparency:a,background:C}),this.operatorListIdx=0,this.graphicsReady=!0,(rt=this.graphicsReadyCallback)==null||rt.call(this)}cancel(a=null,k=0){var v;this.running=!1,this.cancelled=!0,(v=this.gfx)==null||v.endDrawing(),t(P,o).delete(this._canvas),this.callback(a||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,k))}operatorListChanged(){var a;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(a=this.stepper)==null||a.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),t(P,o).delete(this._canvas),this.callback())))}};let InternalRenderTask=P;o=new WeakMap,B(InternalRenderTask,o,new WeakSet);const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(lt,f,ct)=>{var F,m,U,yi,R;Object.defineProperty(f,"__esModule",{value:!0}),f.SerializableEmpty=f.PrintAnnotationStorage=f.AnnotationStorage=void 0;var d=ct(1),M=ct(4),nt=ct(8);const $=Object.freeze({map:null,hash:"",transfers:void 0});f.SerializableEmpty=$;class ft{constructor(){B(this,U);B(this,F,!1);B(this,m,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(S,p){const _=t(this,m).get(S);return _===void 0?p:Object.assign(p,_)}getRawValue(S){return t(this,m).get(S)}remove(S){if(t(this,m).delete(S),t(this,m).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const p of t(this,m).values())if(p instanceof M.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(S,p){const _=t(this,m).get(S);let T=!1;if(_!==void 0)for(const[x,A]of Object.entries(p))_[x]!==A&&(T=!0,_[x]=A);else T=!0,t(this,m).set(S,p);T&&q(this,U,yi).call(this),p instanceof M.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(p.constructor._type)}has(S){return t(this,m).has(S)}getAll(){return t(this,m).size>0?(0,d.objectFromMap)(t(this,m)):null}setAll(S){for(const[p,_]of Object.entries(S))this.setValue(p,_)}get size(){return t(this,m).size}resetModified(){t(this,F)&&(st(this,F,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new H(this)}get serializable(){if(t(this,m).size===0)return $;const S=new Map,p=new nt.MurmurHash3_64,_=[],T=Object.create(null);let x=!1;for(const[A,r]of t(this,m)){const o=r instanceof M.AnnotationEditor?r.serialize(!1,T):r;o&&(S.set(A,o),p.update(`${A}:${JSON.stringify(o)}`),x||(x=!!o.bitmap))}if(x)for(const A of S.values())A.bitmap&&_.push(A.bitmap);return S.size>0?{map:S,hash:p.hexdigest(),transfers:_}:$}}F=new WeakMap,m=new WeakMap,U=new WeakSet,yi=function(){t(this,F)||(st(this,F,!0),typeof this.onSetModified=="function"&&this.onSetModified())},f.AnnotationStorage=ft;class H extends ft{constructor(p){super();B(this,R,void 0);const{map:_,hash:T,transfers:x}=p.serializable,A=structuredClone(_,x?{transfer:x}:null);st(this,R,{map:A,hash:T,transfers:x})}get print(){(0,d.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,R)}}R=new WeakMap,f.PrintAnnotationStorage=H},(lt,f,ct)=>{var H,F,m,U,j,R,E,S,p,_,T,x,A,r,o,He,g,We,k,ze,z,Ve,C,Si,rt,Ei,V,wi,_t,Ge,Mt,Ci;Object.defineProperty(f,"__esModule",{value:!0}),f.AnnotationEditor=void 0;var d=ct(5),M=ct(1),nt=ct(6);const i=class{constructor(s){B(this,o);B(this,g);B(this,z);B(this,C);B(this,rt);B(this,V);B(this,_t);B(this,Mt);B(this,H,"");B(this,F,!1);B(this,m,null);B(this,U,null);B(this,j,null);B(this,R,!1);B(this,E,null);B(this,S,this.focusin.bind(this));B(this,p,this.focusout.bind(this));B(this,_,!1);B(this,T,!1);B(this,x,!1);se(this,"_initialOptions",Object.create(null));se(this,"_uiManager",null);se(this,"_focusEventsAllowed",!0);se(this,"_l10nPromise",null);B(this,A,!1);B(this,r,i._zIndex++);this.constructor===i&&(0,M.unreachable)("Cannot initialize AnnotationEditor."),this.parent=s.parent,this.id=s.id,this.width=this.height=null,this.pageIndex=s.parent.pageIndex,this.name=s.name,this.div=null,this._uiManager=s.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=s.isCentered,this._structTreeParentId=null;const{rotation:l,rawDims:{pageWidth:u,pageHeight:y,pageX:I,pageY:W}}=this.parent.viewport;this.rotation=l,this.pageRotation=(360+l-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[u,y],this.pageTranslation=[I,W];const[it,et]=this.parentDimensions;this.x=s.x/it,this.y=s.y/et,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,M.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(s){const l=new ft({id:s.parent.getNextId(),parent:s.parent,uiManager:s._uiManager});l.annotationElementId=s.annotationElementId,l.deleted=!0,l._uiManager.addToAnnotationStorage(l)}static initialize(s,l=null){if(i._l10nPromise||(i._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(y=>[y,s.get(y)]))),l!=null&&l.strings)for(const y of l.strings)i._l10nPromise.set(y,s.get(y));if(i._borderLineWidth!==-1)return;const u=getComputedStyle(document.documentElement);i._borderLineWidth=parseFloat(u.getPropertyValue("--outline-width"))||0}static updateDefaultParams(s,l){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(s){return!1}static paste(s,l){(0,M.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return t(this,A)}set _isDraggable(s){var l;st(this,A,s),(l=this.div)==null||l.classList.toggle("draggable",s)}center(){const[s,l]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*l/(s*2),this.y+=this.width*s/(l*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*l/(s*2),this.y-=this.width*s/(l*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(s){this._uiManager.addCommands(s)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,r)}setParent(s){s!==null&&(this.pageIndex=s.pageIndex,this.pageDimensions=s.pageDimensions),this.parent=s}focusin(s){!this._focusEventsAllowed||(t(this,_)?st(this,_,!1):this.parent.setSelected(this))}focusout(s){var u;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const l=s.relatedTarget;l!=null&&l.closest(`#${this.id}`)||(s.preventDefault(),(u=this.parent)!=null&&u.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(s,l,u,y){const[I,W]=this.parentDimensions;[u,y]=this.screenToPageTranslation(u,y),this.x=(s+u)/I,this.y=(l+y)/W,this.fixAndSetPosition()}translate(s,l){q(this,o,He).call(this,this.parentDimensions,s,l)}translateInPage(s,l){q(this,o,He).call(this,this.pageDimensions,s,l),this.div.scrollIntoView({block:"nearest"})}drag(s,l){const[u,y]=this.parentDimensions;if(this.x+=s/u,this.y+=l/y,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:ot,y:pt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,ot,pt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:I,y:W}=this;const[it,et]=q(this,g,We).call(this);I+=it,W+=et,this.div.style.left=`${(100*I).toFixed(2)}%`,this.div.style.top=`${(100*W).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[s,l]=this.pageDimensions;let{x:u,y,width:I,height:W}=this;switch(I*=s,W*=l,u*=s,y*=l,this.rotation){case 0:u=Math.max(0,Math.min(s-I,u)),y=Math.max(0,Math.min(l-W,y));break;case 90:u=Math.max(0,Math.min(s-W,u)),y=Math.min(l,Math.max(I,y));break;case 180:u=Math.min(s,Math.max(I,u)),y=Math.min(l,Math.max(W,y));break;case 270:u=Math.min(s,Math.max(W,u)),y=Math.max(0,Math.min(l-I,y));break}this.x=u/=s,this.y=y/=l;const[it,et]=q(this,g,We).call(this);u+=it,y+=et;const{style:ot}=this.div;ot.left=`${(100*u).toFixed(2)}%`,ot.top=`${(100*y).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(s,l){var u;return q(u=i,k,ze).call(u,s,l,this.parentRotation)}pageTranslationToScreen(s,l){var u;return q(u=i,k,ze).call(u,s,l,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:s,pageDimensions:[l,u]}=this,y=l*s,I=u*s;return M.FeatureTest.isCSSRoundSupported?[Math.round(y),Math.round(I)]:[y,I]}setDims(s,l){var I;const[u,y]=this.parentDimensions;this.div.style.width=`${(100*s/u).toFixed(2)}%`,t(this,R)||(this.div.style.height=`${(100*l/y).toFixed(2)}%`),(I=t(this,m))==null||I.classList.toggle("small",s<i.SMALL_EDITOR_SIZE||l<i.SMALL_EDITOR_SIZE)}fixDims(){const{style:s}=this.div,{height:l,width:u}=s,y=u.endsWith("%"),I=!t(this,R)&&l.endsWith("%");if(y&&I)return;const[W,it]=this.parentDimensions;y||(s.width=`${(100*parseFloat(u)/W).toFixed(2)}%`),!t(this,R)&&!I&&(s.height=`${(100*parseFloat(l)/it).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(t(this,m))return;const s=st(this,m,document.createElement("button"));s.className="altText";const l=await i._l10nPromise.get("editor_alt_text_button_label");s.textContent=l,s.setAttribute("aria-label",l),s.tabIndex="0",s.addEventListener("contextmenu",nt.noContextMenu),s.addEventListener("pointerdown",u=>u.stopPropagation()),s.addEventListener("click",u=>{u.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),s.addEventListener("keydown",u=>{u.target===s&&u.key==="Enter"&&(u.preventDefault(),this._uiManager.editAltText(this))}),q(this,_t,Ge).call(this),this.div.append(s),i.SMALL_EDITOR_SIZE||(i.SMALL_EDITOR_SIZE=Math.min(128,Math.round(s.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:t(this,H),decorative:t(this,F)}}set altTextData({altText:s,decorative:l}){t(this,H)===s&&t(this,F)===l||(st(this,H,s),st(this,F,l),q(this,_t,Ge).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,S)),this.div.addEventListener("focusout",t(this,p));const[s,l]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*l/s).toFixed(2)}%`,this.div.style.maxHeight=`${(100*s/l).toFixed(2)}%`);const[u,y]=this.getInitialTranslation();return this.translate(u,y),(0,d.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(s){const{isMac:l}=M.FeatureTest.platform;if(s.button!==0||s.ctrlKey&&l){s.preventDefault();return}st(this,_,!0),q(this,Mt,Ci).call(this,s)}moveInDOM(){var s;(s=this.parent)==null||s.moveEditorInDOM(this)}_setParentAndPosition(s,l,u){s.changeParent(this),this.x=l,this.y=u,this.fixAndSetPosition()}getRect(s,l){const u=this.parentScale,[y,I]=this.pageDimensions,[W,it]=this.pageTranslation,et=s/u,ot=l/u,pt=this.x*y,Et=this.y*I,gt=this.width*y,Ft=this.height*I;switch(this.rotation){case 0:return[pt+et+W,I-Et-ot-Ft+it,pt+et+gt+W,I-Et-ot+it];case 90:return[pt+ot+W,I-Et+et+it,pt+ot+Ft+W,I-Et+et+gt+it];case 180:return[pt-et-gt+W,I-Et+ot+it,pt-et+W,I-Et+ot+Ft+it];case 270:return[pt-ot-Ft+W,I-Et-et-gt+it,pt-ot+W,I-Et-et+it];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(s,l){const[u,y,I,W]=s,it=I-u,et=W-y;switch(this.rotation){case 0:return[u,l-W,it,et];case 90:return[u,l-y,et,it];case 180:return[I,l-y,it,et];case 270:return[I,l-W,et,it];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){st(this,x,!0)}disableEditMode(){st(this,x,!1)}isInEditMode(){return t(this,x)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var s,l;(s=this.div)==null||s.addEventListener("focusin",t(this,S)),(l=this.div)==null||l.addEventListener("focusout",t(this,p))}serialize(s=!1,l=null){(0,M.unreachable)("An editor must be serializable")}static deserialize(s,l,u){const y=new this.prototype.constructor({parent:l,id:l.getNextId(),uiManager:u});y.rotation=s.rotation;const[I,W]=y.pageDimensions,[it,et,ot,pt]=y.getRectInCurrentCoords(s.rect,W);return y.x=it/I,y.y=et/W,y.width=ot/I,y.height=pt/W,y}remove(){var s;this.div.removeEventListener("focusin",t(this,S)),this.div.removeEventListener("focusout",t(this,p)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(s=t(this,m))==null||s.remove(),st(this,m,null),st(this,U,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(q(this,C,Si).call(this),t(this,E).classList.remove("hidden"))}select(){var s;this.makeResizable(),(s=this.div)==null||s.classList.add("selectedEditor")}unselect(){var s,l,u;(s=t(this,E))==null||s.classList.add("hidden"),(l=this.div)==null||l.classList.remove("selectedEditor"),(u=this.div)!=null&&u.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(s,l){}disableEditing(){t(this,m)&&(t(this,m).hidden=!0)}enableEditing(){t(this,m)&&(t(this,m).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,T)}set isEditing(s){st(this,T,s),this.parent&&(s?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(s,l){st(this,R,!0);const u=s/l,{style:y}=this.div;y.aspectRatio=u,y.height="auto"}static get MIN_SIZE(){return 16}};let $=i;H=new WeakMap,F=new WeakMap,m=new WeakMap,U=new WeakMap,j=new WeakMap,R=new WeakMap,E=new WeakMap,S=new WeakMap,p=new WeakMap,_=new WeakMap,T=new WeakMap,x=new WeakMap,A=new WeakMap,r=new WeakMap,o=new WeakSet,He=function([s,l],u,y){[u,y]=this.screenToPageTranslation(u,y),this.x+=u/s,this.y+=y/l,this.fixAndSetPosition()},g=new WeakSet,We=function(){const[s,l]=this.parentDimensions,{_borderLineWidth:u}=i,y=u/s,I=u/l;switch(this.rotation){case 90:return[-y,I];case 180:return[y,I];case 270:return[y,-I];default:return[-y,-I]}},k=new WeakSet,ze=function(s,l,u){switch(u){case 90:return[l,-s];case 180:return[-s,-l];case 270:return[-l,s];default:return[s,l]}},z=new WeakSet,Ve=function(s){switch(s){case 90:{const[l,u]=this.pageDimensions;return[0,-l/u,u/l,0]}case 180:return[-1,0,0,-1];case 270:{const[l,u]=this.pageDimensions;return[0,l/u,-u/l,0]}default:return[1,0,0,1]}},C=new WeakSet,Si=function(){if(t(this,E))return;st(this,E,document.createElement("div")),t(this,E).classList.add("resizers");const s=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||s.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const l of s){const u=document.createElement("div");t(this,E).append(u),u.classList.add("resizer",l),u.addEventListener("pointerdown",q(this,rt,Ei).bind(this,l)),u.addEventListener("contextmenu",nt.noContextMenu)}this.div.prepend(t(this,E))},rt=new WeakSet,Ei=function(s,l){l.preventDefault();const{isMac:u}=M.FeatureTest.platform;if(l.button!==0||l.ctrlKey&&u)return;const y=q(this,V,wi).bind(this,s),I=this._isDraggable;this._isDraggable=!1;const W={passive:!0,capture:!0};window.addEventListener("pointermove",y,W);const it=this.x,et=this.y,ot=this.width,pt=this.height,Et=this.parent.div.style.cursor,gt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(l.target).cursor;const Ft=()=>{this._isDraggable=I,window.removeEventListener("pointerup",Ft),window.removeEventListener("blur",Ft),window.removeEventListener("pointermove",y,W),this.parent.div.style.cursor=Et,this.div.style.cursor=gt;const Wt=this.x,wt=this.y,Lt=this.width,bt=this.height;Wt===it&&wt===et&&Lt===ot&&bt===pt||this.addCommands({cmd:()=>{this.width=Lt,this.height=bt,this.x=Wt,this.y=wt;const[D,N]=this.parentDimensions;this.setDims(D*Lt,N*bt),this.fixAndSetPosition()},undo:()=>{this.width=ot,this.height=pt,this.x=it,this.y=et;const[D,N]=this.parentDimensions;this.setDims(D*ot,N*pt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Ft),window.addEventListener("blur",Ft)},V=new WeakSet,wi=function(s,l){const[u,y]=this.parentDimensions,I=this.x,W=this.y,it=this.width,et=this.height,ot=i.MIN_SIZE/u,pt=i.MIN_SIZE/y,Et=vt=>Math.round(vt*1e4)/1e4,gt=q(this,z,Ve).call(this,this.rotation),Ft=(vt,Ct)=>[gt[0]*vt+gt[2]*Ct,gt[1]*vt+gt[3]*Ct],Wt=q(this,z,Ve).call(this,360-this.rotation),wt=(vt,Ct)=>[Wt[0]*vt+Wt[2]*Ct,Wt[1]*vt+Wt[3]*Ct];let Lt,bt,D=!1,N=!1;switch(s){case"topLeft":D=!0,Lt=(vt,Ct)=>[0,0],bt=(vt,Ct)=>[vt,Ct];break;case"topMiddle":Lt=(vt,Ct)=>[vt/2,0],bt=(vt,Ct)=>[vt/2,Ct];break;case"topRight":D=!0,Lt=(vt,Ct)=>[vt,0],bt=(vt,Ct)=>[0,Ct];break;case"middleRight":N=!0,Lt=(vt,Ct)=>[vt,Ct/2],bt=(vt,Ct)=>[0,Ct/2];break;case"bottomRight":D=!0,Lt=(vt,Ct)=>[vt,Ct],bt=(vt,Ct)=>[0,0];break;case"bottomMiddle":Lt=(vt,Ct)=>[vt/2,Ct],bt=(vt,Ct)=>[vt/2,0];break;case"bottomLeft":D=!0,Lt=(vt,Ct)=>[0,Ct],bt=(vt,Ct)=>[vt,0];break;case"middleLeft":N=!0,Lt=(vt,Ct)=>[0,Ct/2],bt=(vt,Ct)=>[vt,Ct/2];break}const J=Lt(it,et),mt=bt(it,et);let At=Ft(...mt);const Bt=Et(I+At[0]),zt=Et(W+At[1]);let Nt=1,Vt=1,[$t,Xt]=this.screenToPageTranslation(l.movementX,l.movementY);if([$t,Xt]=wt($t/u,Xt/y),D){const vt=Math.hypot(it,et);Nt=Vt=Math.max(Math.min(Math.hypot(mt[0]-J[0]-$t,mt[1]-J[1]-Xt)/vt,1/it,1/et),ot/it,pt/et)}else N?Nt=Math.max(ot,Math.min(1,Math.abs(mt[0]-J[0]-$t)))/it:Vt=Math.max(pt,Math.min(1,Math.abs(mt[1]-J[1]-Xt)))/et;const qt=Et(it*Nt),ht=Et(et*Vt);At=Ft(...bt(qt,ht));const tt=Bt-At[0],Y=zt-At[1];this.width=qt,this.height=ht,this.x=tt,this.y=Y,this.setDims(u*qt,y*ht),this.fixAndSetPosition()},_t=new WeakSet,Ge=async function(){var u;const s=t(this,m);if(!s)return;if(!t(this,H)&&!t(this,F)){s.classList.remove("done"),(u=t(this,U))==null||u.remove();return}i._l10nPromise.get("editor_alt_text_edit_button_label").then(y=>{s.setAttribute("aria-label",y)});let l=t(this,U);if(!l){st(this,U,l=document.createElement("span")),l.className="tooltip",l.setAttribute("role","tooltip");const y=l.id=`alt-text-tooltip-${this.id}`;s.setAttribute("aria-describedby",y);const I=100;s.addEventListener("mouseenter",()=>{st(this,j,setTimeout(()=>{st(this,j,null),t(this,U).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},I))}),s.addEventListener("mouseleave",()=>{var W;clearTimeout(t(this,j)),st(this,j,null),(W=t(this,U))==null||W.classList.remove("show")})}s.classList.add("done"),l.innerText=t(this,F)?await i._l10nPromise.get("editor_alt_text_decorative_tooltip"):t(this,H),l.parentNode||s.append(l)},Mt=new WeakSet,Ci=function(s){if(!this._isDraggable)return;const l=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let u,y;l&&(u={passive:!0,capture:!0},y=W=>{const[it,et]=this.screenToPageTranslation(W.movementX,W.movementY);this._uiManager.dragSelectedEditors(it,et)},window.addEventListener("pointermove",y,u));const I=()=>{if(window.removeEventListener("pointerup",I),window.removeEventListener("blur",I),l&&window.removeEventListener("pointermove",y,u),st(this,_,!1),!this._uiManager.endDragSession()){const{isMac:W}=M.FeatureTest.platform;s.ctrlKey&&!W||s.shiftKey||s.metaKey&&W?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",I),window.addEventListener("blur",I)},B($,k),se($,"_borderLineWidth",-1),se($,"_colorManager",new d.ColorManager),se($,"_zIndex",1),se($,"SMALL_EDITOR_SIZE",0),f.AnnotationEditor=$;class ft extends ${constructor(s){super(s),this.annotationElementId=s.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(lt,f,ct)=>{var R,E,S,p,_,$e,A,r,o,P,g,Ti,v,z,X,C,K,rt,dt,V,ut,_t,xt,Mt,w,i,n,s,l,u,y,I,W,it,et,ot,pt,Et,gt,Ft,Wt,wt,Lt,bt,D,N,J,xi,At,Xe,zt,qe,Vt,xe,Xt,Ye,ht,Ke,Y,oe,Ct,_e,ee,Pi,Tt,ki,Pt,Je,jt,Ae,St,Qe;Object.defineProperty(f,"__esModule",{value:!0}),f.KeyboardManager=f.CommandManager=f.ColorManager=f.AnnotationEditorUIManager=void 0,f.bindEvents=nt,f.opacityToHex=$;var d=ct(1),M=ct(6);function nt(L,e,b){for(const O of b)e.addEventListener(O,L[O].bind(L))}function $(L){return Math.round(Math.min(255,Math.max(1,255*L))).toString(16).padStart(2,"0")}class ft{constructor(){B(this,R,0)}getId(){return`${d.AnnotationEditorPrefix}${be(this,R)._++}`}}R=new WeakMap;const x=class{constructor(){B(this,_);B(this,E,(0,d.getUuid)());B(this,S,0);B(this,p,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',O=new OffscreenCanvas(1,3).getContext("2d"),G=new Image;G.src=e;const Q=G.decode().then(()=>(O.drawImage(G,0,0,1,1,0,0,1,3),new Uint32Array(O.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,d.shadow)(this,"_isSVGFittingCanvas",Q)}async getFromFile(e){const{lastModified:b,name:O,size:G,type:Q}=e;return q(this,_,$e).call(this,`${b}_${O}_${G}_${Q}`,e)}async getFromUrl(e){return q(this,_,$e).call(this,e,e)}async getFromId(e){t(this,p)||st(this,p,new Map);const b=t(this,p).get(e);return b?b.bitmap?(b.refCounter+=1,b):b.file?this.getFromFile(b.file):this.getFromUrl(b.url):null}getSvgUrl(e){const b=t(this,p).get(e);return b!=null&&b.isSvg?b.svgUrl:null}deleteId(e){t(this,p)||st(this,p,new Map);const b=t(this,p).get(e);!b||(b.refCounter-=1,b.refCounter===0&&(b.bitmap=null))}isValidId(e){return e.startsWith(`image_${t(this,E)}_`)}};let H=x;E=new WeakMap,S=new WeakMap,p=new WeakMap,_=new WeakSet,$e=async function(e,b){t(this,p)||st(this,p,new Map);let O=t(this,p).get(e);if(O===null)return null;if(O!=null&&O.bitmap)return O.refCounter+=1,O;try{O||(O={bitmap:null,id:`image_${t(this,E)}_${be(this,S)._++}`,refCounter:0,isSvg:!1});let G;if(typeof b=="string"){O.url=b;const Q=await fetch(b);if(!Q.ok)throw new Error(Q.statusText);G=await Q.blob()}else G=O.file=b;if(G.type==="image/svg+xml"){const Q=x._isSVGFittingCanvas,at=new FileReader,yt=new Image,kt=new Promise((Rt,Yt)=>{yt.onload=()=>{O.bitmap=yt,O.isSvg=!0,Rt()},at.onload=async()=>{const Dt=O.svgUrl=at.result;yt.src=await Q?`${Dt}#svgView(preserveAspectRatio(none))`:Dt},yt.onerror=at.onerror=Yt});at.readAsDataURL(G),await kt}else O.bitmap=await createImageBitmap(G);O.refCounter=1}catch(G){console.error(G),O=null}return t(this,p).set(e,O),O&&t(this,p).set(O.id,O),O};class F{constructor(e=128){B(this,A,[]);B(this,r,!1);B(this,o,void 0);B(this,P,-1);st(this,o,e)}add({cmd:e,undo:b,mustExec:O,type:G=NaN,overwriteIfSameType:Q=!1,keepUndo:at=!1}){if(O&&e(),t(this,r))return;const yt={cmd:e,undo:b,type:G};if(t(this,P)===-1){t(this,A).length>0&&(t(this,A).length=0),st(this,P,0),t(this,A).push(yt);return}if(Q&&t(this,A)[t(this,P)].type===G){at&&(yt.undo=t(this,A)[t(this,P)].undo),t(this,A)[t(this,P)]=yt;return}const kt=t(this,P)+1;kt===t(this,o)?t(this,A).splice(0,1):(st(this,P,kt),kt<t(this,A).length&&t(this,A).splice(kt)),t(this,A).push(yt)}undo(){t(this,P)!==-1&&(st(this,r,!0),t(this,A)[t(this,P)].undo(),st(this,r,!1),st(this,P,t(this,P)-1))}redo(){t(this,P)<t(this,A).length-1&&(st(this,P,t(this,P)+1),st(this,r,!0),t(this,A)[t(this,P)].cmd(),st(this,r,!1))}hasSomethingToUndo(){return t(this,P)!==-1}hasSomethingToRedo(){return t(this,P)<t(this,A).length-1}destroy(){st(this,A,null)}}A=new WeakMap,r=new WeakMap,o=new WeakMap,P=new WeakMap,f.CommandManager=F;class m{constructor(e){B(this,g);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:b}=d.FeatureTest.platform;for(const[O,G,Q={}]of e)for(const at of O){const yt=at.startsWith("mac+");b&&yt?(this.callbacks.set(at.slice(4),{callback:G,options:Q}),this.allKeys.add(at.split("+").at(-1))):!b&&!yt&&(this.callbacks.set(at,{callback:G,options:Q}),this.allKeys.add(at.split("+").at(-1)))}}exec(e,b){if(!this.allKeys.has(b.key))return;const O=this.callbacks.get(q(this,g,Ti).call(this,b));if(!O)return;const{callback:G,options:{bubbles:Q=!1,args:at=[],checker:yt=null}}=O;yt&&!yt(e,b)||(G.bind(e,...at)(),Q||(b.stopPropagation(),b.preventDefault()))}}g=new WeakSet,Ti=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const b=this.buffer.join("+");return this.buffer.length=0,b},f.KeyboardManager=m;const k=class{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,M.getColorValues)(e),(0,d.shadow)(this,"_colors",e)}convert(e){const b=(0,M.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return b;for(const[O,G]of this._colors)if(G.every((Q,at)=>Q===b[at]))return k._colorsMapping.get(O);return b}getHexCode(e){const b=this._colors.get(e);return b?d.Util.makeHexColor(...b):e}};let U=k;se(U,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),f.ColorManager=U;const Ht=class{constructor(e,b,O,G,Q,at){B(this,J);B(this,At);B(this,zt);B(this,Vt);B(this,Xt);B(this,ht);B(this,Y);B(this,Ct);B(this,ee);B(this,Tt);B(this,Pt);B(this,jt);B(this,St);B(this,v,null);B(this,z,new Map);B(this,X,new Map);B(this,C,null);B(this,K,null);B(this,rt,new F);B(this,dt,0);B(this,V,new Set);B(this,ut,null);B(this,_t,null);B(this,xt,new Set);B(this,Mt,null);B(this,w,new ft);B(this,i,!1);B(this,n,!1);B(this,s,null);B(this,l,d.AnnotationEditorType.NONE);B(this,u,new Set);B(this,y,null);B(this,I,this.blur.bind(this));B(this,W,this.focus.bind(this));B(this,it,this.copy.bind(this));B(this,et,this.cut.bind(this));B(this,ot,this.paste.bind(this));B(this,pt,this.keydown.bind(this));B(this,Et,this.onEditingAction.bind(this));B(this,gt,this.onPageChanging.bind(this));B(this,Ft,this.onScaleChanging.bind(this));B(this,Wt,this.onRotationChanging.bind(this));B(this,wt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});B(this,Lt,[0,0]);B(this,bt,null);B(this,D,null);B(this,N,null);st(this,D,e),st(this,N,b),st(this,C,O),this._eventBus=G,this._eventBus._on("editingaction",t(this,Et)),this._eventBus._on("pagechanging",t(this,gt)),this._eventBus._on("scalechanging",t(this,Ft)),this._eventBus._on("rotationchanging",t(this,Wt)),st(this,K,Q.annotationStorage),st(this,Mt,Q.filterFactory),st(this,y,at),this.viewParameters={realScale:M.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const e=Ht.prototype,b=Q=>{const{activeElement:at}=document;return at&&t(Q,D).contains(at)&&Q.hasSomethingToControl()},O=this.TRANSLATE_SMALL,G=this.TRANSLATE_BIG;return(0,d.shadow)(this,"_keyboardManager",new m([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-O,0],checker:b}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-G,0],checker:b}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[O,0],checker:b}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[G,0],checker:b}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-O],checker:b}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-G],checker:b}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,O],checker:b}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,G],checker:b}]]))}destroy(){q(this,Vt,xe).call(this),q(this,At,Xe).call(this),this._eventBus._off("editingaction",t(this,Et)),this._eventBus._off("pagechanging",t(this,gt)),this._eventBus._off("scalechanging",t(this,Ft)),this._eventBus._off("rotationchanging",t(this,Wt));for(const e of t(this,X).values())e.destroy();t(this,X).clear(),t(this,z).clear(),t(this,xt).clear(),st(this,v,null),t(this,u).clear(),t(this,rt).destroy(),t(this,C).destroy()}get hcmFilter(){return(0,d.shadow)(this,"hcmFilter",t(this,y)?t(this,Mt).addHCMFilter(t(this,y).foreground,t(this,y).background):"none")}get direction(){return(0,d.shadow)(this,"direction",getComputedStyle(t(this,D)).direction)}editAltText(e){var b;(b=t(this,C))==null||b.editAltText(this,e)}onPageChanging({pageNumber:e}){st(this,dt,e-1)}focusMainContainer(){t(this,D).focus()}findParent(e,b){for(const O of t(this,X).values()){const{x:G,y:Q,width:at,height:yt}=O.div.getBoundingClientRect();if(e>=G&&e<=G+at&&b>=Q&&b<=Q+yt)return O}return null}disableUserSelect(e=!1){t(this,N).classList.toggle("noUserSelect",e)}addShouldRescale(e){t(this,xt).add(e)}removeShouldRescale(e){t(this,xt).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*M.PixelsPerInch.PDF_TO_CSS_UNITS;for(const b of t(this,xt))b.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(e){!e.isEmpty()&&t(this,K)&&!t(this,K).has(e.id)&&t(this,K).setValue(e.id,e)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const b of t(this,u))if(b.div.contains(e)){st(this,s,[b,e]),b._focusEventsAllowed=!1;break}}focus(){if(!t(this,s))return;const[e,b]=t(this,s);st(this,s,null),b.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),b.focus()}addEditListeners(){q(this,zt,qe).call(this),q(this,Xt,Ye).call(this)}removeEditListeners(){q(this,Vt,xe).call(this),q(this,ht,Ke).call(this)}copy(e){var O;if(e.preventDefault(),(O=t(this,v))==null||O.commitOrRemove(),!this.hasSelection)return;const b=[];for(const G of t(this,u)){const Q=G.serialize(!0);Q&&b.push(Q)}b.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(b))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:b}=e;for(const Q of b.items)for(const at of t(this,_t))if(at.isHandlingMimeForPasting(Q.type)){at.paste(Q,this.currentLayer);return}let O=b.getData("application/pdfjs");if(!O)return;try{O=JSON.parse(O)}catch(Q){(0,d.warn)(`paste: "${Q.message}".`);return}if(!Array.isArray(O))return;this.unselectAll();const G=this.currentLayer;try{const Q=[];for(const kt of O){const Rt=G.deserialize(kt);if(!Rt)return;Q.push(Rt)}const at=()=>{for(const kt of Q)q(this,Pt,Je).call(this,kt);q(this,St,Qe).call(this,Q)},yt=()=>{for(const kt of Q)kt.remove()};this.addCommands({cmd:at,undo:yt,mustExec:!0})}catch(Q){(0,d.warn)(`paste: "${Q.message}".`)}}keydown(e){var b;(b=this.getActive())!=null&&b.shouldGetKeyboardEvents()||Ht._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}setEditingState(e){e?(q(this,J,xi).call(this),q(this,zt,qe).call(this),q(this,Xt,Ye).call(this),q(this,Y,oe).call(this,{isEditing:t(this,l)!==d.AnnotationEditorType.NONE,isEmpty:q(this,jt,Ae).call(this),hasSomethingToUndo:t(this,rt).hasSomethingToUndo(),hasSomethingToRedo:t(this,rt).hasSomethingToRedo(),hasSelectedEditor:!1})):(q(this,At,Xe).call(this),q(this,Vt,xe).call(this),q(this,ht,Ke).call(this),q(this,Y,oe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!t(this,_t)){st(this,_t,e);for(const b of t(this,_t))q(this,Ct,_e).call(this,b.defaultPropertiesToUpdate)}}getId(){return t(this,w).getId()}get currentLayer(){return t(this,X).get(t(this,dt))}getLayer(e){return t(this,X).get(e)}get currentPageIndex(){return t(this,dt)}addLayer(e){t(this,X).set(e.pageIndex,e),t(this,i)?e.enable():e.disable()}removeLayer(e){t(this,X).delete(e.pageIndex)}updateMode(e,b=null){if(t(this,l)!==e){if(st(this,l,e),e===d.AnnotationEditorType.NONE){this.setEditingState(!1),q(this,Tt,ki).call(this);return}this.setEditingState(!0),q(this,ee,Pi).call(this),this.unselectAll();for(const O of t(this,X).values())O.updateMode(e);if(!!b){for(const O of t(this,z).values())if(O.annotationElementId===b){this.setSelected(O),O.enterInEditMode();break}}}}updateToolbar(e){e!==t(this,l)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,b){if(!!t(this,_t)){if(e===d.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(e);return}for(const O of t(this,u))O.updateParams(e,b);for(const O of t(this,_t))O.updateDefaultParams(e,b)}}enableWaiting(e=!1){if(t(this,n)!==e){st(this,n,e);for(const b of t(this,X).values())e?b.disableClick():b.enableClick(),b.div.classList.toggle("waiting",e)}}getEditors(e){const b=[];for(const O of t(this,z).values())O.pageIndex===e&&b.push(O);return b}getEditor(e){return t(this,z).get(e)}addEditor(e){t(this,z).set(e.id,e)}removeEditor(e){var b;t(this,z).delete(e.id),this.unselect(e),(!e.annotationElementId||!t(this,V).has(e.annotationElementId))&&((b=t(this,K))==null||b.remove(e.id))}addDeletedAnnotationElement(e){t(this,V).add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return t(this,V).has(e)}removeDeletedAnnotationElement(e){t(this,V).delete(e.annotationElementId),e.deleted=!1}setActiveEditor(e){t(this,v)!==e&&(st(this,v,e),e&&q(this,Ct,_e).call(this,e.propertiesToUpdate))}toggleSelected(e){if(t(this,u).has(e)){t(this,u).delete(e),e.unselect(),q(this,Y,oe).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,u).add(e),e.select(),q(this,Ct,_e).call(this,e.propertiesToUpdate),q(this,Y,oe).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const b of t(this,u))b!==e&&b.unselect();t(this,u).clear(),t(this,u).add(e),e.select(),q(this,Ct,_e).call(this,e.propertiesToUpdate),q(this,Y,oe).call(this,{hasSelectedEditor:!0})}isSelected(e){return t(this,u).has(e)}unselect(e){e.unselect(),t(this,u).delete(e),q(this,Y,oe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,u).size!==0}undo(){t(this,rt).undo(),q(this,Y,oe).call(this,{hasSomethingToUndo:t(this,rt).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:q(this,jt,Ae).call(this)})}redo(){t(this,rt).redo(),q(this,Y,oe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,rt).hasSomethingToRedo(),isEmpty:q(this,jt,Ae).call(this)})}addCommands(e){t(this,rt).add(e),q(this,Y,oe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:q(this,jt,Ae).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...t(this,u)],b=()=>{for(const G of e)G.remove()},O=()=>{for(const G of e)q(this,Pt,Je).call(this,G)};this.addCommands({cmd:b,undo:O,mustExec:!0})}commitOrRemove(){var e;(e=t(this,v))==null||e.commitOrRemove()}hasSomethingToControl(){return t(this,v)||this.hasSelection}selectAll(){for(const e of t(this,u))e.commit();q(this,St,Qe).call(this,t(this,z).values())}unselectAll(){if(t(this,v)){t(this,v).commitOrRemove();return}if(!!this.hasSelection){for(const e of t(this,u))e.unselect();t(this,u).clear(),q(this,Y,oe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,b,O=!1){if(O||this.commitOrRemove(),!this.hasSelection)return;t(this,Lt)[0]+=e,t(this,Lt)[1]+=b;const[G,Q]=t(this,Lt),at=[...t(this,u)],yt=1e3;t(this,bt)&&clearTimeout(t(this,bt)),st(this,bt,setTimeout(()=>{st(this,bt,null),t(this,Lt)[0]=t(this,Lt)[1]=0,this.addCommands({cmd:()=>{for(const kt of at)t(this,z).has(kt.id)&&kt.translateInPage(G,Q)},undo:()=>{for(const kt of at)t(this,z).has(kt.id)&&kt.translateInPage(-G,-Q)},mustExec:!1})},yt));for(const kt of at)kt.translateInPage(e,b)}setUpDragSession(){if(!!this.hasSelection){this.disableUserSelect(!0),st(this,ut,new Map);for(const e of t(this,u))t(this,ut).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!t(this,ut))return!1;this.disableUserSelect(!1);const e=t(this,ut);st(this,ut,null);let b=!1;for(const[{x:G,y:Q,pageIndex:at},yt]of e)yt.newX=G,yt.newY=Q,yt.newPageIndex=at,b||(b=G!==yt.savedX||Q!==yt.savedY||at!==yt.savedPageIndex);if(!b)return!1;const O=(G,Q,at,yt)=>{if(t(this,z).has(G.id)){const kt=t(this,X).get(yt);kt?G._setParentAndPosition(kt,Q,at):(G.pageIndex=yt,G.x=Q,G.y=at)}};return this.addCommands({cmd:()=>{for(const[G,{newX:Q,newY:at,newPageIndex:yt}]of e)O(G,Q,at,yt)},undo:()=>{for(const[G,{savedX:Q,savedY:at,savedPageIndex:yt}]of e)O(G,Q,at,yt)},mustExec:!0}),!0}dragSelectedEditors(e,b){if(!!t(this,ut))for(const O of t(this,ut).keys())O.drag(e,b)}rebuild(e){if(e.parent===null){const b=this.getLayer(e.pageIndex);b?(b.changeParent(e),b.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return t(this,v)===e}getActive(){return t(this,v)}getMode(){return t(this,l)}get imageManager(){return(0,d.shadow)(this,"imageManager",new H)}};let j=Ht;v=new WeakMap,z=new WeakMap,X=new WeakMap,C=new WeakMap,K=new WeakMap,rt=new WeakMap,dt=new WeakMap,V=new WeakMap,ut=new WeakMap,_t=new WeakMap,xt=new WeakMap,Mt=new WeakMap,w=new WeakMap,i=new WeakMap,n=new WeakMap,s=new WeakMap,l=new WeakMap,u=new WeakMap,y=new WeakMap,I=new WeakMap,W=new WeakMap,it=new WeakMap,et=new WeakMap,ot=new WeakMap,pt=new WeakMap,Et=new WeakMap,gt=new WeakMap,Ft=new WeakMap,Wt=new WeakMap,wt=new WeakMap,Lt=new WeakMap,bt=new WeakMap,D=new WeakMap,N=new WeakMap,J=new WeakSet,xi=function(){window.addEventListener("focus",t(this,W)),window.addEventListener("blur",t(this,I))},At=new WeakSet,Xe=function(){window.removeEventListener("focus",t(this,W)),window.removeEventListener("blur",t(this,I))},zt=new WeakSet,qe=function(){window.addEventListener("keydown",t(this,pt),{capture:!0})},Vt=new WeakSet,xe=function(){window.removeEventListener("keydown",t(this,pt),{capture:!0})},Xt=new WeakSet,Ye=function(){document.addEventListener("copy",t(this,it)),document.addEventListener("cut",t(this,et)),document.addEventListener("paste",t(this,ot))},ht=new WeakSet,Ke=function(){document.removeEventListener("copy",t(this,it)),document.removeEventListener("cut",t(this,et)),document.removeEventListener("paste",t(this,ot))},Y=new WeakSet,oe=function(e){Object.entries(e).some(([O,G])=>t(this,wt)[O]!==G)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,wt),e)})},Ct=new WeakSet,_e=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},ee=new WeakSet,Pi=function(){if(!t(this,i)){st(this,i,!0);for(const e of t(this,X).values())e.enable()}},Tt=new WeakSet,ki=function(){if(this.unselectAll(),t(this,i)){st(this,i,!1);for(const e of t(this,X).values())e.disable()}},Pt=new WeakSet,Je=function(e){const b=t(this,X).get(e.pageIndex);b?b.addOrRebuild(e):this.addEditor(e)},jt=new WeakSet,Ae=function(){if(t(this,z).size===0)return!0;if(t(this,z).size===1)for(const e of t(this,z).values())return e.isEmpty();return!1},St=new WeakSet,Qe=function(e){t(this,u).clear();for(const b of e)b.isEmpty()||(t(this,u).add(b),b.select());q(this,Y,oe).call(this,{hasSelectedEditor:!0})},se(j,"TRANSLATE_SMALL",1),se(j,"TRANSLATE_BIG",10),f.AnnotationEditorUIManager=j},(lt,f,ct)=>{var dt,V,ut,_t,xt,Mt,w,i,n,s,l,u,fe,I,pe,it,Ze,ot,Pe,Et,ke,Ft,ve,wt,ye;Object.defineProperty(f,"__esModule",{value:!0}),f.StatTimer=f.RenderingCancelledException=f.PixelsPerInch=f.PageViewport=f.PDFDateString=f.DOMStandardFontDataFactory=f.DOMSVGFactory=f.DOMFilterFactory=f.DOMCanvasFactory=f.DOMCMapReaderFactory=void 0,f.deprecated=P,f.getColorValues=z,f.getCurrentTransform=X,f.getCurrentTransformInverse=C,f.getFilenameFromUrl=_,f.getPdfFilenameFromUrl=T,f.getRGB=v,f.getXfaPageViewport=k,f.isDataScheme=S,f.isPdfFile=p,f.isValidFetchUrl=A,f.loadScript=o,f.noContextMenu=r,f.setLayerDimensions=K;var d=ct(7),M=ct(1);const nt="http://www.w3.org/2000/svg",rt=class{};let $=rt;se($,"CSS",96),se($,"PDF",72),se($,"PDF_TO_CSS_UNITS",rt.CSS/rt.PDF),f.PixelsPerInch=$;class ft extends d.BaseFilterFactory{constructor({docId:N,ownerDocument:J=globalThis.document}={}){super();B(this,u);B(this,I);B(this,it);B(this,ot);B(this,Et);B(this,Ft);B(this,wt);B(this,dt,void 0);B(this,V,void 0);B(this,ut,void 0);B(this,_t,void 0);B(this,xt,void 0);B(this,Mt,void 0);B(this,w,void 0);B(this,i,void 0);B(this,n,void 0);B(this,s,void 0);B(this,l,0);st(this,ut,N),st(this,_t,J)}addFilter(N){if(!N)return"none";let J=t(this,u,fe).get(N);if(J)return J;let mt,At,Bt,zt;if(N.length===1){const Xt=N[0],qt=new Array(256);for(let ht=0;ht<256;ht++)qt[ht]=Xt[ht]/255;zt=mt=At=Bt=qt.join(",")}else{const[Xt,qt,ht]=N,tt=new Array(256),Y=new Array(256),vt=new Array(256);for(let Ct=0;Ct<256;Ct++)tt[Ct]=Xt[Ct]/255,Y[Ct]=qt[Ct]/255,vt[Ct]=ht[Ct]/255;mt=tt.join(","),At=Y.join(","),Bt=vt.join(","),zt=`${mt}${At}${Bt}`}if(J=t(this,u,fe).get(zt),J)return t(this,u,fe).set(N,J),J;const Nt=`g_${t(this,ut)}_transfer_map_${be(this,l)._++}`,Vt=`url(#${Nt})`;t(this,u,fe).set(N,Vt),t(this,u,fe).set(zt,Vt);const $t=q(this,ot,Pe).call(this,Nt);return q(this,Ft,ve).call(this,mt,At,Bt,$t),Vt}addHCMFilter(N,J){var qt;const mt=`${N}-${J}`;if(t(this,Mt)===mt)return t(this,w);if(st(this,Mt,mt),st(this,w,"none"),(qt=t(this,xt))==null||qt.remove(),!N||!J)return t(this,w);const At=q(this,wt,ye).call(this,N);N=M.Util.makeHexColor(...At);const Bt=q(this,wt,ye).call(this,J);if(J=M.Util.makeHexColor(...Bt),t(this,I,pe).style.color="",N==="#000000"&&J==="#ffffff"||N===J)return t(this,w);const zt=new Array(256);for(let ht=0;ht<=255;ht++){const tt=ht/255;zt[ht]=tt<=.03928?tt/12.92:((tt+.055)/1.055)**2.4}const Nt=zt.join(","),Vt=`g_${t(this,ut)}_hcm_filter`,$t=st(this,i,q(this,ot,Pe).call(this,Vt));q(this,Ft,ve).call(this,Nt,Nt,Nt,$t),q(this,it,Ze).call(this,$t);const Xt=(ht,tt)=>{const Y=At[ht]/255,vt=Bt[ht]/255,Ct=new Array(tt+1);for(let ie=0;ie<=tt;ie++)Ct[ie]=Y+ie/tt*(vt-Y);return Ct.join(",")};return q(this,Ft,ve).call(this,Xt(0,5),Xt(1,5),Xt(2,5),$t),st(this,w,`url(#${Vt})`),t(this,w)}addHighlightHCMFilter(N,J,mt,At){var vt;const Bt=`${N}-${J}-${mt}-${At}`;if(t(this,n)===Bt)return t(this,s);if(st(this,n,Bt),st(this,s,"none"),(vt=t(this,i))==null||vt.remove(),!N||!J)return t(this,s);const[zt,Nt]=[N,J].map(q(this,wt,ye).bind(this));let Vt=Math.round(.2126*zt[0]+.7152*zt[1]+.0722*zt[2]),$t=Math.round(.2126*Nt[0]+.7152*Nt[1]+.0722*Nt[2]),[Xt,qt]=[mt,At].map(q(this,wt,ye).bind(this));$t<Vt&&([Vt,$t,Xt,qt]=[$t,Vt,qt,Xt]),t(this,I,pe).style.color="";const ht=(Ct,ie,ee)=>{const Z=new Array(256),Tt=($t-Vt)/ee,Ot=Ct/255,Pt=(ie-Ct)/(255*ee);let Ut=0;for(let jt=0;jt<=ee;jt++){const Zt=Math.round(Vt+jt*Tt),St=Ot+jt*Pt;for(let Jt=Ut;Jt<=Zt;Jt++)Z[Jt]=St;Ut=Zt+1}for(let jt=Ut;jt<256;jt++)Z[jt]=Z[Ut-1];return Z.join(",")},tt=`g_${t(this,ut)}_hcm_highlight_filter`,Y=st(this,i,q(this,ot,Pe).call(this,tt));return q(this,it,Ze).call(this,Y),q(this,Ft,ve).call(this,ht(Xt[0],qt[0],5),ht(Xt[1],qt[1],5),ht(Xt[2],qt[2],5),Y),st(this,s,`url(#${tt})`),t(this,s)}destroy(N=!1){N&&(t(this,w)||t(this,s))||(t(this,V)&&(t(this,V).parentNode.parentNode.remove(),st(this,V,null)),t(this,dt)&&(t(this,dt).clear(),st(this,dt,null)),st(this,l,0))}}dt=new WeakMap,V=new WeakMap,ut=new WeakMap,_t=new WeakMap,xt=new WeakMap,Mt=new WeakMap,w=new WeakMap,i=new WeakMap,n=new WeakMap,s=new WeakMap,l=new WeakMap,u=new WeakSet,fe=function(){return t(this,dt)||st(this,dt,new Map)},I=new WeakSet,pe=function(){if(!t(this,V)){const N=t(this,_t).createElement("div"),{style:J}=N;J.visibility="hidden",J.contain="strict",J.width=J.height=0,J.position="absolute",J.top=J.left=0,J.zIndex=-1;const mt=t(this,_t).createElementNS(nt,"svg");mt.setAttribute("width",0),mt.setAttribute("height",0),st(this,V,t(this,_t).createElementNS(nt,"defs")),N.append(mt),mt.append(t(this,V)),t(this,_t).body.append(N)}return t(this,V)},it=new WeakSet,Ze=function(N){const J=t(this,_t).createElementNS(nt,"feColorMatrix");J.setAttribute("type","matrix"),J.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),N.append(J)},ot=new WeakSet,Pe=function(N){const J=t(this,_t).createElementNS(nt,"filter");return J.setAttribute("color-interpolation-filters","sRGB"),J.setAttribute("id",N),t(this,I,pe).append(J),J},Et=new WeakSet,ke=function(N,J,mt){const At=t(this,_t).createElementNS(nt,J);At.setAttribute("type","discrete"),At.setAttribute("tableValues",mt),N.append(At)},Ft=new WeakSet,ve=function(N,J,mt,At){const Bt=t(this,_t).createElementNS(nt,"feComponentTransfer");At.append(Bt),q(this,Et,ke).call(this,Bt,"feFuncR",N),q(this,Et,ke).call(this,Bt,"feFuncG",J),q(this,Et,ke).call(this,Bt,"feFuncB",mt)},wt=new WeakSet,ye=function(N){return t(this,I,pe).style.color=N,v(getComputedStyle(t(this,I,pe)).getPropertyValue("color"))},f.DOMFilterFactory=ft;class H extends d.BaseCanvasFactory{constructor({ownerDocument:D=globalThis.document}={}){super(),this._document=D}_createCanvas(D,N){const J=this._document.createElement("canvas");return J.width=D,J.height=N,J}}f.DOMCanvasFactory=H;async function F(bt,D=!1){if(A(bt,document.baseURI)){const N=await fetch(bt);if(!N.ok)throw new Error(N.statusText);return D?new Uint8Array(await N.arrayBuffer()):(0,M.stringToBytes)(await N.text())}return new Promise((N,J)=>{const mt=new XMLHttpRequest;mt.open("GET",bt,!0),D&&(mt.responseType="arraybuffer"),mt.onreadystatechange=()=>{if(mt.readyState===XMLHttpRequest.DONE){if(mt.status===200||mt.status===0){let At;if(D&&mt.response?At=new Uint8Array(mt.response):!D&&mt.responseText&&(At=(0,M.stringToBytes)(mt.responseText)),At){N(At);return}}J(new Error(mt.statusText))}},mt.send(null)})}class m extends d.BaseCMapReaderFactory{_fetchData(D,N){return F(D,this.isCompressed).then(J=>({cMapData:J,compressionType:N}))}}f.DOMCMapReaderFactory=m;class U extends d.BaseStandardFontDataFactory{_fetchData(D){return F(D,!0)}}f.DOMStandardFontDataFactory=U;class j extends d.BaseSVGFactory{_createSVG(D){return document.createElementNS(nt,D)}}f.DOMSVGFactory=j;class R{constructor({viewBox:D,scale:N,rotation:J,offsetX:mt=0,offsetY:At=0,dontFlip:Bt=!1}){this.viewBox=D,this.scale=N,this.rotation=J,this.offsetX=mt,this.offsetY=At;const zt=(D[2]+D[0])/2,Nt=(D[3]+D[1])/2;let Vt,$t,Xt,qt;switch(J%=360,J<0&&(J+=360),J){case 180:Vt=-1,$t=0,Xt=0,qt=1;break;case 90:Vt=0,$t=1,Xt=1,qt=0;break;case 270:Vt=0,$t=-1,Xt=-1,qt=0;break;case 0:Vt=1,$t=0,Xt=0,qt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Bt&&(Xt=-Xt,qt=-qt);let ht,tt,Y,vt;Vt===0?(ht=Math.abs(Nt-D[1])*N+mt,tt=Math.abs(zt-D[0])*N+At,Y=(D[3]-D[1])*N,vt=(D[2]-D[0])*N):(ht=Math.abs(zt-D[0])*N+mt,tt=Math.abs(Nt-D[1])*N+At,Y=(D[2]-D[0])*N,vt=(D[3]-D[1])*N),this.transform=[Vt*N,$t*N,Xt*N,qt*N,ht-Vt*N*zt-Xt*N*Nt,tt-$t*N*zt-qt*N*Nt],this.width=Y,this.height=vt}get rawDims(){const{viewBox:D}=this;return(0,M.shadow)(this,"rawDims",{pageWidth:D[2]-D[0],pageHeight:D[3]-D[1],pageX:D[0],pageY:D[1]})}clone({scale:D=this.scale,rotation:N=this.rotation,offsetX:J=this.offsetX,offsetY:mt=this.offsetY,dontFlip:At=!1}={}){return new R({viewBox:this.viewBox.slice(),scale:D,rotation:N,offsetX:J,offsetY:mt,dontFlip:At})}convertToViewportPoint(D,N){return M.Util.applyTransform([D,N],this.transform)}convertToViewportRectangle(D){const N=M.Util.applyTransform([D[0],D[1]],this.transform),J=M.Util.applyTransform([D[2],D[3]],this.transform);return[N[0],N[1],J[0],J[1]]}convertToPdfPoint(D,N){return M.Util.applyInverseTransform([D,N],this.transform)}}f.PageViewport=R;class E extends M.BaseException{constructor(D,N=0){super(D,"RenderingCancelledException"),this.extraDelay=N}}f.RenderingCancelledException=E;function S(bt){const D=bt.length;let N=0;for(;N<D&&bt[N].trim()==="";)N++;return bt.substring(N,N+5).toLowerCase()==="data:"}function p(bt){return typeof bt=="string"&&/\.pdf$/i.test(bt)}function _(bt,D=!1){return D||([bt]=bt.split(/[#?]/,1)),bt.substring(bt.lastIndexOf("/")+1)}function T(bt,D="document.pdf"){if(typeof bt!="string")return D;if(S(bt))return(0,M.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),D;const N=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,J=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,mt=N.exec(bt);let At=J.exec(mt[1])||J.exec(mt[2])||J.exec(mt[3]);if(At&&(At=At[0],At.includes("%")))try{At=J.exec(decodeURIComponent(At))[0]}catch{}return At||D}class x{constructor(){se(this,"started",Object.create(null));se(this,"times",[])}time(D){D in this.started&&(0,M.warn)(`Timer is already running for ${D}`),this.started[D]=Date.now()}timeEnd(D){D in this.started||(0,M.warn)(`Timer has not been started for ${D}`),this.times.push({name:D,start:this.started[D],end:Date.now()}),delete this.started[D]}toString(){const D=[];let N=0;for(const{name:J}of this.times)N=Math.max(J.length,N);for(const{name:J,start:mt,end:At}of this.times)D.push(`${J.padEnd(N)} ${At-mt}ms
`);return D.join("")}}f.StatTimer=x;function A(bt,D){try{const{protocol:N}=D?new URL(bt,D):new URL(bt);return N==="http:"||N==="https:"}catch{return!1}}function r(bt){bt.preventDefault()}function o(bt,D=!1){return new Promise((N,J)=>{const mt=document.createElement("script");mt.src=bt,mt.onload=function(At){D&&mt.remove(),N(At)},mt.onerror=function(){J(new Error(`Cannot load script at: ${mt.src}`))},(document.head||document.documentElement).append(mt)})}function P(bt){console.log("Deprecated API usage: "+bt)}let g;class a{static toDateObject(D){if(!D||typeof D!="string")return null;g||(g=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const N=g.exec(D);if(!N)return null;const J=parseInt(N[1],10);let mt=parseInt(N[2],10);mt=mt>=1&&mt<=12?mt-1:0;let At=parseInt(N[3],10);At=At>=1&&At<=31?At:1;let Bt=parseInt(N[4],10);Bt=Bt>=0&&Bt<=23?Bt:0;let zt=parseInt(N[5],10);zt=zt>=0&&zt<=59?zt:0;let Nt=parseInt(N[6],10);Nt=Nt>=0&&Nt<=59?Nt:0;const Vt=N[7]||"Z";let $t=parseInt(N[8],10);$t=$t>=0&&$t<=23?$t:0;let Xt=parseInt(N[9],10)||0;return Xt=Xt>=0&&Xt<=59?Xt:0,Vt==="-"?(Bt+=$t,zt+=Xt):Vt==="+"&&(Bt-=$t,zt-=Xt),new Date(Date.UTC(J,mt,At,Bt,zt,Nt))}}f.PDFDateString=a;function k(bt,{scale:D=1,rotation:N=0}){const{width:J,height:mt}=bt.attributes.style,At=[0,0,parseInt(J),parseInt(mt)];return new R({viewBox:At,scale:D,rotation:N})}function v(bt){if(bt.startsWith("#")){const D=parseInt(bt.slice(1),16);return[(D&16711680)>>16,(D&65280)>>8,D&255]}return bt.startsWith("rgb(")?bt.slice(4,-1).split(",").map(D=>parseInt(D)):bt.startsWith("rgba(")?bt.slice(5,-1).split(",").map(D=>parseInt(D)).slice(0,3):((0,M.warn)(`Not a valid color format: "${bt}"`),[0,0,0])}function z(bt){const D=document.createElement("span");D.style.visibility="hidden",document.body.append(D);for(const N of bt.keys()){D.style.color=N;const J=window.getComputedStyle(D).color;bt.set(N,v(J))}D.remove()}function X(bt){const{a:D,b:N,c:J,d:mt,e:At,f:Bt}=bt.getTransform();return[D,N,J,mt,At,Bt]}function C(bt){const{a:D,b:N,c:J,d:mt,e:At,f:Bt}=bt.getTransform().invertSelf();return[D,N,J,mt,At,Bt]}function K(bt,D,N=!1,J=!0){if(D instanceof R){const{pageWidth:mt,pageHeight:At}=D.rawDims,{style:Bt}=bt,zt=M.FeatureTest.isCSSRoundSupported,Nt=`var(--scale-factor) * ${mt}px`,Vt=`var(--scale-factor) * ${At}px`,$t=zt?`round(${Nt}, 1px)`:`calc(${Nt})`,Xt=zt?`round(${Vt}, 1px)`:`calc(${Vt})`;!N||D.rotation%180===0?(Bt.width=$t,Bt.height=Xt):(Bt.width=Xt,Bt.height=$t)}J&&bt.setAttribute("data-main-rotation",D.rotation)}},(lt,f,ct)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.BaseStandardFontDataFactory=f.BaseSVGFactory=f.BaseFilterFactory=f.BaseCanvasFactory=f.BaseCMapReaderFactory=void 0;var d=ct(1);class M{constructor(){this.constructor===M&&(0,d.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(m){return"none"}addHCMFilter(m,U){return"none"}addHighlightHCMFilter(m,U,j,R){return"none"}destroy(m=!1){}}f.BaseFilterFactory=M;class nt{constructor(){this.constructor===nt&&(0,d.unreachable)("Cannot initialize BaseCanvasFactory.")}create(m,U){if(m<=0||U<=0)throw new Error("Invalid canvas size");const j=this._createCanvas(m,U);return{canvas:j,context:j.getContext("2d")}}reset(m,U,j){if(!m.canvas)throw new Error("Canvas is not specified");if(U<=0||j<=0)throw new Error("Invalid canvas size");m.canvas.width=U,m.canvas.height=j}destroy(m){if(!m.canvas)throw new Error("Canvas is not specified");m.canvas.width=0,m.canvas.height=0,m.canvas=null,m.context=null}_createCanvas(m,U){(0,d.unreachable)("Abstract method `_createCanvas` called.")}}f.BaseCanvasFactory=nt;class ${constructor({baseUrl:m=null,isCompressed:U=!0}){this.constructor===$&&(0,d.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=m,this.isCompressed=U}async fetch({name:m}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!m)throw new Error("CMap name must be specified.");const U=this.baseUrl+m+(this.isCompressed?".bcmap":""),j=this.isCompressed?d.CMapCompressionType.BINARY:d.CMapCompressionType.NONE;return this._fetchData(U,j).catch(R=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${U}`)})}_fetchData(m,U){(0,d.unreachable)("Abstract method `_fetchData` called.")}}f.BaseCMapReaderFactory=$;class ft{constructor({baseUrl:m=null}){this.constructor===ft&&(0,d.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=m}async fetch({filename:m}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!m)throw new Error("Font filename must be specified.");const U=`${this.baseUrl}${m}`;return this._fetchData(U).catch(j=>{throw new Error(`Unable to load font data at: ${U}`)})}_fetchData(m){(0,d.unreachable)("Abstract method `_fetchData` called.")}}f.BaseStandardFontDataFactory=ft;class H{constructor(){this.constructor===H&&(0,d.unreachable)("Cannot initialize BaseSVGFactory.")}create(m,U,j=!1){if(m<=0||U<=0)throw new Error("Invalid SVG dimensions");const R=this._createSVG("svg:svg");return R.setAttribute("version","1.1"),j||(R.setAttribute("width",`${m}px`),R.setAttribute("height",`${U}px`)),R.setAttribute("preserveAspectRatio","none"),R.setAttribute("viewBox",`0 0 ${m} ${U}`),R}createElement(m){if(typeof m!="string")throw new Error("Invalid SVG element type");return this._createSVG(m)}_createSVG(m){(0,d.unreachable)("Abstract method `_createSVG` called.")}}f.BaseSVGFactory=H},(lt,f,ct)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.MurmurHash3_64=void 0;var d=ct(1);const M=3285377520,nt=4294901760,$=65535;class ft{constructor(F){this.h1=F?F&4294967295:M,this.h2=F?F&4294967295:M}update(F){let m,U;if(typeof F=="string"){m=new Uint8Array(F.length*2),U=0;for(let P=0,g=F.length;P<g;P++){const a=F.charCodeAt(P);a<=255?m[U++]=a:(m[U++]=a>>>8,m[U++]=a&255)}}else if((0,d.isArrayBuffer)(F))m=F.slice(),U=m.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const j=U>>2,R=U-j*4,E=new Uint32Array(m.buffer,0,j);let S=0,p=0,_=this.h1,T=this.h2;const x=3432918353,A=461845907,r=x&$,o=A&$;for(let P=0;P<j;P++)P&1?(S=E[P],S=S*x&nt|S*r&$,S=S<<15|S>>>17,S=S*A&nt|S*o&$,_^=S,_=_<<13|_>>>19,_=_*5+3864292196):(p=E[P],p=p*x&nt|p*r&$,p=p<<15|p>>>17,p=p*A&nt|p*o&$,T^=p,T=T<<13|T>>>19,T=T*5+3864292196);switch(S=0,R){case 3:S^=m[j*4+2]<<16;case 2:S^=m[j*4+1]<<8;case 1:S^=m[j*4],S=S*x&nt|S*r&$,S=S<<15|S>>>17,S=S*A&nt|S*o&$,j&1?_^=S:T^=S}this.h1=_,this.h2=T}hexdigest(){let F=this.h1,m=this.h2;return F^=m>>>1,F=F*3981806797&nt|F*36045&$,m=m*4283543511&nt|((m<<16|F>>>16)*2950163797&nt)>>>16,F^=m>>>1,F=F*444984403&nt|F*60499&$,m=m*3301882366&nt|((m<<16|F>>>16)*3120437893&nt)>>>16,F^=m>>>1,(F>>>0).toString(16).padStart(8,"0")+(m>>>0).toString(16).padStart(8,"0")}}f.MurmurHash3_64=ft},(lt,f,ct)=>{var $;Object.defineProperty(f,"__esModule",{value:!0}),f.FontLoader=f.FontFaceObject=void 0;var d=ct(1);class M{constructor({ownerDocument:H=globalThis.document,styleElement:F=null}){B(this,$,new Set);this._document=H,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(H){this.nativeFontFaces.add(H),this._document.fonts.add(H)}removeNativeFontFace(H){this.nativeFontFaces.delete(H),this._document.fonts.delete(H)}insertRule(H){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const F=this.styleElement.sheet;F.insertRule(H,F.cssRules.length)}clear(){for(const H of this.nativeFontFaces)this._document.fonts.delete(H);this.nativeFontFaces.clear(),t(this,$).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(H){if(!(!H||t(this,$).has(H.loadedName))){if((0,d.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:F,src:m,style:U}=H,j=new FontFace(F,m,U);this.addNativeFontFace(j);try{await j.load(),t(this,$).add(F)}catch{(0,d.warn)(`Cannot load system font: ${H.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(j)}return}(0,d.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(H){if(H.attached||H.missingFile&&!H.systemFontInfo)return;if(H.attached=!0,H.systemFontInfo){await this.loadSystemFont(H.systemFontInfo);return}if(this.isFontLoadingAPISupported){const m=H.createNativeFontFace();if(m){this.addNativeFontFace(m);try{await m.loaded}catch(U){throw(0,d.warn)(`Failed to load font '${m.family}': '${U}'.`),H.disableFontFace=!0,U}}return}const F=H.createFontFaceRule();if(F){if(this.insertRule(F),this.isSyncFontLoadingSupported)return;await new Promise(m=>{const U=this._queueLoadingCallback(m);this._prepareFontLoadEvent(H,U)})}}get isFontLoadingAPISupported(){var F;const H=!!((F=this._document)!=null&&F.fonts);return(0,d.shadow)(this,"isFontLoadingAPISupported",H)}get isSyncFontLoadingSupported(){let H=!1;return(d.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(H=!0),(0,d.shadow)(this,"isSyncFontLoadingSupported",H)}_queueLoadingCallback(H){function F(){for((0,d.assert)(!U.done,"completeRequest() cannot be called twice."),U.done=!0;m.length>0&&m[0].done;){const j=m.shift();setTimeout(j.callback,0)}}const{loadingRequests:m}=this,U={done:!1,complete:F,callback:H};return m.push(U),U}get _loadTestFont(){const H=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,d.shadow)(this,"_loadTestFont",H)}_prepareFontLoadEvent(H,F){function m(v,z){return v.charCodeAt(z)<<24|v.charCodeAt(z+1)<<16|v.charCodeAt(z+2)<<8|v.charCodeAt(z+3)&255}function U(v,z,X,C){const K=v.substring(0,z),rt=v.substring(z+X);return K+C+rt}let j,R;const E=this._document.createElement("canvas");E.width=1,E.height=1;const S=E.getContext("2d");let p=0;function _(v,z){if(++p>30){(0,d.warn)("Load test font never loaded."),z();return}if(S.font="30px "+v,S.fillText(".",0,20),S.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(_.bind(null,v,z))}const T=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=U(x,976,T.length,T);const r=16,o=1482184792;let P=m(x,r);for(j=0,R=T.length-3;j<R;j+=4)P=P-o+m(T,j)|0;j<T.length&&(P=P-o+m(T+"XXX",j)|0),x=U(x,r,4,(0,d.string32)(P));const g=`url(data:font/opentype;base64,${btoa(x)});`,a=`@font-face {font-family:"${T}";src:${g}}`;this.insertRule(a);const k=this._document.createElement("div");k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px";for(const v of[H.loadedName,T]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=v,k.append(z)}this._document.body.append(k),_(T,()=>{k.remove(),F.complete()})}}$=new WeakMap,f.FontLoader=M;class nt{constructor(H,{isEvalSupported:F=!0,disableFontFace:m=!1,ignoreErrors:U=!1,inspectFont:j=null}){this.compiledGlyphs=Object.create(null);for(const R in H)this[R]=H[R];this.isEvalSupported=F!==!1,this.disableFontFace=m===!0,this.ignoreErrors=U===!0,this._inspectFont=j}createNativeFontFace(){var F;if(!this.data||this.disableFontFace)return null;let H;if(!this.cssFontInfo)H=new FontFace(this.loadedName,this.data,{});else{const m={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(m.style=`oblique ${this.cssFontInfo.italicAngle}deg`),H=new FontFace(this.cssFontInfo.fontFamily,this.data,m)}return(F=this._inspectFont)==null||F.call(this,this),H}createFontFaceRule(){var U;if(!this.data||this.disableFontFace)return null;const H=(0,d.bytesToString)(this.data),F=`url(data:${this.mimetype};base64,${btoa(H)});`;let m;if(!this.cssFontInfo)m=`@font-face {font-family:"${this.loadedName}";src:${F}}`;else{let j=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(j+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),m=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${j}src:${F}}`}return(U=this._inspectFont)==null||U.call(this,this,F),m}getPathGenerator(H,F){if(this.compiledGlyphs[F]!==void 0)return this.compiledGlyphs[F];let m;try{m=H.get(this.loadedName+"_path_"+F)}catch(U){if(!this.ignoreErrors)throw U;return(0,d.warn)(`getPathGenerator - ignoring character: "${U}".`),this.compiledGlyphs[F]=function(j,R){}}if(this.isEvalSupported&&d.FeatureTest.isEvalSupported){const U=[];for(const j of m){const R=j.args!==void 0?j.args.join(","):"";U.push("c.",j.cmd,"(",R,`);
`)}return this.compiledGlyphs[F]=new Function("c","size",U.join(""))}return this.compiledGlyphs[F]=function(U,j){for(const R of m)R.cmd==="scale"&&(R.args=[j,-j]),U[R.cmd].apply(U,R.args)}}}f.FontFaceObject=nt},(lt,f,ct)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.NodeStandardFontDataFactory=f.NodeFilterFactory=f.NodeCanvasFactory=f.NodeCMapReaderFactory=void 0;var d=ct(7);ct(1);const M=function(F){return new Promise((m,U)=>{require$$5.readFile(F,(R,E)=>{if(R||!E){U(new Error(R));return}m(new Uint8Array(E))})})};class nt extends d.BaseFilterFactory{}f.NodeFilterFactory=nt;class $ extends d.BaseCanvasFactory{_createCanvas(m,U){return require$$5.createCanvas(m,U)}}f.NodeCanvasFactory=$;class ft extends d.BaseCMapReaderFactory{_fetchData(m,U){return M(m).then(j=>({cMapData:j,compressionType:U}))}}f.NodeCMapReaderFactory=ft;class H extends d.BaseStandardFontDataFactory{_fetchData(m){return M(m)}}f.NodeStandardFontDataFactory=H},(lt,f,ct)=>{var V,ti,_t,ei;Object.defineProperty(f,"__esModule",{value:!0}),f.CanvasGraphics=void 0;var d=ct(1),M=ct(6),nt=ct(12),$=ct(13);const ft=16,H=100,F=4096,m=15,U=10,j=1e3,R=16;function E(w,i){if(w._removeMirroring)throw new Error("Context is already forwarding operations.");w.__originalSave=w.save,w.__originalRestore=w.restore,w.__originalRotate=w.rotate,w.__originalScale=w.scale,w.__originalTranslate=w.translate,w.__originalTransform=w.transform,w.__originalSetTransform=w.setTransform,w.__originalResetTransform=w.resetTransform,w.__originalClip=w.clip,w.__originalMoveTo=w.moveTo,w.__originalLineTo=w.lineTo,w.__originalBezierCurveTo=w.bezierCurveTo,w.__originalRect=w.rect,w.__originalClosePath=w.closePath,w.__originalBeginPath=w.beginPath,w._removeMirroring=()=>{w.save=w.__originalSave,w.restore=w.__originalRestore,w.rotate=w.__originalRotate,w.scale=w.__originalScale,w.translate=w.__originalTranslate,w.transform=w.__originalTransform,w.setTransform=w.__originalSetTransform,w.resetTransform=w.__originalResetTransform,w.clip=w.__originalClip,w.moveTo=w.__originalMoveTo,w.lineTo=w.__originalLineTo,w.bezierCurveTo=w.__originalBezierCurveTo,w.rect=w.__originalRect,w.closePath=w.__originalClosePath,w.beginPath=w.__originalBeginPath,delete w._removeMirroring},w.save=function(){i.save(),this.__originalSave()},w.restore=function(){i.restore(),this.__originalRestore()},w.translate=function(s,l){i.translate(s,l),this.__originalTranslate(s,l)},w.scale=function(s,l){i.scale(s,l),this.__originalScale(s,l)},w.transform=function(s,l,u,y,I,W){i.transform(s,l,u,y,I,W),this.__originalTransform(s,l,u,y,I,W)},w.setTransform=function(s,l,u,y,I,W){i.setTransform(s,l,u,y,I,W),this.__originalSetTransform(s,l,u,y,I,W)},w.resetTransform=function(){i.resetTransform(),this.__originalResetTransform()},w.rotate=function(s){i.rotate(s),this.__originalRotate(s)},w.clip=function(s){i.clip(s),this.__originalClip(s)},w.moveTo=function(n,s){i.moveTo(n,s),this.__originalMoveTo(n,s)},w.lineTo=function(n,s){i.lineTo(n,s),this.__originalLineTo(n,s)},w.bezierCurveTo=function(n,s,l,u,y,I){i.bezierCurveTo(n,s,l,u,y,I),this.__originalBezierCurveTo(n,s,l,u,y,I)},w.rect=function(n,s,l,u){i.rect(n,s,l,u),this.__originalRect(n,s,l,u)},w.closePath=function(){i.closePath(),this.__originalClosePath()},w.beginPath=function(){i.beginPath(),this.__originalBeginPath()}}class S{constructor(i){this.canvasFactory=i,this.cache=Object.create(null)}getCanvas(i,n,s){let l;return this.cache[i]!==void 0?(l=this.cache[i],this.canvasFactory.reset(l,n,s)):(l=this.canvasFactory.create(n,s),this.cache[i]=l),l}delete(i){delete this.cache[i]}clear(){for(const i in this.cache){const n=this.cache[i];this.canvasFactory.destroy(n),delete this.cache[i]}}}function p(w,i,n,s,l,u,y,I,W,it){const[et,ot,pt,Et,gt,Ft]=(0,M.getCurrentTransform)(w);if(ot===0&&pt===0){const Lt=y*et+gt,bt=Math.round(Lt),D=I*Et+Ft,N=Math.round(D),J=(y+W)*et+gt,mt=Math.abs(Math.round(J)-bt)||1,At=(I+it)*Et+Ft,Bt=Math.abs(Math.round(At)-N)||1;return w.setTransform(Math.sign(et),0,0,Math.sign(Et),bt,N),w.drawImage(i,n,s,l,u,0,0,mt,Bt),w.setTransform(et,ot,pt,Et,gt,Ft),[mt,Bt]}if(et===0&&Et===0){const Lt=I*pt+gt,bt=Math.round(Lt),D=y*ot+Ft,N=Math.round(D),J=(I+it)*pt+gt,mt=Math.abs(Math.round(J)-bt)||1,At=(y+W)*ot+Ft,Bt=Math.abs(Math.round(At)-N)||1;return w.setTransform(0,Math.sign(ot),Math.sign(pt),0,bt,N),w.drawImage(i,n,s,l,u,0,0,Bt,mt),w.setTransform(et,ot,pt,Et,gt,Ft),[Bt,mt]}w.drawImage(i,n,s,l,u,y,I,W,it);const Wt=Math.hypot(et,ot),wt=Math.hypot(pt,Et);return[Wt*W,wt*it]}function _(w){const{width:i,height:n}=w;if(i>j||n>j)return null;const s=1e3,l=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),u=i+1;let y=new Uint8Array(u*(n+1)),I,W,it;const et=i+7&-8;let ot=new Uint8Array(et*n),pt=0;for(const wt of w.data){let Lt=128;for(;Lt>0;)ot[pt++]=wt&Lt?0:255,Lt>>=1}let Et=0;for(pt=0,ot[pt]!==0&&(y[0]=1,++Et),W=1;W<i;W++)ot[pt]!==ot[pt+1]&&(y[W]=ot[pt]?2:1,++Et),pt++;for(ot[pt]!==0&&(y[W]=2,++Et),I=1;I<n;I++){pt=I*et,it=I*u,ot[pt-et]!==ot[pt]&&(y[it]=ot[pt]?1:8,++Et);let wt=(ot[pt]?4:0)+(ot[pt-et]?8:0);for(W=1;W<i;W++)wt=(wt>>2)+(ot[pt+1]?4:0)+(ot[pt-et+1]?8:0),l[wt]&&(y[it+W]=l[wt],++Et),pt++;if(ot[pt-et]!==ot[pt]&&(y[it+W]=ot[pt]?2:4,++Et),Et>s)return null}for(pt=et*(n-1),it=I*u,ot[pt]!==0&&(y[it]=8,++Et),W=1;W<i;W++)ot[pt]!==ot[pt+1]&&(y[it+W]=ot[pt]?4:8,++Et),pt++;if(ot[pt]!==0&&(y[it+W]=4,++Et),Et>s)return null;const gt=new Int32Array([0,u,-1,0,-u,0,0,0,1]),Ft=new Path2D;for(I=0;Et&&I<=n;I++){let wt=I*u;const Lt=wt+i;for(;wt<Lt&&!y[wt];)wt++;if(wt===Lt)continue;Ft.moveTo(wt%u,I);const bt=wt;let D=y[wt];do{const N=gt[D];do wt+=N;while(!y[wt]);const J=y[wt];J!==5&&J!==10?(D=J,y[wt]=0):(D=J&51*D>>4,y[wt]&=D>>2|D<<2),Ft.lineTo(wt%u,wt/u|0),y[wt]||--Et}while(bt!==wt);--I}return ot=null,y=null,function(wt){wt.save(),wt.scale(1/i,-1/n),wt.translate(0,-n),wt.fill(Ft),wt.beginPath(),wt.restore()}}class T{constructor(i,n){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=d.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=d.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=d.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,i,n])}clone(){const i=Object.create(this);return i.clipBox=this.clipBox.slice(),i}setCurrentPoint(i,n){this.x=i,this.y=n}updatePathMinMax(i,n,s){[n,s]=d.Util.applyTransform([n,s],i),this.minX=Math.min(this.minX,n),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,n),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(i,n){const s=d.Util.applyTransform(n,i),l=d.Util.applyTransform(n.slice(2),i);this.minX=Math.min(this.minX,s[0],l[0]),this.minY=Math.min(this.minY,s[1],l[1]),this.maxX=Math.max(this.maxX,s[0],l[0]),this.maxY=Math.max(this.maxY,s[1],l[1])}updateScalingPathMinMax(i,n){d.Util.scaleMinMax(i,n),this.minX=Math.min(this.minX,n[0]),this.maxX=Math.max(this.maxX,n[1]),this.minY=Math.min(this.minY,n[2]),this.maxY=Math.max(this.maxY,n[3])}updateCurvePathMinMax(i,n,s,l,u,y,I,W,it,et){const ot=d.Util.bezierBoundingBox(n,s,l,u,y,I,W,it);if(et){et[0]=Math.min(et[0],ot[0],ot[2]),et[1]=Math.max(et[1],ot[0],ot[2]),et[2]=Math.min(et[2],ot[1],ot[3]),et[3]=Math.max(et[3],ot[1],ot[3]);return}this.updateRectMinMax(i,ot)}getPathBoundingBox(i=nt.PathType.FILL,n=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(i===nt.PathType.STROKE){n||(0,d.unreachable)("Stroke bounding box must include transform.");const l=d.Util.singularValueDecompose2dScale(n),u=l[0]*this.lineWidth/2,y=l[1]*this.lineWidth/2;s[0]-=u,s[1]-=y,s[2]+=u,s[3]+=y}return s}updateClipFromPath(){const i=d.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(i||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(i){this.clipBox=i,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(i=nt.PathType.FILL,n=null){return d.Util.intersect(this.clipBox,this.getPathBoundingBox(i,n))}}function x(w,i){if(typeof ImageData<"u"&&i instanceof ImageData){w.putImageData(i,0,0);return}const n=i.height,s=i.width,l=n%R,u=(n-l)/R,y=l===0?u:u+1,I=w.createImageData(s,R);let W=0,it;const et=i.data,ot=I.data;let pt,Et,gt,Ft;if(i.kind===d.ImageKind.GRAYSCALE_1BPP){const Wt=et.byteLength,wt=new Uint32Array(ot.buffer,0,ot.byteLength>>2),Lt=wt.length,bt=s+7>>3,D=4294967295,N=d.FeatureTest.isLittleEndian?4278190080:255;for(pt=0;pt<y;pt++){for(gt=pt<u?R:l,it=0,Et=0;Et<gt;Et++){const J=Wt-W;let mt=0;const At=J>bt?s:J*8-7,Bt=At&-8;let zt=0,Nt=0;for(;mt<Bt;mt+=8)Nt=et[W++],wt[it++]=Nt&128?D:N,wt[it++]=Nt&64?D:N,wt[it++]=Nt&32?D:N,wt[it++]=Nt&16?D:N,wt[it++]=Nt&8?D:N,wt[it++]=Nt&4?D:N,wt[it++]=Nt&2?D:N,wt[it++]=Nt&1?D:N;for(;mt<At;mt++)zt===0&&(Nt=et[W++],zt=128),wt[it++]=Nt&zt?D:N,zt>>=1}for(;it<Lt;)wt[it++]=0;w.putImageData(I,0,pt*R)}}else if(i.kind===d.ImageKind.RGBA_32BPP){for(Et=0,Ft=s*R*4,pt=0;pt<u;pt++)ot.set(et.subarray(W,W+Ft)),W+=Ft,w.putImageData(I,0,Et),Et+=R;pt<y&&(Ft=s*l*4,ot.set(et.subarray(W,W+Ft)),w.putImageData(I,0,Et))}else if(i.kind===d.ImageKind.RGB_24BPP)for(gt=R,Ft=s*gt,pt=0;pt<y;pt++){for(pt>=u&&(gt=l,Ft=s*gt),it=0,Et=Ft;Et--;)ot[it++]=et[W++],ot[it++]=et[W++],ot[it++]=et[W++],ot[it++]=255;w.putImageData(I,0,pt*R)}else throw new Error(`bad image kind: ${i.kind}`)}function A(w,i){if(i.bitmap){w.drawImage(i.bitmap,0,0);return}const n=i.height,s=i.width,l=n%R,u=(n-l)/R,y=l===0?u:u+1,I=w.createImageData(s,R);let W=0;const it=i.data,et=I.data;for(let ot=0;ot<y;ot++){const pt=ot<u?R:l;({srcPos:W}=(0,$.convertBlackAndWhiteToRGBA)({src:it,srcPos:W,dest:et,width:s,height:pt,nonBlackColor:0})),w.putImageData(I,0,ot*R)}}function r(w,i){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of n)w[s]!==void 0&&(i[s]=w[s]);w.setLineDash!==void 0&&(i.setLineDash(w.getLineDash()),i.lineDashOffset=w.lineDashOffset)}function o(w){if(w.strokeStyle=w.fillStyle="#000000",w.fillRule="nonzero",w.globalAlpha=1,w.lineWidth=1,w.lineCap="butt",w.lineJoin="miter",w.miterLimit=10,w.globalCompositeOperation="source-over",w.font="10px sans-serif",w.setLineDash!==void 0&&(w.setLineDash([]),w.lineDashOffset=0),!d.isNodeJS){const{filter:i}=w;i!=="none"&&i!==""&&(w.filter="none")}}function P(w,i,n,s){const l=w.length;for(let u=3;u<l;u+=4){const y=w[u];if(y===0)w[u-3]=i,w[u-2]=n,w[u-1]=s;else if(y<255){const I=255-y;w[u-3]=w[u-3]*y+i*I>>8,w[u-2]=w[u-2]*y+n*I>>8,w[u-1]=w[u-1]*y+s*I>>8}}}function g(w,i,n){const s=w.length,l=1/255;for(let u=3;u<s;u+=4){const y=n?n[w[u]]:w[u];i[u]=i[u]*y*l|0}}function a(w,i,n){const s=w.length;for(let l=3;l<s;l+=4){const u=w[l-3]*77+w[l-2]*152+w[l-1]*28;i[l]=n?i[l]*n[u>>8]>>8:i[l]*u>>16}}function k(w,i,n,s,l,u,y,I,W,it,et){const ot=!!u,pt=ot?u[0]:0,Et=ot?u[1]:0,gt=ot?u[2]:0,Ft=l==="Luminosity"?a:g,wt=Math.min(s,Math.ceil(1048576/n));for(let Lt=0;Lt<s;Lt+=wt){const bt=Math.min(wt,s-Lt),D=w.getImageData(I-it,Lt+(W-et),n,bt),N=i.getImageData(I,Lt+W,n,bt);ot&&P(D.data,pt,Et,gt),Ft(D.data,N.data,y),i.putImageData(N,I,Lt+W)}}function v(w,i,n,s){const l=s[0],u=s[1],y=s[2]-l,I=s[3]-u;y===0||I===0||(k(i.context,n,y,I,i.subtype,i.backdrop,i.transferMap,l,u,i.offsetX,i.offsetY),w.save(),w.globalAlpha=1,w.globalCompositeOperation="source-over",w.setTransform(1,0,0,1,0,0),w.drawImage(n.canvas,0,0),w.restore())}function z(w,i){const n=d.Util.singularValueDecompose2dScale(w);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*M.PixelsPerInch.PDF_TO_CSS_UNITS);return i!==void 0?i:n[0]<=s||n[1]<=s}const X=["butt","round","square"],C=["miter","round","bevel"],K={},rt={},Mt=class{constructor(i,n,s,l,u,{optionalContentConfig:y,markedContentStack:I=null},W,it){B(this,V);B(this,_t);this.ctx=i,this.current=new T(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=s,this.canvasFactory=l,this.filterFactory=u,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=I||[],this.optionalContentConfig=y,this.cachedCanvases=new S(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=W,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=it,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(i,n=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):n}beginDrawing({transform:i,viewport:n,transparency:s=!1,background:l=null}){const u=this.ctx.canvas.width,y=this.ctx.canvas.height,I=this.ctx.fillStyle;if(this.ctx.fillStyle=l||"#ffffff",this.ctx.fillRect(0,0,u,y),this.ctx.fillStyle=I,s){const W=this.cachedCanvases.getCanvas("transparent",u,y);this.compositeCtx=this.ctx,this.transparentCanvas=W.canvas,this.ctx=W.context,this.ctx.save(),this.ctx.transform(...(0,M.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),o(this.ctx),i&&(this.ctx.transform(...i),this.outputScaleX=i[0],this.outputScaleY=i[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=(0,M.getCurrentTransform)(this.ctx)}executeOperatorList(i,n,s,l){const u=i.argsArray,y=i.fnArray;let I=n||0;const W=u.length;if(W===I)return I;const it=W-I>U&&typeof s=="function",et=it?Date.now()+m:0;let ot=0;const pt=this.commonObjs,Et=this.objs;let gt;for(;;){if(l!==void 0&&I===l.nextBreakPoint)return l.breakIt(I,s),I;if(gt=y[I],gt!==d.OPS.dependency)this[gt].apply(this,u[I]);else for(const Ft of u[I]){const Wt=Ft.startsWith("g_")?pt:Et;if(!Wt.has(Ft))return Wt.get(Ft,s),I}if(I++,I===W)return I;if(it&&++ot>U){if(Date.now()>et)return s(),I;ot=0}}}endDrawing(){q(this,V,ti).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const i of this._cachedBitmapsMap.values()){for(const n of i.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);i.clear()}this._cachedBitmapsMap.clear(),q(this,_t,ei).call(this)}_scaleImage(i,n){const s=i.width,l=i.height;let u=Math.max(Math.hypot(n[0],n[1]),1),y=Math.max(Math.hypot(n[2],n[3]),1),I=s,W=l,it="prescale1",et,ot;for(;u>2&&I>1||y>2&&W>1;){let pt=I,Et=W;u>2&&I>1&&(pt=I>=16384?Math.floor(I/2)-1||1:Math.ceil(I/2),u/=I/pt),y>2&&W>1&&(Et=W>=16384?Math.floor(W/2)-1||1:Math.ceil(W)/2,y/=W/Et),et=this.cachedCanvases.getCanvas(it,pt,Et),ot=et.context,ot.clearRect(0,0,pt,Et),ot.drawImage(i,0,0,I,W,0,0,pt,Et),i=et.canvas,I=pt,W=Et,it=it==="prescale1"?"prescale2":"prescale1"}return{img:i,paintWidth:I,paintHeight:W}}_createMaskCanvas(i){const n=this.ctx,{width:s,height:l}=i,u=this.current.fillColor,y=this.current.patternFill,I=(0,M.getCurrentTransform)(n);let W,it,et,ot;if((i.bitmap||i.data)&&i.count>1){const mt=i.bitmap||i.data.buffer;it=JSON.stringify(y?I:[I.slice(0,4),u]),W=this._cachedBitmapsMap.get(mt),W||(W=new Map,this._cachedBitmapsMap.set(mt,W));const At=W.get(it);if(At&&!y){const Bt=Math.round(Math.min(I[0],I[2])+I[4]),zt=Math.round(Math.min(I[1],I[3])+I[5]);return{canvas:At,offsetX:Bt,offsetY:zt}}et=At}et||(ot=this.cachedCanvases.getCanvas("maskCanvas",s,l),A(ot.context,i));let pt=d.Util.transform(I,[1/s,0,0,-1/l,0,0]);pt=d.Util.transform(pt,[1,0,0,1,0,-l]);const Et=d.Util.applyTransform([0,0],pt),gt=d.Util.applyTransform([s,l],pt),Ft=d.Util.normalizeRect([Et[0],Et[1],gt[0],gt[1]]),Wt=Math.round(Ft[2]-Ft[0])||1,wt=Math.round(Ft[3]-Ft[1])||1,Lt=this.cachedCanvases.getCanvas("fillCanvas",Wt,wt),bt=Lt.context,D=Math.min(Et[0],gt[0]),N=Math.min(Et[1],gt[1]);bt.translate(-D,-N),bt.transform(...pt),et||(et=this._scaleImage(ot.canvas,(0,M.getCurrentTransformInverse)(bt)),et=et.img,W&&y&&W.set(it,et)),bt.imageSmoothingEnabled=z((0,M.getCurrentTransform)(bt),i.interpolate),p(bt,et,0,0,et.width,et.height,0,0,s,l),bt.globalCompositeOperation="source-in";const J=d.Util.transform((0,M.getCurrentTransformInverse)(bt),[1,0,0,1,-D,-N]);return bt.fillStyle=y?u.getPattern(n,this,J,nt.PathType.FILL):u,bt.fillRect(0,0,s,l),W&&!y&&(this.cachedCanvases.delete("fillCanvas"),W.set(it,Lt.canvas)),{canvas:Lt.canvas,offsetX:Math.round(D),offsetY:Math.round(N)}}setLineWidth(i){i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(i){this.ctx.lineCap=X[i]}setLineJoin(i){this.ctx.lineJoin=C[i]}setMiterLimit(i){this.ctx.miterLimit=i}setDash(i,n){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(i),s.lineDashOffset=n)}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[n,s]of i)switch(n){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const i=this.inSMaskMode;this.current.activeSMask&&!i?this.beginSMaskMode():!this.current.activeSMask&&i&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(s,i,n);this.suspendedCtx=this.ctx,this.ctx=l.context;const u=this.ctx;u.setTransform(...(0,M.getCurrentTransform)(this.suspendedCtx)),r(this.suspendedCtx,u),E(u,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),r(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(i){if(!this.current.activeSMask)return;i?(i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]),i[3]=Math.ceil(i[3])):i=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,s=this.suspendedCtx;v(s,n,this.ctx,i),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(r(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),r(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(i,n,s,l,u,y){this.ctx.transform(i,n,s,l,u,y),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(i,n,s){const l=this.ctx,u=this.current;let y=u.x,I=u.y,W,it;const et=(0,M.getCurrentTransform)(l),ot=et[0]===0&&et[3]===0||et[1]===0&&et[2]===0,pt=ot?s.slice(0):null;for(let Et=0,gt=0,Ft=i.length;Et<Ft;Et++)switch(i[Et]|0){case d.OPS.rectangle:y=n[gt++],I=n[gt++];const Wt=n[gt++],wt=n[gt++],Lt=y+Wt,bt=I+wt;l.moveTo(y,I),Wt===0||wt===0?l.lineTo(Lt,bt):(l.lineTo(Lt,I),l.lineTo(Lt,bt),l.lineTo(y,bt)),ot||u.updateRectMinMax(et,[y,I,Lt,bt]),l.closePath();break;case d.OPS.moveTo:y=n[gt++],I=n[gt++],l.moveTo(y,I),ot||u.updatePathMinMax(et,y,I);break;case d.OPS.lineTo:y=n[gt++],I=n[gt++],l.lineTo(y,I),ot||u.updatePathMinMax(et,y,I);break;case d.OPS.curveTo:W=y,it=I,y=n[gt+4],I=n[gt+5],l.bezierCurveTo(n[gt],n[gt+1],n[gt+2],n[gt+3],y,I),u.updateCurvePathMinMax(et,W,it,n[gt],n[gt+1],n[gt+2],n[gt+3],y,I,pt),gt+=6;break;case d.OPS.curveTo2:W=y,it=I,l.bezierCurveTo(y,I,n[gt],n[gt+1],n[gt+2],n[gt+3]),u.updateCurvePathMinMax(et,W,it,y,I,n[gt],n[gt+1],n[gt+2],n[gt+3],pt),y=n[gt+2],I=n[gt+3],gt+=4;break;case d.OPS.curveTo3:W=y,it=I,y=n[gt+2],I=n[gt+3],l.bezierCurveTo(n[gt],n[gt+1],y,I,y,I),u.updateCurvePathMinMax(et,W,it,n[gt],n[gt+1],y,I,y,I,pt),gt+=4;break;case d.OPS.closePath:l.closePath();break}ot&&u.updateScalingPathMinMax(et,pt),u.setCurrentPoint(y,I)}closePath(){this.ctx.closePath()}stroke(i=!0){const n=this.ctx,s=this.current.strokeColor;n.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s==null?void 0:s.getPattern)?(n.save(),n.strokeStyle=s.getPattern(n,this,(0,M.getCurrentTransformInverse)(n),nt.PathType.STROKE),this.rescaleAndStroke(!1),n.restore()):this.rescaleAndStroke(!0)),i&&this.consumePath(this.current.getClippedPathBoundingBox()),n.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(i=!0){const n=this.ctx,s=this.current.fillColor,l=this.current.patternFill;let u=!1;l&&(n.save(),n.fillStyle=s.getPattern(n,this,(0,M.getCurrentTransformInverse)(n),nt.PathType.FILL),u=!0);const y=this.current.getClippedPathBoundingBox();this.contentVisible&&y!==null&&(this.pendingEOFill?(n.fill("evenodd"),this.pendingEOFill=!1):n.fill()),u&&n.restore(),i&&this.consumePath(y)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=K}eoClip(){this.pendingClip=rt}beginText(){this.current.textMatrix=d.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const i=this.pendingTextPaths,n=this.ctx;if(i===void 0){n.beginPath();return}n.save(),n.beginPath();for(const s of i)n.setTransform(...s.transform),n.translate(s.x,s.y),s.addToPath(n,s.fontSize);n.restore(),n.clip(),n.beginPath(),delete this.pendingTextPaths}setCharSpacing(i){this.current.charSpacing=i}setWordSpacing(i){this.current.wordSpacing=i}setHScale(i){this.current.textHScale=i/100}setLeading(i){this.current.leading=-i}setFont(i,n){var et;const s=this.commonObjs.get(i),l=this.current;if(!s)throw new Error(`Can't find font for ${i}`);if(l.fontMatrix=s.fontMatrix||d.FONT_IDENTITY_MATRIX,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&(0,d.warn)("Invalid font matrix for font "+i),n<0?(n=-n,l.fontDirection=-1):l.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const u=s.loadedName||"sans-serif",y=((et=s.systemFontInfo)==null?void 0:et.css)||`"${u}", ${s.fallbackName}`;let I="normal";s.black?I="900":s.bold&&(I="bold");const W=s.italic?"italic":"normal";let it=n;n<ft?it=ft:n>H&&(it=H),this.current.fontSizeScale=n/it,this.ctx.font=`${W} ${I} ${it}px ${y}`}setTextRenderingMode(i){this.current.textRenderingMode=i}setTextRise(i){this.current.textRise=i}moveText(i,n){this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=n}setLeadingMoveText(i,n){this.setLeading(-n),this.moveText(i,n)}setTextMatrix(i,n,s,l,u,y){this.current.textMatrix=[i,n,s,l,u,y],this.current.textMatrixScale=Math.hypot(i,n),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(i,n,s,l){const u=this.ctx,y=this.current,I=y.font,W=y.textRenderingMode,it=y.fontSize/y.fontSizeScale,et=W&d.TextRenderingMode.FILL_STROKE_MASK,ot=!!(W&d.TextRenderingMode.ADD_TO_PATH_FLAG),pt=y.patternFill&&!I.missingFile;let Et;(I.disableFontFace||ot||pt)&&(Et=I.getPathGenerator(this.commonObjs,i)),I.disableFontFace||pt?(u.save(),u.translate(n,s),u.beginPath(),Et(u,it),l&&u.setTransform(...l),(et===d.TextRenderingMode.FILL||et===d.TextRenderingMode.FILL_STROKE)&&u.fill(),(et===d.TextRenderingMode.STROKE||et===d.TextRenderingMode.FILL_STROKE)&&u.stroke(),u.restore()):((et===d.TextRenderingMode.FILL||et===d.TextRenderingMode.FILL_STROKE)&&u.fillText(i,n,s),(et===d.TextRenderingMode.STROKE||et===d.TextRenderingMode.FILL_STROKE)&&u.strokeText(i,n,s)),ot&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,M.getCurrentTransform)(u),x:n,y:s,fontSize:it,addToPath:Et})}get isFontSubpixelAAEnabled(){const{context:i}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);i.scale(1.5,1),i.fillText("I",0,10);const n=i.getImageData(0,0,10,10).data;let s=!1;for(let l=3;l<n.length;l+=4)if(n[l]>0&&n[l]<255){s=!0;break}return(0,d.shadow)(this,"isFontSubpixelAAEnabled",s)}showText(i){const n=this.current,s=n.font;if(s.isType3Font)return this.showType3Text(i);const l=n.fontSize;if(l===0)return;const u=this.ctx,y=n.fontSizeScale,I=n.charSpacing,W=n.wordSpacing,it=n.fontDirection,et=n.textHScale*it,ot=i.length,pt=s.vertical,Et=pt?1:-1,gt=s.defaultVMetrics,Ft=l*n.fontMatrix[0],Wt=n.textRenderingMode===d.TextRenderingMode.FILL&&!s.disableFontFace&&!n.patternFill;u.save(),u.transform(...n.textMatrix),u.translate(n.x,n.y+n.textRise),it>0?u.scale(et,-1):u.scale(et,1);let wt;if(n.patternFill){u.save();const J=n.fillColor.getPattern(u,this,(0,M.getCurrentTransformInverse)(u),nt.PathType.FILL);wt=(0,M.getCurrentTransform)(u),u.restore(),u.fillStyle=J}let Lt=n.lineWidth;const bt=n.textMatrixScale;if(bt===0||Lt===0){const J=n.textRenderingMode&d.TextRenderingMode.FILL_STROKE_MASK;(J===d.TextRenderingMode.STROKE||J===d.TextRenderingMode.FILL_STROKE)&&(Lt=this.getSinglePixelWidth())}else Lt/=bt;if(y!==1&&(u.scale(y,y),Lt/=y),u.lineWidth=Lt,s.isInvalidPDFjsFont){const J=[];let mt=0;for(const At of i)J.push(At.unicode),mt+=At.width;u.fillText(J.join(""),0,0),n.x+=mt*Ft*et,u.restore(),this.compose();return}let D=0,N;for(N=0;N<ot;++N){const J=i[N];if(typeof J=="number"){D+=Et*J*l/1e3;continue}let mt=!1;const At=(J.isSpace?W:0)+I,Bt=J.fontChar,zt=J.accent;let Nt,Vt,$t=J.width;if(pt){const qt=J.vmetric||gt,ht=-(J.vmetric?qt[1]:$t*.5)*Ft,tt=qt[2]*Ft;$t=qt?-qt[0]:$t,Nt=ht/y,Vt=(D+tt)/y}else Nt=D/y,Vt=0;if(s.remeasure&&$t>0){const qt=u.measureText(Bt).width*1e3/l*y;if($t<qt&&this.isFontSubpixelAAEnabled){const ht=$t/qt;mt=!0,u.save(),u.scale(ht,1),Nt/=ht}else $t!==qt&&(Nt+=($t-qt)/2e3*l/y)}if(this.contentVisible&&(J.isInFont||s.missingFile)){if(Wt&&!zt)u.fillText(Bt,Nt,Vt);else if(this.paintChar(Bt,Nt,Vt,wt),zt){const qt=Nt+l*zt.offset.x/y,ht=Vt-l*zt.offset.y/y;this.paintChar(zt.fontChar,qt,ht,wt)}}const Xt=pt?$t*Ft-At*it:$t*Ft+At*it;D+=Xt,mt&&u.restore()}pt?n.y-=D:n.x+=D*et,u.restore(),this.compose()}showType3Text(i){const n=this.ctx,s=this.current,l=s.font,u=s.fontSize,y=s.fontDirection,I=l.vertical?1:-1,W=s.charSpacing,it=s.wordSpacing,et=s.textHScale*y,ot=s.fontMatrix||d.FONT_IDENTITY_MATRIX,pt=i.length,Et=s.textRenderingMode===d.TextRenderingMode.INVISIBLE;let gt,Ft,Wt,wt;if(!(Et||u===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),n.transform(...s.textMatrix),n.translate(s.x,s.y),n.scale(et,y),gt=0;gt<pt;++gt){if(Ft=i[gt],typeof Ft=="number"){wt=I*Ft*u/1e3,this.ctx.translate(wt,0),s.x+=wt*et;continue}const Lt=(Ft.isSpace?it:0)+W,bt=l.charProcOperatorList[Ft.operatorListId];if(!bt){(0,d.warn)(`Type3 character "${Ft.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ft,this.save(),n.scale(u,u),n.transform(...ot),this.executeOperatorList(bt),this.restore()),Wt=d.Util.applyTransform([Ft.width,0],ot)[0]*u+Lt,n.translate(Wt,0),s.x+=Wt*et}n.restore(),this.processingType3=null}}setCharWidth(i,n){}setCharWidthAndBounds(i,n,s,l,u,y){this.ctx.rect(s,l,u-s,y-l),this.ctx.clip(),this.endPath()}getColorN_Pattern(i){let n;if(i[0]==="TilingPattern"){const s=i[1],l=this.baseTransform||(0,M.getCurrentTransform)(this.ctx),u={createCanvasGraphics:y=>new Mt(y,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};n=new nt.TilingPattern(i,s,this.ctx,u,l)}else n=this._getPattern(i[1],i[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(i,n,s){const l=d.Util.makeHexColor(i,n,s);this.ctx.strokeStyle=l,this.current.strokeColor=l}setFillRGBColor(i,n,s){const l=d.Util.makeHexColor(i,n,s);this.ctx.fillStyle=l,this.current.fillColor=l,this.current.patternFill=!1}_getPattern(i,n=null){let s;return this.cachedPatterns.has(i)?s=this.cachedPatterns.get(i):(s=(0,nt.getShadingPattern)(this.getObject(i)),this.cachedPatterns.set(i,s)),n&&(s.matrix=n),s}shadingFill(i){if(!this.contentVisible)return;const n=this.ctx;this.save();const s=this._getPattern(i);n.fillStyle=s.getPattern(n,this,(0,M.getCurrentTransformInverse)(n),nt.PathType.SHADING);const l=(0,M.getCurrentTransformInverse)(n);if(l){const{width:u,height:y}=n.canvas,[I,W,it,et]=d.Util.getAxialAlignedBoundingBox([0,0,u,y],l);this.ctx.fillRect(I,W,it-I,et-W)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,d.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,d.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(i,n){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(i)&&i.length===6&&this.transform(...i),this.baseTransform=(0,M.getCurrentTransform)(this.ctx),n)){const s=n[2]-n[0],l=n[3]-n[1];this.ctx.rect(n[0],n[1],s,l),this.current.updateRectMinMax((0,M.getCurrentTransform)(this.ctx),n),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(i){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;i.isolated||(0,d.info)("TODO: Support non-isolated groups."),i.knockout&&(0,d.warn)("Knockout groups not supported.");const s=(0,M.getCurrentTransform)(n);if(i.matrix&&n.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let l=d.Util.getAxialAlignedBoundingBox(i.bbox,(0,M.getCurrentTransform)(n));const u=[0,0,n.canvas.width,n.canvas.height];l=d.Util.intersect(l,u)||[0,0,0,0];const y=Math.floor(l[0]),I=Math.floor(l[1]);let W=Math.max(Math.ceil(l[2])-y,1),it=Math.max(Math.ceil(l[3])-I,1),et=1,ot=1;W>F&&(et=W/F,W=F),it>F&&(ot=it/F,it=F),this.current.startNewPathAndClipBox([0,0,W,it]);let pt="groupAt"+this.groupLevel;i.smask&&(pt+="_smask_"+this.smaskCounter++%2);const Et=this.cachedCanvases.getCanvas(pt,W,it),gt=Et.context;gt.scale(1/et,1/ot),gt.translate(-y,-I),gt.transform(...s),i.smask?this.smaskStack.push({canvas:Et.canvas,context:gt,offsetX:y,offsetY:I,scaleX:et,scaleY:ot,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}):(n.setTransform(1,0,0,1,0,0),n.translate(y,I),n.scale(et,ot),n.save()),r(n,gt),this.ctx=gt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(i){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,i.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const l=(0,M.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...l);const u=d.Util.getAxialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],l);this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(u)}}beginAnnotation(i,n,s,l,u){if(q(this,V,ti).call(this),o(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(n)&&n.length===4){const y=n[2]-n[0],I=n[3]-n[1];if(u&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=y,n[3]=I;const[W,it]=d.Util.singularValueDecompose2dScale((0,M.getCurrentTransform)(this.ctx)),{viewportScale:et}=this,ot=Math.ceil(y*this.outputScaleX*et),pt=Math.ceil(I*this.outputScaleY*et);this.annotationCanvas=this.canvasFactory.create(ot,pt);const{canvas:Et,context:gt}=this.annotationCanvas;this.annotationCanvasMap.set(i,Et),this.annotationCanvas.savedCtx=this.ctx,this.ctx=gt,this.ctx.save(),this.ctx.setTransform(W,0,0,-it,0,I*it),o(this.ctx)}else o(this.ctx),this.ctx.rect(n[0],n[1],y,I),this.ctx.clip(),this.endPath()}this.current=new T(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...l)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),q(this,_t,ei).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(i){if(!this.contentVisible)return;const n=i.count;i=this.getObject(i.data,i),i.count=n;const s=this.ctx,l=this.processingType3;if(l&&(l.compiled===void 0&&(l.compiled=_(i)),l.compiled)){l.compiled(s);return}const u=this._createMaskCanvas(i),y=u.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(y,u.offsetX,u.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(i,n,s=0,l=0,u,y){if(!this.contentVisible)return;i=this.getObject(i.data,i);const I=this.ctx;I.save();const W=(0,M.getCurrentTransform)(I);I.transform(n,s,l,u,0,0);const it=this._createMaskCanvas(i);I.setTransform(1,0,0,1,it.offsetX-W[4],it.offsetY-W[5]);for(let et=0,ot=y.length;et<ot;et+=2){const pt=d.Util.transform(W,[n,s,l,u,y[et],y[et+1]]),[Et,gt]=d.Util.applyTransform([0,0],pt);I.drawImage(it.canvas,Et,gt)}I.restore(),this.compose()}paintImageMaskXObjectGroup(i){if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,l=this.current.patternFill;for(const u of i){const{data:y,width:I,height:W,transform:it}=u,et=this.cachedCanvases.getCanvas("maskCanvas",I,W),ot=et.context;ot.save();const pt=this.getObject(y,u);A(ot,pt),ot.globalCompositeOperation="source-in",ot.fillStyle=l?s.getPattern(ot,this,(0,M.getCurrentTransformInverse)(n),nt.PathType.FILL):s,ot.fillRect(0,0,I,W),ot.restore(),n.save(),n.transform(...it),n.scale(1,-1),p(n,et.canvas,0,0,I,W,0,-1,1,1),n.restore()}this.compose()}paintImageXObject(i){if(!this.contentVisible)return;const n=this.getObject(i);if(!n){(0,d.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(n)}paintImageXObjectRepeat(i,n,s,l){if(!this.contentVisible)return;const u=this.getObject(i);if(!u){(0,d.warn)("Dependent image isn't ready yet");return}const y=u.width,I=u.height,W=[];for(let it=0,et=l.length;it<et;it+=2)W.push({transform:[n,0,0,s,l[it],l[it+1]],x:0,y:0,w:y,h:I});this.paintInlineImageXObjectGroup(u,W)}applyTransferMapsToCanvas(i){return this.current.transferMaps!=="none"&&(i.filter=this.current.transferMaps,i.drawImage(i.canvas,0,0),i.filter="none"),i.canvas}applyTransferMapsToBitmap(i){if(this.current.transferMaps==="none")return i.bitmap;const{bitmap:n,width:s,height:l}=i,u=this.cachedCanvases.getCanvas("inlineImage",s,l),y=u.context;return y.filter=this.current.transferMaps,y.drawImage(n,0,0),y.filter="none",u.canvas}paintInlineImageXObject(i){if(!this.contentVisible)return;const n=i.width,s=i.height,l=this.ctx;if(this.save(),!d.isNodeJS){const{filter:I}=l;I!=="none"&&I!==""&&(l.filter="none")}l.scale(1/n,-1/s);let u;if(i.bitmap)u=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)u=i;else{const W=this.cachedCanvases.getCanvas("inlineImage",n,s).context;x(W,i),u=this.applyTransferMapsToCanvas(W)}const y=this._scaleImage(u,(0,M.getCurrentTransformInverse)(l));l.imageSmoothingEnabled=z((0,M.getCurrentTransform)(l),i.interpolate),p(l,y.img,0,0,y.paintWidth,y.paintHeight,0,-s,n,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(i,n){if(!this.contentVisible)return;const s=this.ctx;let l;if(i.bitmap)l=i.bitmap;else{const u=i.width,y=i.height,W=this.cachedCanvases.getCanvas("inlineImage",u,y).context;x(W,i),l=this.applyTransferMapsToCanvas(W)}for(const u of n)s.save(),s.transform(...u.transform),s.scale(1,-1),p(s,l,u.x,u.y,u.w,u.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(i){}markPointProps(i,n){}beginMarkedContent(i){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(i,n){i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(i){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const s=this.ctx;this.pendingClip&&(n||(this.pendingClip===rt?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const i=(0,M.getCurrentTransform)(this.ctx);if(i[1]===0&&i[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(i[0]),Math.abs(i[3]));else{const n=Math.abs(i[0]*i[3]-i[2]*i[1]),s=Math.hypot(i[0],i[2]),l=Math.hypot(i[1],i[3]);this._cachedGetSinglePixelWidth=Math.max(s,l)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:i}=this.current,{a:n,b:s,c:l,d:u}=this.ctx.getTransform();let y,I;if(s===0&&l===0){const W=Math.abs(n),it=Math.abs(u);if(W===it)if(i===0)y=I=1/W;else{const et=W*i;y=I=et<1?1/et:1}else if(i===0)y=1/W,I=1/it;else{const et=W*i,ot=it*i;y=et<1?1/et:1,I=ot<1?1/ot:1}}else{const W=Math.abs(n*u-s*l),it=Math.hypot(n,s),et=Math.hypot(l,u);if(i===0)y=et/W,I=it/W;else{const ot=i*W;y=et>ot?et/ot:1,I=it>ot?it/ot:1}}this._cachedScaleForStroking[0]=y,this._cachedScaleForStroking[1]=I}return this._cachedScaleForStroking}rescaleAndStroke(i){const{ctx:n}=this,{lineWidth:s}=this.current,[l,u]=this.getScaleForStroking();if(n.lineWidth=s||1,l===1&&u===1){n.stroke();return}const y=n.getLineDash();if(i&&n.save(),n.scale(l,u),y.length>0){const I=Math.max(l,u);n.setLineDash(y.map(W=>W/I)),n.lineDashOffset/=I}n.stroke(),i&&n.restore()}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}};let dt=Mt;V=new WeakSet,ti=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},_t=new WeakSet,ei=function(){if(this.pageColors){const i=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(i!=="none"){const n=this.ctx.filter;this.ctx.filter=i,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}},f.CanvasGraphics=dt;for(const w in d.OPS)dt.prototype[w]!==void 0&&(dt.prototype[d.OPS[w]]=dt.prototype[w])},(lt,f,ct)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.TilingPattern=f.PathType=void 0,f.getShadingPattern=R;var d=ct(1),M=ct(6);const nt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};f.PathType=nt;function $(_,T){if(!T)return;const x=T[2]-T[0],A=T[3]-T[1],r=new Path2D;r.rect(T[0],T[1],x,A),_.clip(r)}class ft{constructor(){this.constructor===ft&&(0,d.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,d.unreachable)("Abstract method `getPattern` called.")}}class H extends ft{constructor(T){super(),this._type=T[1],this._bbox=T[2],this._colorStops=T[3],this._p0=T[4],this._p1=T[5],this._r0=T[6],this._r1=T[7],this.matrix=null}_createGradient(T){let x;this._type==="axial"?x=T.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(x=T.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const A of this._colorStops)x.addColorStop(A[0],A[1]);return x}getPattern(T,x,A,r){let o;if(r===nt.STROKE||r===nt.FILL){const P=x.current.getClippedPathBoundingBox(r,(0,M.getCurrentTransform)(T))||[0,0,0,0],g=Math.ceil(P[2]-P[0])||1,a=Math.ceil(P[3]-P[1])||1,k=x.cachedCanvases.getCanvas("pattern",g,a,!0),v=k.context;v.clearRect(0,0,v.canvas.width,v.canvas.height),v.beginPath(),v.rect(0,0,v.canvas.width,v.canvas.height),v.translate(-P[0],-P[1]),A=d.Util.transform(A,[1,0,0,1,P[0],P[1]]),v.transform(...x.baseTransform),this.matrix&&v.transform(...this.matrix),$(v,this._bbox),v.fillStyle=this._createGradient(v),v.fill(),o=T.createPattern(k.canvas,"no-repeat");const z=new DOMMatrix(A);o.setTransform(z)}else $(T,this._bbox),o=this._createGradient(T);return o}}function F(_,T,x,A,r,o,P,g){const a=T.coords,k=T.colors,v=_.data,z=_.width*4;let X;a[x+1]>a[A+1]&&(X=x,x=A,A=X,X=o,o=P,P=X),a[A+1]>a[r+1]&&(X=A,A=r,r=X,X=P,P=g,g=X),a[x+1]>a[A+1]&&(X=x,x=A,A=X,X=o,o=P,P=X);const C=(a[x]+T.offsetX)*T.scaleX,K=(a[x+1]+T.offsetY)*T.scaleY,rt=(a[A]+T.offsetX)*T.scaleX,dt=(a[A+1]+T.offsetY)*T.scaleY,V=(a[r]+T.offsetX)*T.scaleX,ut=(a[r+1]+T.offsetY)*T.scaleY;if(K>=ut)return;const _t=k[o],xt=k[o+1],Mt=k[o+2],w=k[P],i=k[P+1],n=k[P+2],s=k[g],l=k[g+1],u=k[g+2],y=Math.round(K),I=Math.round(ut);let W,it,et,ot,pt,Et,gt,Ft;for(let Wt=y;Wt<=I;Wt++){if(Wt<dt){const N=Wt<K?0:(K-Wt)/(K-dt);W=C-(C-rt)*N,it=_t-(_t-w)*N,et=xt-(xt-i)*N,ot=Mt-(Mt-n)*N}else{let N;Wt>ut?N=1:dt===ut?N=0:N=(dt-Wt)/(dt-ut),W=rt-(rt-V)*N,it=w-(w-s)*N,et=i-(i-l)*N,ot=n-(n-u)*N}let wt;Wt<K?wt=0:Wt>ut?wt=1:wt=(K-Wt)/(K-ut),pt=C-(C-V)*wt,Et=_t-(_t-s)*wt,gt=xt-(xt-l)*wt,Ft=Mt-(Mt-u)*wt;const Lt=Math.round(Math.min(W,pt)),bt=Math.round(Math.max(W,pt));let D=z*Wt+Lt*4;for(let N=Lt;N<=bt;N++)wt=(W-N)/(W-pt),wt<0?wt=0:wt>1&&(wt=1),v[D++]=it-(it-Et)*wt|0,v[D++]=et-(et-gt)*wt|0,v[D++]=ot-(ot-Ft)*wt|0,v[D++]=255}}function m(_,T,x){const A=T.coords,r=T.colors;let o,P;switch(T.type){case"lattice":const g=T.verticesPerRow,a=Math.floor(A.length/g)-1,k=g-1;for(o=0;o<a;o++){let v=o*g;for(let z=0;z<k;z++,v++)F(_,x,A[v],A[v+1],A[v+g],r[v],r[v+1],r[v+g]),F(_,x,A[v+g+1],A[v+1],A[v+g],r[v+g+1],r[v+1],r[v+g])}break;case"triangles":for(o=0,P=A.length;o<P;o+=3)F(_,x,A[o],A[o+1],A[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class U extends ft{constructor(T){super(),this._coords=T[2],this._colors=T[3],this._figures=T[4],this._bounds=T[5],this._bbox=T[7],this._background=T[8],this.matrix=null}_createMeshCanvas(T,x,A){const g=Math.floor(this._bounds[0]),a=Math.floor(this._bounds[1]),k=Math.ceil(this._bounds[2])-g,v=Math.ceil(this._bounds[3])-a,z=Math.min(Math.ceil(Math.abs(k*T[0]*1.1)),3e3),X=Math.min(Math.ceil(Math.abs(v*T[1]*1.1)),3e3),C=k/z,K=v/X,rt={coords:this._coords,colors:this._colors,offsetX:-g,offsetY:-a,scaleX:1/C,scaleY:1/K},dt=z+2*2,V=X+2*2,ut=A.getCanvas("mesh",dt,V,!1),_t=ut.context,xt=_t.createImageData(z,X);if(x){const w=xt.data;for(let i=0,n=w.length;i<n;i+=4)w[i]=x[0],w[i+1]=x[1],w[i+2]=x[2],w[i+3]=255}for(const w of this._figures)m(xt,w,rt);return _t.putImageData(xt,2,2),{canvas:ut.canvas,offsetX:g-2*C,offsetY:a-2*K,scaleX:C,scaleY:K}}getPattern(T,x,A,r){$(T,this._bbox);let o;if(r===nt.SHADING)o=d.Util.singularValueDecompose2dScale((0,M.getCurrentTransform)(T));else if(o=d.Util.singularValueDecompose2dScale(x.baseTransform),this.matrix){const g=d.Util.singularValueDecompose2dScale(this.matrix);o=[o[0]*g[0],o[1]*g[1]]}const P=this._createMeshCanvas(o,r===nt.SHADING?null:this._background,x.cachedCanvases);return r!==nt.SHADING&&(T.setTransform(...x.baseTransform),this.matrix&&T.transform(...this.matrix)),T.translate(P.offsetX,P.offsetY),T.scale(P.scaleX,P.scaleY),T.createPattern(P.canvas,"no-repeat")}}class j extends ft{getPattern(){return"hotpink"}}function R(_){switch(_[0]){case"RadialAxial":return new H(_);case"Mesh":return new U(_);case"Dummy":return new j}throw new Error(`Unknown IR type: ${_[0]}`)}const E={COLORED:1,UNCOLORED:2},p=class{constructor(T,x,A,r,o){this.operatorList=T[2],this.matrix=T[3]||[1,0,0,1,0,0],this.bbox=T[4],this.xstep=T[5],this.ystep=T[6],this.paintType=T[7],this.tilingType=T[8],this.color=x,this.ctx=A,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(T){const x=this.operatorList,A=this.bbox,r=this.xstep,o=this.ystep,P=this.paintType,g=this.tilingType,a=this.color,k=this.canvasGraphicsFactory;(0,d.info)("TilingType: "+g);const v=A[0],z=A[1],X=A[2],C=A[3],K=d.Util.singularValueDecompose2dScale(this.matrix),rt=d.Util.singularValueDecompose2dScale(this.baseTransform),dt=[K[0]*rt[0],K[1]*rt[1]],V=this.getSizeAndScale(r,this.ctx.canvas.width,dt[0]),ut=this.getSizeAndScale(o,this.ctx.canvas.height,dt[1]),_t=T.cachedCanvases.getCanvas("pattern",V.size,ut.size,!0),xt=_t.context,Mt=k.createCanvasGraphics(xt);Mt.groupLevel=T.groupLevel,this.setFillAndStrokeStyleToContext(Mt,P,a);let w=v,i=z,n=X,s=C;return v<0&&(w=0,n+=Math.abs(v)),z<0&&(i=0,s+=Math.abs(z)),xt.translate(-(V.scale*w),-(ut.scale*i)),Mt.transform(V.scale,0,0,ut.scale,0,0),xt.save(),this.clipBbox(Mt,w,i,n,s),Mt.baseTransform=(0,M.getCurrentTransform)(Mt.ctx),Mt.executeOperatorList(x),Mt.endDrawing(),{canvas:_t.canvas,scaleX:V.scale,scaleY:ut.scale,offsetX:w,offsetY:i}}getSizeAndScale(T,x,A){T=Math.abs(T);const r=Math.max(p.MAX_PATTERN_SIZE,x);let o=Math.ceil(T*A);return o>=r?o=r:A=o/T,{scale:A,size:o}}clipBbox(T,x,A,r,o){const P=r-x,g=o-A;T.ctx.rect(x,A,P,g),T.current.updateRectMinMax((0,M.getCurrentTransform)(T.ctx),[x,A,r,o]),T.clip(),T.endPath()}setFillAndStrokeStyleToContext(T,x,A){const r=T.ctx,o=T.current;switch(x){case E.COLORED:const P=this.ctx;r.fillStyle=P.fillStyle,r.strokeStyle=P.strokeStyle,o.fillColor=P.fillStyle,o.strokeColor=P.strokeStyle;break;case E.UNCOLORED:const g=d.Util.makeHexColor(A[0],A[1],A[2]);r.fillStyle=g,r.strokeStyle=g,o.fillColor=g,o.strokeColor=g;break;default:throw new d.FormatError(`Unsupported paint type: ${x}`)}}getPattern(T,x,A,r){let o=A;r!==nt.SHADING&&(o=d.Util.transform(o,x.baseTransform),this.matrix&&(o=d.Util.transform(o,this.matrix)));const P=this.createPatternCanvas(x);let g=new DOMMatrix(o);g=g.translate(P.offsetX,P.offsetY),g=g.scale(1/P.scaleX,1/P.scaleY);const a=T.createPattern(P.canvas,"repeat");return a.setTransform(g),a}};let S=p;se(S,"MAX_PATTERN_SIZE",3e3),f.TilingPattern=S},(lt,f,ct)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.convertBlackAndWhiteToRGBA=nt,f.convertToRGBA=M,f.grayToRGBA=ft;var d=ct(1);function M(H){switch(H.kind){case d.ImageKind.GRAYSCALE_1BPP:return nt(H);case d.ImageKind.RGB_24BPP:return $(H)}return null}function nt({src:H,srcPos:F=0,dest:m,width:U,height:j,nonBlackColor:R=4294967295,inverseDecode:E=!1}){const S=d.FeatureTest.isLittleEndian?4278190080:255,[p,_]=E?[R,S]:[S,R],T=U>>3,x=U&7,A=H.length;m=new Uint32Array(m.buffer);let r=0;for(let o=0;o<j;o++){for(const g=F+T;F<g;F++){const a=F<A?H[F]:255;m[r++]=a&128?_:p,m[r++]=a&64?_:p,m[r++]=a&32?_:p,m[r++]=a&16?_:p,m[r++]=a&8?_:p,m[r++]=a&4?_:p,m[r++]=a&2?_:p,m[r++]=a&1?_:p}if(x===0)continue;const P=F<A?H[F++]:255;for(let g=0;g<x;g++)m[r++]=P&1<<7-g?_:p}return{srcPos:F,destPos:r}}function $({src:H,srcPos:F=0,dest:m,destPos:U=0,width:j,height:R}){let E=0;const S=H.length>>2,p=new Uint32Array(H.buffer,F,S);if(d.FeatureTest.isLittleEndian){for(;E<S-2;E+=3,U+=4){const _=p[E],T=p[E+1],x=p[E+2];m[U]=_|4278190080,m[U+1]=_>>>24|T<<8|4278190080,m[U+2]=T>>>16|x<<16|4278190080,m[U+3]=x>>>8|4278190080}for(let _=E*4,T=H.length;_<T;_+=3)m[U++]=H[_]|H[_+1]<<8|H[_+2]<<16|4278190080}else{for(;E<S-2;E+=3,U+=4){const _=p[E],T=p[E+1],x=p[E+2];m[U]=_|255,m[U+1]=_<<24|T>>>8|255,m[U+2]=T<<16|x>>>16|255,m[U+3]=x<<8|255}for(let _=E*4,T=H.length;_<T;_+=3)m[U++]=H[_]<<24|H[_+1]<<16|H[_+2]<<8|255}return{srcPos:F,destPos:U}}function ft(H,F){if(d.FeatureTest.isLittleEndian)for(let m=0,U=H.length;m<U;m++)F[m]=H[m]*65793|4278190080;else for(let m=0,U=H.length;m<U;m++)F[m]=H[m]*16843008|255}},(lt,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.GlobalWorkerOptions=void 0;const ct=Object.create(null);f.GlobalWorkerOptions=ct,ct.workerPort=null,ct.workerSrc=""},(lt,f,ct)=>{var H,Mi,m,Ri,j,Me;Object.defineProperty(f,"__esModule",{value:!0}),f.MessageHandler=void 0;var d=ct(1);const M={UNKNOWN:0,DATA:1,ERROR:2},nt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function $(E){switch(E instanceof Error||typeof E=="object"&&E!==null||(0,d.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),E.name){case"AbortException":return new d.AbortException(E.message);case"MissingPDFException":return new d.MissingPDFException(E.message);case"PasswordException":return new d.PasswordException(E.message,E.code);case"UnexpectedResponseException":return new d.UnexpectedResponseException(E.message,E.status);case"UnknownErrorException":return new d.UnknownErrorException(E.message,E.details);default:return new d.UnknownErrorException(E.message,E.toString())}}class ft{constructor(S,p,_){B(this,H);B(this,m);B(this,j);this.sourceName=S,this.targetName=p,this.comObj=_,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=T=>{const x=T.data;if(x.targetName!==this.sourceName)return;if(x.stream){q(this,m,Ri).call(this,x);return}if(x.callback){const r=x.callbackId,o=this.callbackCapabilities[r];if(!o)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],x.callback===M.DATA)o.resolve(x.data);else if(x.callback===M.ERROR)o.reject($(x.reason));else throw new Error("Unexpected callback case");return}const A=this.actionHandler[x.action];if(!A)throw new Error(`Unknown action from worker: ${x.action}`);if(x.callbackId){const r=this.sourceName,o=x.sourceName;new Promise(function(P){P(A(x.data))}).then(function(P){_.postMessage({sourceName:r,targetName:o,callback:M.DATA,callbackId:x.callbackId,data:P})},function(P){_.postMessage({sourceName:r,targetName:o,callback:M.ERROR,callbackId:x.callbackId,reason:$(P)})});return}if(x.streamId){q(this,H,Mi).call(this,x);return}A(x.data)},_.addEventListener("message",this._onComObjOnMessage)}on(S,p){const _=this.actionHandler;if(_[S])throw new Error(`There is already an actionName called "${S}"`);_[S]=p}send(S,p,_){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:S,data:p},_)}sendWithPromise(S,p,_){const T=this.callbackId++,x=new d.PromiseCapability;this.callbackCapabilities[T]=x;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:S,callbackId:T,data:p},_)}catch(A){x.reject(A)}return x.promise}sendWithStream(S,p,_,T){const x=this.streamId++,A=this.sourceName,r=this.targetName,o=this.comObj;return new ReadableStream({start:P=>{const g=new d.PromiseCapability;return this.streamControllers[x]={controller:P,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:A,targetName:r,action:S,streamId:x,data:p,desiredSize:P.desiredSize},T),g.promise},pull:P=>{const g=new d.PromiseCapability;return this.streamControllers[x].pullCall=g,o.postMessage({sourceName:A,targetName:r,stream:nt.PULL,streamId:x,desiredSize:P.desiredSize}),g.promise},cancel:P=>{(0,d.assert)(P instanceof Error,"cancel must have a valid reason");const g=new d.PromiseCapability;return this.streamControllers[x].cancelCall=g,this.streamControllers[x].isClosed=!0,o.postMessage({sourceName:A,targetName:r,stream:nt.CANCEL,streamId:x,reason:$(P)}),g.promise}},_)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}H=new WeakSet,Mi=function(S){const p=S.streamId,_=this.sourceName,T=S.sourceName,x=this.comObj,A=this,r=this.actionHandler[S.action],o={enqueue(P,g=1,a){if(this.isCancelled)return;const k=this.desiredSize;this.desiredSize-=g,k>0&&this.desiredSize<=0&&(this.sinkCapability=new d.PromiseCapability,this.ready=this.sinkCapability.promise),x.postMessage({sourceName:_,targetName:T,stream:nt.ENQUEUE,streamId:p,chunk:P},a)},close(){this.isCancelled||(this.isCancelled=!0,x.postMessage({sourceName:_,targetName:T,stream:nt.CLOSE,streamId:p}),delete A.streamSinks[p])},error(P){(0,d.assert)(P instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,x.postMessage({sourceName:_,targetName:T,stream:nt.ERROR,streamId:p,reason:$(P)}))},sinkCapability:new d.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:S.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[p]=o,new Promise(function(P){P(r(S.data,o))}).then(function(){x.postMessage({sourceName:_,targetName:T,stream:nt.START_COMPLETE,streamId:p,success:!0})},function(P){x.postMessage({sourceName:_,targetName:T,stream:nt.START_COMPLETE,streamId:p,reason:$(P)})})},m=new WeakSet,Ri=function(S){const p=S.streamId,_=this.sourceName,T=S.sourceName,x=this.comObj,A=this.streamControllers[p],r=this.streamSinks[p];switch(S.stream){case nt.START_COMPLETE:S.success?A.startCall.resolve():A.startCall.reject($(S.reason));break;case nt.PULL_COMPLETE:S.success?A.pullCall.resolve():A.pullCall.reject($(S.reason));break;case nt.PULL:if(!r){x.postMessage({sourceName:_,targetName:T,stream:nt.PULL_COMPLETE,streamId:p,success:!0});break}r.desiredSize<=0&&S.desiredSize>0&&r.sinkCapability.resolve(),r.desiredSize=S.desiredSize,new Promise(function(o){var P;o((P=r.onPull)==null?void 0:P.call(r))}).then(function(){x.postMessage({sourceName:_,targetName:T,stream:nt.PULL_COMPLETE,streamId:p,success:!0})},function(o){x.postMessage({sourceName:_,targetName:T,stream:nt.PULL_COMPLETE,streamId:p,reason:$(o)})});break;case nt.ENQUEUE:if((0,d.assert)(A,"enqueue should have stream controller"),A.isClosed)break;A.controller.enqueue(S.chunk);break;case nt.CLOSE:if((0,d.assert)(A,"close should have stream controller"),A.isClosed)break;A.isClosed=!0,A.controller.close(),q(this,j,Me).call(this,A,p);break;case nt.ERROR:(0,d.assert)(A,"error should have stream controller"),A.controller.error($(S.reason)),q(this,j,Me).call(this,A,p);break;case nt.CANCEL_COMPLETE:S.success?A.cancelCall.resolve():A.cancelCall.reject($(S.reason)),q(this,j,Me).call(this,A,p);break;case nt.CANCEL:if(!r)break;new Promise(function(o){var P;o((P=r.onCancel)==null?void 0:P.call(r,$(S.reason)))}).then(function(){x.postMessage({sourceName:_,targetName:T,stream:nt.CANCEL_COMPLETE,streamId:p,success:!0})},function(o){x.postMessage({sourceName:_,targetName:T,stream:nt.CANCEL_COMPLETE,streamId:p,reason:$(o)})}),r.sinkCapability.reject($(S.reason)),r.isCancelled=!0,delete this.streamSinks[p];break;default:throw new Error("Unexpected stream case")}},j=new WeakSet,Me=async function(S,p){var _,T,x;await Promise.allSettled([(_=S.startCall)==null?void 0:_.promise,(T=S.pullCall)==null?void 0:T.promise,(x=S.cancelCall)==null?void 0:x.promise]),delete this.streamControllers[p]},f.MessageHandler=ft},(lt,f,ct)=>{var nt,$;Object.defineProperty(f,"__esModule",{value:!0}),f.Metadata=void 0;var d=ct(1);class M{constructor({parsedData:H,rawData:F}){B(this,nt,void 0);B(this,$,void 0);st(this,nt,H),st(this,$,F)}getRaw(){return t(this,$)}get(H){var F;return(F=t(this,nt).get(H))!=null?F:null}getAll(){return(0,d.objectFromMap)(t(this,nt))}has(H){return t(this,nt).has(H)}}nt=new WeakMap,$=new WeakMap,f.Metadata=M},(lt,f,ct)=>{var H,F,m,U,j,R,ii;Object.defineProperty(f,"__esModule",{value:!0}),f.OptionalContentConfig=void 0;var d=ct(1),M=ct(8);const nt=Symbol("INTERNAL");class ${constructor(p,_){B(this,H,!0);this.name=p,this.intent=_}get visible(){return t(this,H)}_setVisible(p,_){p!==nt&&(0,d.unreachable)("Internal method `_setVisible` called."),st(this,H,_)}}H=new WeakMap;class ft{constructor(p){B(this,R);B(this,F,null);B(this,m,new Map);B(this,U,null);B(this,j,null);if(this.name=null,this.creator=null,p!==null){this.name=p.name,this.creator=p.creator,st(this,j,p.order);for(const _ of p.groups)t(this,m).set(_.id,new $(_.name,_.intent));if(p.baseState==="OFF")for(const _ of t(this,m).values())_._setVisible(nt,!1);for(const _ of p.on)t(this,m).get(_)._setVisible(nt,!0);for(const _ of p.off)t(this,m).get(_)._setVisible(nt,!1);st(this,U,this.getHash())}}isVisible(p){if(t(this,m).size===0)return!0;if(!p)return(0,d.warn)("Optional content group not defined."),!0;if(p.type==="OCG")return t(this,m).has(p.id)?t(this,m).get(p.id).visible:((0,d.warn)(`Optional content group not found: ${p.id}`),!0);if(p.type==="OCMD"){if(p.expression)return q(this,R,ii).call(this,p.expression);if(!p.policy||p.policy==="AnyOn"){for(const _ of p.ids){if(!t(this,m).has(_))return(0,d.warn)(`Optional content group not found: ${_}`),!0;if(t(this,m).get(_).visible)return!0}return!1}else if(p.policy==="AllOn"){for(const _ of p.ids){if(!t(this,m).has(_))return(0,d.warn)(`Optional content group not found: ${_}`),!0;if(!t(this,m).get(_).visible)return!1}return!0}else if(p.policy==="AnyOff"){for(const _ of p.ids){if(!t(this,m).has(_))return(0,d.warn)(`Optional content group not found: ${_}`),!0;if(!t(this,m).get(_).visible)return!0}return!1}else if(p.policy==="AllOff"){for(const _ of p.ids){if(!t(this,m).has(_))return(0,d.warn)(`Optional content group not found: ${_}`),!0;if(t(this,m).get(_).visible)return!1}return!0}return(0,d.warn)(`Unknown optional content policy ${p.policy}.`),!0}return(0,d.warn)(`Unknown group type ${p.type}.`),!0}setVisibility(p,_=!0){if(!t(this,m).has(p)){(0,d.warn)(`Optional content group not found: ${p}`);return}t(this,m).get(p)._setVisible(nt,!!_),st(this,F,null)}get hasInitialVisibility(){return t(this,U)===null||this.getHash()===t(this,U)}getOrder(){return t(this,m).size?t(this,j)?t(this,j).slice():[...t(this,m).keys()]:null}getGroups(){return t(this,m).size>0?(0,d.objectFromMap)(t(this,m)):null}getGroup(p){return t(this,m).get(p)||null}getHash(){if(t(this,F)!==null)return t(this,F);const p=new M.MurmurHash3_64;for(const[_,T]of t(this,m))p.update(`${_}:${T.visible}`);return st(this,F,p.hexdigest())}}F=new WeakMap,m=new WeakMap,U=new WeakMap,j=new WeakMap,R=new WeakSet,ii=function(p){const _=p.length;if(_<2)return!0;const T=p[0];for(let x=1;x<_;x++){const A=p[x];let r;if(Array.isArray(A))r=q(this,R,ii).call(this,A);else if(t(this,m).has(A))r=t(this,m).get(A).visible;else return(0,d.warn)(`Optional content group not found: ${A}`),!0;switch(T){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return T==="And"},f.OptionalContentConfig=ft},(lt,f,ct)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PDFDataTransportStream=void 0;var d=ct(1),M=ct(6);class nt{constructor({length:F,initialData:m,progressiveDone:U=!1,contentDispositionFilename:j=null,disableRange:R=!1,disableStream:E=!1},S){if((0,d.assert)(S,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=U,this._contentDispositionFilename=j,(m==null?void 0:m.length)>0){const p=m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength?m.buffer:new Uint8Array(m).buffer;this._queuedChunks.push(p)}this._pdfDataRangeTransport=S,this._isStreamingSupported=!E,this._isRangeSupported=!R,this._contentLength=F,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((p,_)=>{this._onReceiveData({begin:p,chunk:_})}),this._pdfDataRangeTransport.addProgressListener((p,_)=>{this._onProgress({loaded:p,total:_})}),this._pdfDataRangeTransport.addProgressiveReadListener(p=>{this._onReceiveData({chunk:p})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:F,chunk:m}){const U=m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength?m.buffer:new Uint8Array(m).buffer;if(F===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(U):this._queuedChunks.push(U);else{const j=this._rangeReaders.some(function(R){return R._begin!==F?!1:(R._enqueue(U),!0)});(0,d.assert)(j,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var F,m;return(m=(F=this._fullRequestReader)==null?void 0:F._loaded)!=null?m:0}_onProgress(F){var m,U,j,R;F.total===void 0?(U=(m=this._rangeReaders[0])==null?void 0:m.onProgress)==null||U.call(m,{loaded:F.loaded}):(R=(j=this._fullRequestReader)==null?void 0:j.onProgress)==null||R.call(j,{loaded:F.loaded,total:F.total})}_onProgressiveDone(){var F;(F=this._fullRequestReader)==null||F.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(F){const m=this._rangeReaders.indexOf(F);m>=0&&this._rangeReaders.splice(m,1)}getFullReader(){(0,d.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const F=this._queuedChunks;return this._queuedChunks=null,new $(this,F,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(F,m){if(m<=this._progressiveDataLength)return null;const U=new ft(this,F,m);return this._pdfDataRangeTransport.requestDataRange(F,m),this._rangeReaders.push(U),U}cancelAllRequests(F){var m;(m=this._fullRequestReader)==null||m.cancel(F);for(const U of this._rangeReaders.slice(0))U.cancel(F);this._pdfDataRangeTransport.abort()}}f.PDFDataTransportStream=nt;class ${constructor(F,m,U=!1,j=null){this._stream=F,this._done=U||!1,this._filename=(0,M.isPdfFile)(j)?j:null,this._queuedChunks=m||[],this._loaded=0;for(const R of this._queuedChunks)this._loaded+=R.byteLength;this._requests=[],this._headersReady=Promise.resolve(),F._fullRequestReader=this,this.onProgress=null}_enqueue(F){this._done||(this._requests.length>0?this._requests.shift().resolve({value:F,done:!1}):this._queuedChunks.push(F),this._loaded+=F.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const F=new d.PromiseCapability;return this._requests.push(F),F.promise}cancel(F){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ft{constructor(F,m,U){this._stream=F,this._begin=m,this._end=U,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(F){if(!this._done){if(this._requests.length===0)this._queuedChunk=F;else{this._requests.shift().resolve({value:F,done:!1});for(const U of this._requests)U.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const F=new d.PromiseCapability;return this._requests.push(F),F.promise}cancel(F){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(lt,f,ct)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PDFFetchStream=void 0;var d=ct(1),M=ct(20);function nt(U,j,R){return{method:"GET",headers:U,signal:R.signal,mode:"cors",credentials:j?"include":"same-origin",redirect:"follow"}}function $(U){const j=new Headers;for(const R in U){const E=U[R];E!==void 0&&j.append(R,E)}return j}function ft(U){return U instanceof Uint8Array?U.buffer:U instanceof ArrayBuffer?U:((0,d.warn)(`getArrayBuffer - unexpected data format: ${U}`),new Uint8Array(U).buffer)}class H{constructor(j){this.source=j,this.isHttp=/^https?:/i.test(j.url),this.httpHeaders=this.isHttp&&j.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var j,R;return(R=(j=this._fullRequestReader)==null?void 0:j._loaded)!=null?R:0}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new F(this),this._fullRequestReader}getRangeReader(j,R){if(R<=this._progressiveDataLength)return null;const E=new m(this,j,R);return this._rangeRequestReaders.push(E),E}cancelAllRequests(j){var R;(R=this._fullRequestReader)==null||R.cancel(j);for(const E of this._rangeRequestReaders.slice(0))E.cancel(j)}}f.PDFFetchStream=H;class F{constructor(j){this._stream=j,this._reader=null,this._loaded=0,this._filename=null;const R=j.source;this._withCredentials=R.withCredentials||!1,this._contentLength=R.length,this._headersCapability=new d.PromiseCapability,this._disableRange=R.disableRange||!1,this._rangeChunkSize=R.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!R.disableStream,this._isRangeSupported=!R.disableRange,this._headers=$(this._stream.httpHeaders);const E=R.url;fetch(E,nt(this._headers,this._withCredentials,this._abortController)).then(S=>{if(!(0,M.validateResponseStatus)(S.status))throw(0,M.createResponseStatusError)(S.status,E);this._reader=S.body.getReader(),this._headersCapability.resolve();const p=x=>S.headers.get(x),{allowRangeRequests:_,suggestedLength:T}=(0,M.validateRangeRequestCapabilities)({getResponseHeader:p,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=T||this._contentLength,this._filename=(0,M.extractFilenameFromHeader)(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new d.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;await this._headersCapability.promise;const{value:j,done:R}=await this._reader.read();return R?{value:j,done:R}:(this._loaded+=j.byteLength,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ft(j),done:!1})}cancel(j){var R;(R=this._reader)==null||R.cancel(j),this._abortController.abort()}}class m{constructor(j,R,E){this._stream=j,this._reader=null,this._loaded=0;const S=j.source;this._withCredentials=S.withCredentials||!1,this._readCapability=new d.PromiseCapability,this._isStreamingSupported=!S.disableStream,this._abortController=new AbortController,this._headers=$(this._stream.httpHeaders),this._headers.append("Range",`bytes=${R}-${E-1}`);const p=S.url;fetch(p,nt(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,M.validateResponseStatus)(_.status))throw(0,M.createResponseStatusError)(_.status,p);this._readCapability.resolve(),this._reader=_.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;await this._readCapability.promise;const{value:j,done:R}=await this._reader.read();return R?{value:j,done:R}:(this._loaded+=j.byteLength,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded}),{value:ft(j),done:!1})}cancel(j){var R;(R=this._reader)==null||R.cancel(j),this._abortController.abort()}}},(lt,f,ct)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.createResponseStatusError=H,f.extractFilenameFromHeader=ft,f.validateRangeRequestCapabilities=$,f.validateResponseStatus=F;var d=ct(1),M=ct(21),nt=ct(6);function $({getResponseHeader:m,isHttp:U,rangeChunkSize:j,disableRange:R}){const E={allowRangeRequests:!1,suggestedLength:void 0},S=parseInt(m("Content-Length"),10);return!Number.isInteger(S)||(E.suggestedLength=S,S<=2*j)||R||!U||m("Accept-Ranges")!=="bytes"||(m("Content-Encoding")||"identity")!=="identity"||(E.allowRangeRequests=!0),E}function ft(m){const U=m("Content-Disposition");if(U){let j=(0,M.getFilenameFromContentDispositionHeader)(U);if(j.includes("%"))try{j=decodeURIComponent(j)}catch{}if((0,nt.isPdfFile)(j))return j}return null}function H(m,U){return m===404||m===0&&U.startsWith("file:")?new d.MissingPDFException('Missing PDF "'+U+'".'):new d.UnexpectedResponseException(`Unexpected server response (${m}) while retrieving PDF "${U}".`,m)}function F(m){return m===200||m===206}},(lt,f,ct)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.getFilenameFromContentDispositionHeader=M;var d=ct(1);function M(nt){let $=!0,ft=H("filename\\*","i").exec(nt);if(ft){ft=ft[1];let S=j(ft);return S=unescape(S),S=R(S),S=E(S),m(S)}if(ft=U(nt),ft){const S=E(ft);return m(S)}if(ft=H("filename","i").exec(nt),ft){ft=ft[1];let S=j(ft);return S=E(S),m(S)}function H(S,p){return new RegExp("(?:^|;)\\s*"+S+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function F(S,p){if(S){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const _=new TextDecoder(S,{fatal:!0}),T=(0,d.stringToBytes)(p);p=_.decode(T),$=!1}catch{}}return p}function m(S){return $&&/[\x80-\xff]/.test(S)&&(S=F("utf-8",S),$&&(S=F("iso-8859-1",S))),S}function U(S){const p=[];let _;const T=H("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(_=T.exec(S))!==null;){let[,A,r,o]=_;if(A=parseInt(A,10),A in p){if(A===0)break;continue}p[A]=[r,o]}const x=[];for(let A=0;A<p.length&&A in p;++A){let[r,o]=p[A];o=j(o),r&&(o=unescape(o),A===0&&(o=R(o))),x.push(o)}return x.join("")}function j(S){if(S.startsWith('"')){const p=S.slice(1).split('\\"');for(let _=0;_<p.length;++_){const T=p[_].indexOf('"');T!==-1&&(p[_]=p[_].slice(0,T),p.length=_+1),p[_]=p[_].replaceAll(/\\(.)/g,"$1")}S=p.join('"')}return S}function R(S){const p=S.indexOf("'");if(p===-1)return S;const _=S.slice(0,p),x=S.slice(p+1).replace(/^[^']*'/,"");return F(_,x)}function E(S){return!S.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(S)?S:S.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,_,T,x){if(T==="q"||T==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,r){return String.fromCharCode(parseInt(r,16))}),F(_,x);try{x=atob(x)}catch{}return F(_,x)})}return""}},(lt,f,ct)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PDFNetworkStream=void 0;var d=ct(1),M=ct(20);const nt=200,$=206;function ft(j){const R=j.response;return typeof R!="string"?R:(0,d.stringToBytes)(R).buffer}class H{constructor(R,E={}){this.url=R,this.isHttp=/^https?:/i.test(R),this.httpHeaders=this.isHttp&&E.httpHeaders||Object.create(null),this.withCredentials=E.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(R,E,S){const p={begin:R,end:E};for(const _ in S)p[_]=S[_];return this.request(p)}requestFull(R){return this.request(R)}request(R){const E=new XMLHttpRequest,S=this.currXhrId++,p=this.pendingRequests[S]={xhr:E};E.open("GET",this.url),E.withCredentials=this.withCredentials;for(const _ in this.httpHeaders){const T=this.httpHeaders[_];T!==void 0&&E.setRequestHeader(_,T)}return this.isHttp&&"begin"in R&&"end"in R?(E.setRequestHeader("Range",`bytes=${R.begin}-${R.end-1}`),p.expectedStatus=$):p.expectedStatus=nt,E.responseType="arraybuffer",R.onError&&(E.onerror=function(_){R.onError(E.status)}),E.onreadystatechange=this.onStateChange.bind(this,S),E.onprogress=this.onProgress.bind(this,S),p.onHeadersReceived=R.onHeadersReceived,p.onDone=R.onDone,p.onError=R.onError,p.onProgress=R.onProgress,E.send(null),S}onProgress(R,E){var p;const S=this.pendingRequests[R];!S||(p=S.onProgress)==null||p.call(S,E)}onStateChange(R,E){var A,r,o;const S=this.pendingRequests[R];if(!S)return;const p=S.xhr;if(p.readyState>=2&&S.onHeadersReceived&&(S.onHeadersReceived(),delete S.onHeadersReceived),p.readyState!==4||!(R in this.pendingRequests))return;if(delete this.pendingRequests[R],p.status===0&&this.isHttp){(A=S.onError)==null||A.call(S,p.status);return}const _=p.status||nt;if(!(_===nt&&S.expectedStatus===$)&&_!==S.expectedStatus){(r=S.onError)==null||r.call(S,p.status);return}const x=ft(p);if(_===$){const P=p.getResponseHeader("Content-Range"),g=/bytes (\d+)-(\d+)\/(\d+)/.exec(P);S.onDone({begin:parseInt(g[1],10),chunk:x})}else x?S.onDone({begin:0,chunk:x}):(o=S.onError)==null||o.call(S,p.status)}getRequestXhr(R){return this.pendingRequests[R].xhr}isPendingRequest(R){return R in this.pendingRequests}abortRequest(R){const E=this.pendingRequests[R].xhr;delete this.pendingRequests[R],E.abort()}}class F{constructor(R){this._source=R,this._manager=new H(R.url,{httpHeaders:R.httpHeaders,withCredentials:R.withCredentials}),this._rangeChunkSize=R.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(R){const E=this._rangeRequestReaders.indexOf(R);E>=0&&this._rangeRequestReaders.splice(E,1)}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new m(this._manager,this._source),this._fullRequestReader}getRangeReader(R,E){const S=new U(this._manager,R,E);return S.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(S),S}cancelAllRequests(R){var E;(E=this._fullRequestReader)==null||E.cancel(R);for(const S of this._rangeRequestReaders.slice(0))S.cancel(R)}}f.PDFNetworkStream=F;class m{constructor(R,E){this._manager=R;const S={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._fullRequestId=R.requestFull(S),this._headersReceivedCapability=new d.PromiseCapability,this._disableRange=E.disableRange||!1,this._contentLength=E.length,this._rangeChunkSize=E.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const R=this._fullRequestId,E=this._manager.getRequestXhr(R),S=T=>E.getResponseHeader(T),{allowRangeRequests:p,suggestedLength:_}=(0,M.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});p&&(this._isRangeSupported=!0),this._contentLength=_||this._contentLength,this._filename=(0,M.extractFilenameFromHeader)(S),this._isRangeSupported&&this._manager.abortRequest(R),this._headersReceivedCapability.resolve()}_onDone(R){if(R&&(this._requests.length>0?this._requests.shift().resolve({value:R.chunk,done:!1}):this._cachedChunks.push(R.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(R){this._storedError=(0,M.createResponseStatusError)(R,this._url),this._headersReceivedCapability.reject(this._storedError);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(R){var E;(E=this.onProgress)==null||E.call(this,{loaded:R.loaded,total:R.lengthComputable?R.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const R=new d.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0,this._headersReceivedCapability.reject(R);for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class U{constructor(R,E,S){this._manager=R;const p={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=R.url,this._requestId=R.requestRange(E,S,p),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var R;(R=this.onClosed)==null||R.call(this,this)}_onDone(R){const E=R.chunk;this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunk=E,this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(R){this._storedError=(0,M.createResponseStatusError)(R,this._url);for(const E of this._requests)E.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(R){var E;this.isStreamingSupported||(E=this.onProgress)==null||E.call(this,{loaded:R.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const E=this._queuedChunk;return this._queuedChunk=null,{value:E,done:!1}}if(this._done)return{value:void 0,done:!0};const R=new d.PromiseCapability;return this._requests.push(R),R.promise}cancel(R){this._done=!0;for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(lt,f,ct)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.PDFNodeStream=void 0;var d=ct(1),M=ct(20);const nt=/^file:\/\/\/[a-zA-Z]:\//;function $(S){const p=require$$5,_=p.parse(S);return _.protocol==="file:"||_.host?_:/^[a-z]:[/\\]/i.test(S)?p.parse(`file:///${S}`):(_.host||(_.protocol="file:"),_)}class ft{constructor(p){this.source=p,this.url=$(p.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p,_;return(_=(p=this._fullRequestReader)==null?void 0:p._loaded)!=null?_:0}getFullReader(){return(0,d.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new R(this):new U(this),this._fullRequestReader}getRangeReader(p,_){if(_<=this._progressiveDataLength)return null;const T=this.isFsUrl?new E(this,p,_):new j(this,p,_);return this._rangeRequestReaders.push(T),T}cancelAllRequests(p){var _;(_=this._fullRequestReader)==null||_.cancel(p);for(const T of this._rangeRequestReaders.slice(0))T.cancel(p)}}f.PDFNodeStream=ft;class H{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null;const _=p.source;this._contentLength=_.length,this._loaded=0,this._filename=null,this._disableRange=_.disableRange||!1,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._readableStream=null,this._readCapability=new d.PromiseCapability,this._headersCapability=new d.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var T;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new d.PromiseCapability,this.read()):(this._loaded+=p.length,(T=this.onProgress)==null||T.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",_=>{this._error(_)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new d.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class F{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new d.PromiseCapability;const _=p.source;this._isStreamingSupported=!_.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var T;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new d.PromiseCapability,this.read()):(this._loaded+=p.length,(T=this.onProgress)==null||T.call(this,{loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",_=>{this._error(_)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function m(S,p){return{protocol:S.protocol,auth:S.auth,host:S.hostname,port:S.port,path:S.path,method:"GET",headers:p}}class U extends H{constructor(p){super(p);const _=T=>{if(T.statusCode===404){const o=new d.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o,this._headersCapability.reject(o);return}this._headersCapability.resolve(),this._setReadableStream(T);const x=o=>this._readableStream.headers[o.toLowerCase()],{allowRangeRequests:A,suggestedLength:r}=(0,M.validateRangeRequestCapabilities)({getResponseHeader:x,isHttp:p.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=A,this._contentLength=r||this._contentLength,this._filename=(0,M.extractFilenameFromHeader)(x)};if(this._request=null,this._url.protocol==="http:"){const T=require$$5;this._request=T.request(m(this._url,p.httpHeaders),_)}else{const T=require$$5;this._request=T.request(m(this._url,p.httpHeaders),_)}this._request.on("error",T=>{this._storedError=T,this._headersCapability.reject(T)}),this._request.end()}}class j extends F{constructor(p,_,T){super(p),this._httpHeaders={};for(const A in p.httpHeaders){const r=p.httpHeaders[A];r!==void 0&&(this._httpHeaders[A]=r)}this._httpHeaders.Range=`bytes=${_}-${T-1}`;const x=A=>{if(A.statusCode===404){const r=new d.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=r;return}this._setReadableStream(A)};if(this._request=null,this._url.protocol==="http:"){const A=require$$5;this._request=A.request(m(this._url,this._httpHeaders),x)}else{const A=require$$5;this._request=A.request(m(this._url,this._httpHeaders),x)}this._request.on("error",A=>{this._storedError=A}),this._request.end()}}class R extends H{constructor(p){super(p);let _=decodeURIComponent(this._url.path);nt.test(this._url.href)&&(_=_.replace(/^\//,""));const T=require$$5;T.lstat(_,(x,A)=>{if(x){x.code==="ENOENT"&&(x=new d.MissingPDFException(`Missing PDF "${_}".`)),this._storedError=x,this._headersCapability.reject(x);return}this._contentLength=A.size,this._setReadableStream(T.createReadStream(_)),this._headersCapability.resolve()})}}class E extends F{constructor(p,_,T){super(p);let x=decodeURIComponent(this._url.path);nt.test(this._url.href)&&(x=x.replace(/^\//,""));const A=require$$5;this._setReadableStream(A.createReadStream(x,{start:_,end:T-1}))}}},(lt,f,ct)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.SVGGraphics=void 0;var d=ct(6),M=ct(1);const nt={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},$="http://www.w3.org/XML/1998/namespace",ft="http://www.w3.org/1999/xlink",H=["butt","round","square"],F=["miter","round","bevel"],m=function(A,r="",o=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!o)return URL.createObjectURL(new Blob([A],{type:r}));const P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let g=`data:${r};base64,`;for(let a=0,k=A.length;a<k;a+=3){const v=A[a]&255,z=A[a+1]&255,X=A[a+2]&255,C=v>>2,K=(v&3)<<4|z>>4,rt=a+1<k?(z&15)<<2|X>>6:64,dt=a+2<k?X&63:64;g+=P[C]+P[K]+P[rt]+P[dt]}return g},U=function(){const A=new Uint8Array([137,80,78,71,13,10,26,10]),r=12,o=new Int32Array(256);for(let X=0;X<256;X++){let C=X;for(let K=0;K<8;K++)C=C&1?3988292384^C>>1&2147483647:C>>1&2147483647;o[X]=C}function P(X,C,K){let rt=-1;for(let dt=C;dt<K;dt++){const V=(rt^X[dt])&255,ut=o[V];rt=rt>>>8^ut}return rt^-1}function g(X,C,K,rt){let dt=rt;const V=C.length;K[dt]=V>>24&255,K[dt+1]=V>>16&255,K[dt+2]=V>>8&255,K[dt+3]=V&255,dt+=4,K[dt]=X.charCodeAt(0)&255,K[dt+1]=X.charCodeAt(1)&255,K[dt+2]=X.charCodeAt(2)&255,K[dt+3]=X.charCodeAt(3)&255,dt+=4,K.set(C,dt),dt+=C.length;const ut=P(K,rt+4,dt);K[dt]=ut>>24&255,K[dt+1]=ut>>16&255,K[dt+2]=ut>>8&255,K[dt+3]=ut&255}function a(X,C,K){let rt=1,dt=0;for(let V=C;V<K;++V)rt=(rt+(X[V]&255))%65521,dt=(dt+rt)%65521;return dt<<16|rt}function k(X){if(!M.isNodeJS)return v(X);try{const C=parseInt(process.versions.node)>=8?X:Buffer.from(X),K=require$$5.deflateSync(C,{level:9});return K instanceof Uint8Array?K:new Uint8Array(K)}catch(C){(0,M.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+C)}return v(X)}function v(X){let C=X.length;const K=65535,rt=Math.ceil(C/K),dt=new Uint8Array(2+C+rt*5+4);let V=0;dt[V++]=120,dt[V++]=156;let ut=0;for(;C>K;)dt[V++]=0,dt[V++]=255,dt[V++]=255,dt[V++]=0,dt[V++]=0,dt.set(X.subarray(ut,ut+K),V),V+=K,ut+=K,C-=K;dt[V++]=1,dt[V++]=C&255,dt[V++]=C>>8&255,dt[V++]=~C&65535&255,dt[V++]=(~C&65535)>>8&255,dt.set(X.subarray(ut),V),V+=X.length-ut;const _t=a(X,0,X.length);return dt[V++]=_t>>24&255,dt[V++]=_t>>16&255,dt[V++]=_t>>8&255,dt[V++]=_t&255,dt}function z(X,C,K,rt){const dt=X.width,V=X.height;let ut,_t,xt;const Mt=X.data;switch(C){case M.ImageKind.GRAYSCALE_1BPP:_t=0,ut=1,xt=dt+7>>3;break;case M.ImageKind.RGB_24BPP:_t=2,ut=8,xt=dt*3;break;case M.ImageKind.RGBA_32BPP:_t=6,ut=8,xt=dt*4;break;default:throw new Error("invalid format")}const w=new Uint8Array((1+xt)*V);let i=0,n=0;for(let W=0;W<V;++W)w[i++]=0,w.set(Mt.subarray(n,n+xt),i),n+=xt,i+=xt;if(C===M.ImageKind.GRAYSCALE_1BPP&&rt){i=0;for(let W=0;W<V;W++){i++;for(let it=0;it<xt;it++)w[i++]^=255}}const s=new Uint8Array([dt>>24&255,dt>>16&255,dt>>8&255,dt&255,V>>24&255,V>>16&255,V>>8&255,V&255,ut,_t,0,0,0]),l=k(w),u=A.length+r*3+s.length+l.length,y=new Uint8Array(u);let I=0;return y.set(A,I),I+=A.length,g("IHDR",s,y,I),I+=r+s.length,g("IDATA",l,y,I),I+=r+l.length,g("IEND",new Uint8Array(0),y,I),m(y,"image/png",K)}return function(C,K,rt){const dt=C.kind===void 0?M.ImageKind.GRAYSCALE_1BPP:C.kind;return z(C,dt,K,rt)}}();class j{constructor(){this.fontSizeScale=1,this.fontWeight=nt.fontWeight,this.fontSize=0,this.textMatrix=M.IDENTITY_MATRIX,this.fontMatrix=M.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=M.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=nt.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(r,o){this.x=r,this.y=o}}function R(A){let r=[];const o=[];for(const P of A){if(P.fn==="save"){r.push({fnId:92,fn:"group",items:[]}),o.push(r),r=r.at(-1).items;continue}P.fn==="restore"?r=o.pop():r.push(P)}return r}function E(A){if(Number.isInteger(A))return A.toString();const r=A.toFixed(10);let o=r.length-1;if(r[o]!=="0")return r;do o--;while(r[o]==="0");return r.substring(0,r[o]==="."?o:o+1)}function S(A){if(A[4]===0&&A[5]===0){if(A[1]===0&&A[2]===0)return A[0]===1&&A[3]===1?"":`scale(${E(A[0])} ${E(A[3])})`;if(A[0]===A[3]&&A[1]===-A[2]){const r=Math.acos(A[0])*180/Math.PI;return`rotate(${E(r)})`}}else if(A[0]===1&&A[1]===0&&A[2]===0&&A[3]===1)return`translate(${E(A[4])} ${E(A[5])})`;return`matrix(${E(A[0])} ${E(A[1])} ${E(A[2])} ${E(A[3])} ${E(A[4])} ${E(A[5])})`}let p=0,_=0,T=0;class x{constructor(r,o,P=!1){(0,d.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new d.DOMSVGFactory,this.current=new j,this.transformMatrix=M.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=r,this.objs=o,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!P,this._operatorIdMapping=[];for(const g in M.OPS)this._operatorIdMapping[M.OPS[g]]=g}getObject(r,o=null){return typeof r=="string"?r.startsWith("g_")?this.commonObjs.get(r):this.objs.get(r):o}save(){this.transformStack.push(this.transformMatrix);const r=this.current;this.extraStack.push(r),this.current=r.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(r){this.save(),this.executeOpTree(r),this.restore()}loadDependencies(r){const o=r.fnArray,P=r.argsArray;for(let g=0,a=o.length;g<a;g++)if(o[g]===M.OPS.dependency)for(const k of P[g]){const v=k.startsWith("g_")?this.commonObjs:this.objs,z=new Promise(X=>{v.get(k,X)});this.current.dependencies.push(z)}return Promise.all(this.current.dependencies)}transform(r,o,P,g,a,k){const v=[r,o,P,g,a,k];this.transformMatrix=M.Util.transform(this.transformMatrix,v),this.tgrp=null}getSVG(r,o){this.viewport=o;const P=this._initialize(o);return this.loadDependencies(r).then(()=>(this.transformMatrix=M.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(r)),P))}convertOpList(r){const o=this._operatorIdMapping,P=r.argsArray,g=r.fnArray,a=[];for(let k=0,v=g.length;k<v;k++){const z=g[k];a.push({fnId:z,fn:o[z],args:P[k]})}return R(a)}executeOpTree(r){for(const o of r){const P=o.fn,g=o.fnId,a=o.args;switch(g|0){case M.OPS.beginText:this.beginText();break;case M.OPS.dependency:break;case M.OPS.setLeading:this.setLeading(a);break;case M.OPS.setLeadingMoveText:this.setLeadingMoveText(a[0],a[1]);break;case M.OPS.setFont:this.setFont(a);break;case M.OPS.showText:this.showText(a[0]);break;case M.OPS.showSpacedText:this.showText(a[0]);break;case M.OPS.endText:this.endText();break;case M.OPS.moveText:this.moveText(a[0],a[1]);break;case M.OPS.setCharSpacing:this.setCharSpacing(a[0]);break;case M.OPS.setWordSpacing:this.setWordSpacing(a[0]);break;case M.OPS.setHScale:this.setHScale(a[0]);break;case M.OPS.setTextMatrix:this.setTextMatrix(a[0],a[1],a[2],a[3],a[4],a[5]);break;case M.OPS.setTextRise:this.setTextRise(a[0]);break;case M.OPS.setTextRenderingMode:this.setTextRenderingMode(a[0]);break;case M.OPS.setLineWidth:this.setLineWidth(a[0]);break;case M.OPS.setLineJoin:this.setLineJoin(a[0]);break;case M.OPS.setLineCap:this.setLineCap(a[0]);break;case M.OPS.setMiterLimit:this.setMiterLimit(a[0]);break;case M.OPS.setFillRGBColor:this.setFillRGBColor(a[0],a[1],a[2]);break;case M.OPS.setStrokeRGBColor:this.setStrokeRGBColor(a[0],a[1],a[2]);break;case M.OPS.setStrokeColorN:this.setStrokeColorN(a);break;case M.OPS.setFillColorN:this.setFillColorN(a);break;case M.OPS.shadingFill:this.shadingFill(a[0]);break;case M.OPS.setDash:this.setDash(a[0],a[1]);break;case M.OPS.setRenderingIntent:this.setRenderingIntent(a[0]);break;case M.OPS.setFlatness:this.setFlatness(a[0]);break;case M.OPS.setGState:this.setGState(a[0]);break;case M.OPS.fill:this.fill();break;case M.OPS.eoFill:this.eoFill();break;case M.OPS.stroke:this.stroke();break;case M.OPS.fillStroke:this.fillStroke();break;case M.OPS.eoFillStroke:this.eoFillStroke();break;case M.OPS.clip:this.clip("nonzero");break;case M.OPS.eoClip:this.clip("evenodd");break;case M.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case M.OPS.paintImageXObject:this.paintImageXObject(a[0]);break;case M.OPS.paintInlineImageXObject:this.paintInlineImageXObject(a[0]);break;case M.OPS.paintImageMaskXObject:this.paintImageMaskXObject(a[0]);break;case M.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(a[0],a[1]);break;case M.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case M.OPS.closePath:this.closePath();break;case M.OPS.closeStroke:this.closeStroke();break;case M.OPS.closeFillStroke:this.closeFillStroke();break;case M.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case M.OPS.nextLine:this.nextLine();break;case M.OPS.transform:this.transform(a[0],a[1],a[2],a[3],a[4],a[5]);break;case M.OPS.constructPath:this.constructPath(a[0],a[1]);break;case M.OPS.endPath:this.endPath();break;case 92:this.group(o.items);break;default:(0,M.warn)(`Unimplemented operator ${P}`);break}}}setWordSpacing(r){this.current.wordSpacing=r}setCharSpacing(r){this.current.charSpacing=r}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(r,o,P,g,a,k){const v=this.current;v.textMatrix=v.lineMatrix=[r,o,P,g,a,k],v.textMatrixScale=Math.hypot(r,o),v.x=v.lineX=0,v.y=v.lineY=0,v.xcoords=[],v.ycoords=[],v.tspan=this.svgFactory.createElement("svg:tspan"),v.tspan.setAttributeNS(null,"font-family",v.fontFamily),v.tspan.setAttributeNS(null,"font-size",`${E(v.fontSize)}px`),v.tspan.setAttributeNS(null,"y",E(-v.y)),v.txtElement=this.svgFactory.createElement("svg:text"),v.txtElement.append(v.tspan)}beginText(){const r=this.current;r.x=r.lineX=0,r.y=r.lineY=0,r.textMatrix=M.IDENTITY_MATRIX,r.lineMatrix=M.IDENTITY_MATRIX,r.textMatrixScale=1,r.tspan=this.svgFactory.createElement("svg:tspan"),r.txtElement=this.svgFactory.createElement("svg:text"),r.txtgrp=this.svgFactory.createElement("svg:g"),r.xcoords=[],r.ycoords=[]}moveText(r,o){const P=this.current;P.x=P.lineX+=r,P.y=P.lineY+=o,P.xcoords=[],P.ycoords=[],P.tspan=this.svgFactory.createElement("svg:tspan"),P.tspan.setAttributeNS(null,"font-family",P.fontFamily),P.tspan.setAttributeNS(null,"font-size",`${E(P.fontSize)}px`),P.tspan.setAttributeNS(null,"y",E(-P.y))}showText(r){const o=this.current,P=o.font,g=o.fontSize;if(g===0)return;const a=o.fontSizeScale,k=o.charSpacing,v=o.wordSpacing,z=o.fontDirection,X=o.textHScale*z,C=P.vertical,K=C?1:-1,rt=P.defaultVMetrics,dt=g*o.fontMatrix[0];let V=0;for(const xt of r){if(xt===null){V+=z*v;continue}else if(typeof xt=="number"){V+=K*xt*g/1e3;continue}const Mt=(xt.isSpace?v:0)+k,w=xt.fontChar;let i,n,s=xt.width;if(C){let u;const y=xt.vmetric||rt;u=xt.vmetric?y[1]:s*.5,u=-u*dt;const I=y[2]*dt;s=y?-y[0]:s,i=u/a,n=(V+I)/a}else i=V/a,n=0;(xt.isInFont||P.missingFile)&&(o.xcoords.push(o.x+i),C&&o.ycoords.push(-o.y+n),o.tspan.textContent+=w);const l=C?s*dt-Mt*z:s*dt+Mt*z;V+=l}o.tspan.setAttributeNS(null,"x",o.xcoords.map(E).join(" ")),C?o.tspan.setAttributeNS(null,"y",o.ycoords.map(E).join(" ")):o.tspan.setAttributeNS(null,"y",E(-o.y)),C?o.y-=V:o.x+=V*X,o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${E(o.fontSize)}px`),o.fontStyle!==nt.fontStyle&&o.tspan.setAttributeNS(null,"font-style",o.fontStyle),o.fontWeight!==nt.fontWeight&&o.tspan.setAttributeNS(null,"font-weight",o.fontWeight);const ut=o.textRenderingMode&M.TextRenderingMode.FILL_STROKE_MASK;if(ut===M.TextRenderingMode.FILL||ut===M.TextRenderingMode.FILL_STROKE?(o.fillColor!==nt.fillColor&&o.tspan.setAttributeNS(null,"fill",o.fillColor),o.fillAlpha<1&&o.tspan.setAttributeNS(null,"fill-opacity",o.fillAlpha)):o.textRenderingMode===M.TextRenderingMode.ADD_TO_PATH?o.tspan.setAttributeNS(null,"fill","transparent"):o.tspan.setAttributeNS(null,"fill","none"),ut===M.TextRenderingMode.STROKE||ut===M.TextRenderingMode.FILL_STROKE){const xt=1/(o.textMatrixScale||1);this._setStrokeAttributes(o.tspan,xt)}let _t=o.textMatrix;o.textRise!==0&&(_t=_t.slice(),_t[5]+=o.textRise),o.txtElement.setAttributeNS(null,"transform",`${S(_t)} scale(${E(X)}, -1)`),o.txtElement.setAttributeNS($,"xml:space","preserve"),o.txtElement.append(o.tspan),o.txtgrp.append(o.txtElement),this._ensureTransformGroup().append(o.txtElement)}setLeadingMoveText(r,o){this.setLeading(-o),this.moveText(r,o)}addFontStyle(r){if(!r.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const o=m(r.data,r.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${r.loadedName}"; src: url(${o}); }
`}setFont(r){const o=this.current,P=this.commonObjs.get(r[0]);let g=r[1];o.font=P,this.embedFonts&&!P.missingFile&&!this.embeddedFonts[P.loadedName]&&(this.addFontStyle(P),this.embeddedFonts[P.loadedName]=P),o.fontMatrix=P.fontMatrix||M.FONT_IDENTITY_MATRIX;let a="normal";P.black?a="900":P.bold&&(a="bold");const k=P.italic?"italic":"normal";g<0?(g=-g,o.fontDirection=-1):o.fontDirection=1,o.fontSize=g,o.fontFamily=P.loadedName,o.fontWeight=a,o.fontStyle=k,o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"y",E(-o.y)),o.xcoords=[],o.ycoords=[]}endText(){var o;const r=this.current;r.textRenderingMode&M.TextRenderingMode.ADD_TO_PATH_FLAG&&((o=r.txtElement)==null?void 0:o.hasChildNodes())&&(r.element=r.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(r){r>0&&(this.current.lineWidth=r)}setLineCap(r){this.current.lineCap=H[r]}setLineJoin(r){this.current.lineJoin=F[r]}setMiterLimit(r){this.current.miterLimit=r}setStrokeAlpha(r){this.current.strokeAlpha=r}setStrokeRGBColor(r,o,P){this.current.strokeColor=M.Util.makeHexColor(r,o,P)}setFillAlpha(r){this.current.fillAlpha=r}setFillRGBColor(r,o,P){this.current.fillColor=M.Util.makeHexColor(r,o,P),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(r){this.current.strokeColor=this._makeColorN_Pattern(r)}setFillColorN(r){this.current.fillColor=this._makeColorN_Pattern(r)}shadingFill(r){const{width:o,height:P}=this.viewport,g=M.Util.inverseTransform(this.transformMatrix),[a,k,v,z]=M.Util.getAxialAlignedBoundingBox([0,0,o,P],g),X=this.svgFactory.createElement("svg:rect");X.setAttributeNS(null,"x",a),X.setAttributeNS(null,"y",k),X.setAttributeNS(null,"width",v-a),X.setAttributeNS(null,"height",z-k),X.setAttributeNS(null,"fill",this._makeShadingPattern(r)),this.current.fillAlpha<1&&X.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(X)}_makeColorN_Pattern(r){return r[0]==="TilingPattern"?this._makeTilingPattern(r):this._makeShadingPattern(r)}_makeTilingPattern(r){const o=r[1],P=r[2],g=r[3]||M.IDENTITY_MATRIX,[a,k,v,z]=r[4],X=r[5],C=r[6],K=r[7],rt=`shading${T++}`,[dt,V,ut,_t]=M.Util.normalizeRect([...M.Util.applyTransform([a,k],g),...M.Util.applyTransform([v,z],g)]),[xt,Mt]=M.Util.singularValueDecompose2dScale(g),w=X*xt,i=C*Mt,n=this.svgFactory.createElement("svg:pattern");n.setAttributeNS(null,"id",rt),n.setAttributeNS(null,"patternUnits","userSpaceOnUse"),n.setAttributeNS(null,"width",w),n.setAttributeNS(null,"height",i),n.setAttributeNS(null,"x",`${dt}`),n.setAttributeNS(null,"y",`${V}`);const s=this.svg,l=this.transformMatrix,u=this.current.fillColor,y=this.current.strokeColor,I=this.svgFactory.create(ut-dt,_t-V);if(this.svg=I,this.transformMatrix=g,K===2){const W=M.Util.makeHexColor(...o);this.current.fillColor=W,this.current.strokeColor=W}return this.executeOpTree(this.convertOpList(P)),this.svg=s,this.transformMatrix=l,this.current.fillColor=u,this.current.strokeColor=y,n.append(I.childNodes[0]),this.defs.append(n),`url(#${rt})`}_makeShadingPattern(r){switch(typeof r=="string"&&(r=this.objs.get(r)),r[0]){case"RadialAxial":const o=`shading${T++}`,P=r[3];let g;switch(r[1]){case"axial":const a=r[4],k=r[5];g=this.svgFactory.createElement("svg:linearGradient"),g.setAttributeNS(null,"id",o),g.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),g.setAttributeNS(null,"x1",a[0]),g.setAttributeNS(null,"y1",a[1]),g.setAttributeNS(null,"x2",k[0]),g.setAttributeNS(null,"y2",k[1]);break;case"radial":const v=r[4],z=r[5],X=r[6],C=r[7];g=this.svgFactory.createElement("svg:radialGradient"),g.setAttributeNS(null,"id",o),g.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),g.setAttributeNS(null,"cx",z[0]),g.setAttributeNS(null,"cy",z[1]),g.setAttributeNS(null,"r",C),g.setAttributeNS(null,"fx",v[0]),g.setAttributeNS(null,"fy",v[1]),g.setAttributeNS(null,"fr",X);break;default:throw new Error(`Unknown RadialAxial type: ${r[1]}`)}for(const a of P){const k=this.svgFactory.createElement("svg:stop");k.setAttributeNS(null,"offset",a[0]),k.setAttributeNS(null,"stop-color",a[1]),g.append(k)}return this.defs.append(g),`url(#${o})`;case"Mesh":return(0,M.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${r[0]}`)}}setDash(r,o){this.current.dashArray=r,this.current.dashPhase=o}constructPath(r,o){const P=this.current;let g=P.x,a=P.y,k=[],v=0;for(const z of r)switch(z|0){case M.OPS.rectangle:g=o[v++],a=o[v++];const X=o[v++],C=o[v++],K=g+X,rt=a+C;k.push("M",E(g),E(a),"L",E(K),E(a),"L",E(K),E(rt),"L",E(g),E(rt),"Z");break;case M.OPS.moveTo:g=o[v++],a=o[v++],k.push("M",E(g),E(a));break;case M.OPS.lineTo:g=o[v++],a=o[v++],k.push("L",E(g),E(a));break;case M.OPS.curveTo:g=o[v+4],a=o[v+5],k.push("C",E(o[v]),E(o[v+1]),E(o[v+2]),E(o[v+3]),E(g),E(a)),v+=6;break;case M.OPS.curveTo2:k.push("C",E(g),E(a),E(o[v]),E(o[v+1]),E(o[v+2]),E(o[v+3])),g=o[v+2],a=o[v+3],v+=4;break;case M.OPS.curveTo3:g=o[v+2],a=o[v+3],k.push("C",E(o[v]),E(o[v+1]),E(g),E(a),E(g),E(a)),v+=4;break;case M.OPS.closePath:k.push("Z");break}k=k.join(" "),P.path&&r.length>0&&r[0]!==M.OPS.rectangle&&r[0]!==M.OPS.moveTo?k=P.path.getAttributeNS(null,"d")+k:(P.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(P.path)),P.path.setAttributeNS(null,"d",k),P.path.setAttributeNS(null,"fill","none"),P.element=P.path,P.setCurrentPoint(g,a)}endPath(){const r=this.current;if(r.path=null,!this.pendingClip)return;if(!r.element){this.pendingClip=null;return}const o=`clippath${p++}`,P=this.svgFactory.createElement("svg:clipPath");P.setAttributeNS(null,"id",o),P.setAttributeNS(null,"transform",S(this.transformMatrix));const g=r.element.cloneNode(!0);if(this.pendingClip==="evenodd"?g.setAttributeNS(null,"clip-rule","evenodd"):g.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,P.append(g),this.defs.append(P),r.activeClipUrl){r.clipGroup=null;for(const a of this.extraStack)a.clipGroup=null;P.setAttributeNS(null,"clip-path",r.activeClipUrl)}r.activeClipUrl=`url(#${o})`,this.tgrp=null}clip(r){this.pendingClip=r}closePath(){const r=this.current;if(r.path){const o=`${r.path.getAttributeNS(null,"d")}Z`;r.path.setAttributeNS(null,"d",o)}}setLeading(r){this.current.leading=-r}setTextRise(r){this.current.textRise=r}setTextRenderingMode(r){this.current.textRenderingMode=r}setHScale(r){this.current.textHScale=r/100}setRenderingIntent(r){}setFlatness(r){}setGState(r){for(const[o,P]of r)switch(o){case"LW":this.setLineWidth(P);break;case"LC":this.setLineCap(P);break;case"LJ":this.setLineJoin(P);break;case"ML":this.setMiterLimit(P);break;case"D":this.setDash(P[0],P[1]);break;case"RI":this.setRenderingIntent(P);break;case"FL":this.setFlatness(P);break;case"Font":this.setFont(P);break;case"CA":this.setStrokeAlpha(P);break;case"ca":this.setFillAlpha(P);break;default:(0,M.warn)(`Unimplemented graphic state operator ${o}`);break}}fill(){const r=this.current;r.element&&(r.element.setAttributeNS(null,"fill",r.fillColor),r.element.setAttributeNS(null,"fill-opacity",r.fillAlpha),this.endPath())}stroke(){const r=this.current;r.element&&(this._setStrokeAttributes(r.element),r.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(r,o=1){const P=this.current;let g=P.dashArray;o!==1&&g.length>0&&(g=g.map(function(a){return o*a})),r.setAttributeNS(null,"stroke",P.strokeColor),r.setAttributeNS(null,"stroke-opacity",P.strokeAlpha),r.setAttributeNS(null,"stroke-miterlimit",E(P.miterLimit)),r.setAttributeNS(null,"stroke-linecap",P.lineCap),r.setAttributeNS(null,"stroke-linejoin",P.lineJoin),r.setAttributeNS(null,"stroke-width",E(o*P.lineWidth)+"px"),r.setAttributeNS(null,"stroke-dasharray",g.map(E).join(" ")),r.setAttributeNS(null,"stroke-dashoffset",E(o*P.dashPhase)+"px")}eoFill(){var r;(r=this.current.element)==null||r.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var r;(r=this.current.element)==null||r.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"width","1px"),r.setAttributeNS(null,"height","1px"),r.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(r)}paintImageXObject(r){const o=this.getObject(r);if(!o){(0,M.warn)(`Dependent image with object ID ${r} is not ready yet`);return}this.paintInlineImageXObject(o)}paintInlineImageXObject(r,o){const P=r.width,g=r.height,a=U(r,this.forceDataSchema,!!o),k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y","0"),k.setAttributeNS(null,"width",E(P)),k.setAttributeNS(null,"height",E(g)),this.current.element=k,this.clip("nonzero");const v=this.svgFactory.createElement("svg:image");v.setAttributeNS(ft,"xlink:href",a),v.setAttributeNS(null,"x","0"),v.setAttributeNS(null,"y",E(-g)),v.setAttributeNS(null,"width",E(P)+"px"),v.setAttributeNS(null,"height",E(g)+"px"),v.setAttributeNS(null,"transform",`scale(${E(1/P)} ${E(-1/g)})`),o?o.append(v):this._ensureTransformGroup().append(v)}paintImageMaskXObject(r){const o=this.getObject(r.data,r);if(o.bitmap){(0,M.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const P=this.current,g=o.width,a=o.height,k=P.fillColor;P.maskId=`mask${_++}`;const v=this.svgFactory.createElement("svg:mask");v.setAttributeNS(null,"id",P.maskId);const z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x","0"),z.setAttributeNS(null,"y","0"),z.setAttributeNS(null,"width",E(g)),z.setAttributeNS(null,"height",E(a)),z.setAttributeNS(null,"fill",k),z.setAttributeNS(null,"mask",`url(#${P.maskId})`),this.defs.append(v),this._ensureTransformGroup().append(z),this.paintInlineImageXObject(o,v)}paintFormXObjectBegin(r,o){if(Array.isArray(r)&&r.length===6&&this.transform(r[0],r[1],r[2],r[3],r[4],r[5]),o){const P=o[2]-o[0],g=o[3]-o[1],a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x",o[0]),a.setAttributeNS(null,"y",o[1]),a.setAttributeNS(null,"width",E(P)),a.setAttributeNS(null,"height",E(g)),this.current.element=a,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(r){const o=this.svgFactory.create(r.width,r.height),P=this.svgFactory.createElement("svg:defs");o.append(P),this.defs=P;const g=this.svgFactory.createElement("svg:g");return g.setAttributeNS(null,"transform",S(r.transform)),o.append(g),this.svg=g,o}_ensureClipGroup(){if(!this.current.clipGroup){const r=this.svgFactory.createElement("svg:g");r.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(r),this.current.clipGroup=r}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",S(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}f.SVGGraphics=x},(lt,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.XfaText=void 0;class ct{static textContent(M){const nt=[],$={items:nt,styles:Object.create(null)};function ft(H){var U;if(!H)return;let F=null;const m=H.name;if(m==="#text")F=H.value;else if(ct.shouldBuildText(m))(U=H==null?void 0:H.attributes)!=null&&U.textContent?F=H.attributes.textContent:H.value&&(F=H.value);else return;if(F!==null&&nt.push({str:F}),!!H.children)for(const j of H.children)ft(j)}return ft(M),$}static shouldBuildText(M){return!(M==="textarea"||M==="input"||M==="option"||M==="select")}}f.XfaText=ct},(lt,f,ct)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.TextLayerRenderTask=void 0,f.renderTextLayer=S,f.updateTextLayer=p;var d=ct(1),M=ct(6);const nt=1e5,$=30,ft=.8,H=new Map;function F(_,T){let x;if(T&&d.FeatureTest.isOffscreenCanvasSupported)x=new OffscreenCanvas(_,_).getContext("2d",{alpha:!1});else{const A=document.createElement("canvas");A.width=A.height=_,x=A.getContext("2d",{alpha:!1})}return x}function m(_,T){const x=H.get(_);if(x)return x;const A=F($,T);A.font=`${$}px ${_}`;const r=A.measureText("");let o=r.fontBoundingBoxAscent,P=Math.abs(r.fontBoundingBoxDescent);if(o){const a=o/(o+P);return H.set(_,a),A.canvas.width=A.canvas.height=0,a}A.strokeStyle="red",A.clearRect(0,0,$,$),A.strokeText("g",0,0);let g=A.getImageData(0,0,$,$).data;P=0;for(let a=g.length-1-3;a>=0;a-=4)if(g[a]>0){P=Math.ceil(a/4/$);break}A.clearRect(0,0,$,$),A.strokeText("A",0,$),g=A.getImageData(0,0,$,$).data,o=0;for(let a=0,k=g.length;a<k;a+=4)if(g[a]>0){o=$-Math.floor(a/4/$);break}if(A.canvas.width=A.canvas.height=0,o){const a=o/(o+P);return H.set(_,a),a}return H.set(_,ft),ft}function U(_,T,x){const A=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:T.str!=="",hasEOL:T.hasEOL,fontSize:0};_._textDivs.push(A);const o=d.Util.transform(_._transform,T.transform);let P=Math.atan2(o[1],o[0]);const g=x[T.fontName];g.vertical&&(P+=Math.PI/2);const a=Math.hypot(o[2],o[3]),k=a*m(g.fontFamily,_._isOffscreenCanvasSupported);let v,z;P===0?(v=o[4],z=o[5]-k):(v=o[4]+k*Math.sin(P),z=o[5]-k*Math.cos(P));const X="calc(var(--scale-factor)*",C=A.style;_._container===_._rootContainer?(C.left=`${(100*v/_._pageWidth).toFixed(2)}%`,C.top=`${(100*z/_._pageHeight).toFixed(2)}%`):(C.left=`${X}${v.toFixed(2)}px)`,C.top=`${X}${z.toFixed(2)}px)`),C.fontSize=`${X}${a.toFixed(2)}px)`,C.fontFamily=g.fontFamily,r.fontSize=a,A.setAttribute("role","presentation"),A.textContent=T.str,A.dir=T.dir,_._fontInspectorEnabled&&(A.dataset.fontName=T.fontName),P!==0&&(r.angle=P*(180/Math.PI));let K=!1;if(T.str.length>1)K=!0;else if(T.str!==" "&&T.transform[0]!==T.transform[3]){const rt=Math.abs(T.transform[0]),dt=Math.abs(T.transform[3]);rt!==dt&&Math.max(rt,dt)/Math.min(rt,dt)>1.5&&(K=!0)}K&&(r.canvasWidth=g.vertical?T.height:T.width),_._textDivProperties.set(A,r),_._isReadableStream&&_._layoutText(A)}function j(_){const{div:T,scale:x,properties:A,ctx:r,prevFontSize:o,prevFontFamily:P}=_,{style:g}=T;let a="";if(A.canvasWidth!==0&&A.hasText){const{fontFamily:k}=g,{canvasWidth:v,fontSize:z}=A;(o!==z||P!==k)&&(r.font=`${z*x}px ${k}`,_.prevFontSize=z,_.prevFontFamily=k);const{width:X}=r.measureText(T.textContent);X>0&&(a=`scaleX(${v*x/X})`)}A.angle!==0&&(a=`rotate(${A.angle}deg) ${a}`),a.length>0&&(g.transform=a)}function R(_){if(_._canceled)return;const T=_._textDivs,x=_._capability;if(T.length>nt){x.resolve();return}if(!_._isReadableStream)for(const r of T)_._layoutText(r);x.resolve()}class E{constructor({textContentSource:T,container:x,viewport:A,textDivs:r,textDivProperties:o,textContentItemsStr:P,isOffscreenCanvasSupported:g}){var X;this._textContentSource=T,this._isReadableStream=T instanceof ReadableStream,this._container=this._rootContainer=x,this._textDivs=r||[],this._textContentItemsStr=P||[],this._isOffscreenCanvasSupported=g,this._fontInspectorEnabled=!!((X=globalThis.FontInspector)!=null&&X.enabled),this._reader=null,this._textDivProperties=o||new WeakMap,this._canceled=!1,this._capability=new d.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:A.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:F(0,g)};const{pageWidth:a,pageHeight:k,pageX:v,pageY:z}=A.rawDims;this._transform=[1,0,0,-1,-v,z+k],this._pageWidth=a,this._pageHeight=k,(0,M.setLayerDimensions)(x,A),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new d.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new d.AbortException("TextLayer task cancelled."))}_processItems(T,x){for(const A of T){if(A.str===void 0){if(A.type==="beginMarkedContentProps"||A.type==="beginMarkedContent"){const r=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),A.id!==null&&this._container.setAttribute("id",`${A.id}`),r.append(this._container)}else A.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(A.str),U(this,A,x)}}_layoutText(T){const x=this._layoutTextParams.properties=this._textDivProperties.get(T);if(this._layoutTextParams.div=T,j(this._layoutTextParams),x.hasText&&this._container.append(T),x.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),this._container.append(A)}}_render(){const T=new d.PromiseCapability;let x=Object.create(null);if(this._isReadableStream){const A=()=>{this._reader.read().then(({value:r,done:o})=>{if(o){T.resolve();return}Object.assign(x,r.styles),this._processItems(r.items,x),A()},T.reject)};this._reader=this._textContentSource.getReader(),A()}else if(this._textContentSource){const{items:A,styles:r}=this._textContentSource;this._processItems(A,r),T.resolve()}else throw new Error('No "textContentSource" parameter specified.');T.promise.then(()=>{x=null,R(this)},this._capability.reject)}}f.TextLayerRenderTask=E;function S(_){!_.textContentSource&&(_.textContent||_.textContentStream)&&((0,M.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),_.textContentSource=_.textContent||_.textContentStream);const{container:T,viewport:x}=_,A=getComputedStyle(T),r=A.getPropertyValue("visibility"),o=parseFloat(A.getPropertyValue("--scale-factor"));r==="visible"&&(!o||Math.abs(o-x.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const P=new E(_);return P._render(),P}function p({container:_,viewport:T,textDivs:x,textDivProperties:A,isOffscreenCanvasSupported:r,mustRotate:o=!0,mustRescale:P=!0}){if(o&&(0,M.setLayerDimensions)(_,{rotation:T.rotation}),P){const g=F(0,r),k={prevFontSize:null,prevFontFamily:null,div:null,scale:T.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:g};for(const v of x)k.properties=A.get(v),k.div=v,j(k)}}},(lt,f,ct)=>{var m,U,j,R,E,S,p,_,T,x,A,si,o,Re,g,ni,k,ri;Object.defineProperty(f,"__esModule",{value:!0}),f.AnnotationEditorLayer=void 0;var d=ct(1),M=ct(4),nt=ct(28),$=ct(33),ft=ct(6),H=ct(34);const z=class{constructor({uiManager:C,pageIndex:K,div:rt,accessibilityManager:dt,annotationLayer:V,viewport:ut,l10n:_t}){B(this,A);B(this,o);B(this,g);B(this,k);B(this,m,void 0);B(this,U,!1);B(this,j,null);B(this,R,this.pointerup.bind(this));B(this,E,this.pointerdown.bind(this));B(this,S,new Map);B(this,p,!1);B(this,_,!1);B(this,T,!1);B(this,x,void 0);const xt=[nt.FreeTextEditor,$.InkEditor,H.StampEditor];if(!z._initialized){z._initialized=!0;for(const Mt of xt)Mt.initialize(_t)}C.registerEditorTypes(xt),st(this,x,C),this.pageIndex=K,this.div=rt,st(this,m,dt),st(this,j,V),this.viewport=ut,t(this,x).addLayer(this)}get isEmpty(){return t(this,S).size===0}updateToolbar(C){t(this,x).updateToolbar(C)}updateMode(C=t(this,x).getMode()){q(this,k,ri).call(this),C===d.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),C!==d.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",C===d.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",C===d.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",C===d.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(C){if(!C&&t(this,x).getMode()!==d.AnnotationEditorType.INK)return;if(!C){for(const rt of t(this,S).values())if(rt.isEmpty()){rt.setInBackground();return}}q(this,o,Re).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(C){t(this,x).setEditingState(C)}addCommands(C){t(this,x).addCommands(C)}enable(){this.div.style.pointerEvents="auto";const C=new Set;for(const rt of t(this,S).values())rt.enableEditing(),rt.annotationElementId&&C.add(rt.annotationElementId);if(!t(this,j))return;const K=t(this,j).getEditableAnnotations();for(const rt of K){if(rt.hide(),t(this,x).isDeletedAnnotationElement(rt.data.id)||C.has(rt.data.id))continue;const dt=this.deserialize(rt);!dt||(this.addOrRebuild(dt),dt.enableEditing())}}disable(){var K;st(this,T,!0),this.div.style.pointerEvents="none";const C=new Set;for(const rt of t(this,S).values()){if(rt.disableEditing(),!rt.annotationElementId||rt.serialize()!==null){C.add(rt.annotationElementId);continue}(K=this.getEditableAnnotation(rt.annotationElementId))==null||K.show(),rt.remove()}if(t(this,j)){const rt=t(this,j).getEditableAnnotations();for(const dt of rt){const{id:V}=dt.data;C.has(V)||t(this,x).isDeletedAnnotationElement(V)||dt.show()}}q(this,k,ri).call(this),this.isEmpty&&(this.div.hidden=!0),st(this,T,!1)}getEditableAnnotation(C){var K;return((K=t(this,j))==null?void 0:K.getEditableAnnotation(C))||null}setActiveEditor(C){t(this,x).getActive()!==C&&t(this,x).setActiveEditor(C)}enableClick(){this.div.addEventListener("pointerdown",t(this,E)),this.div.addEventListener("pointerup",t(this,R))}disableClick(){this.div.removeEventListener("pointerdown",t(this,E)),this.div.removeEventListener("pointerup",t(this,R))}attach(C){t(this,S).set(C.id,C);const{annotationElementId:K}=C;K&&t(this,x).isDeletedAnnotationElement(K)&&t(this,x).removeDeletedAnnotationElement(C)}detach(C){var K;t(this,S).delete(C.id),(K=t(this,m))==null||K.removePointerInTextLayer(C.contentDiv),!t(this,T)&&C.annotationElementId&&t(this,x).addDeletedAnnotationElement(C)}remove(C){this.detach(C),t(this,x).removeEditor(C),C.div.contains(document.activeElement)&&setTimeout(()=>{t(this,x).focusMainContainer()},0),C.div.remove(),C.isAttachedToDOM=!1,t(this,_)||this.addInkEditorIfNeeded(!1)}changeParent(C){var K;C.parent!==this&&(C.annotationElementId&&(t(this,x).addDeletedAnnotationElement(C.annotationElementId),M.AnnotationEditor.deleteAnnotationElement(C),C.annotationElementId=null),this.attach(C),(K=C.parent)==null||K.detach(C),C.setParent(this),C.div&&C.isAttachedToDOM&&(C.div.remove(),this.div.append(C.div)))}add(C){if(this.changeParent(C),t(this,x).addEditor(C),this.attach(C),!C.isAttachedToDOM){const K=C.render();this.div.append(K),C.isAttachedToDOM=!0}C.fixAndSetPosition(),C.onceAdded(),t(this,x).addToAnnotationStorage(C)}moveEditorInDOM(C){var rt;if(!C.isAttachedToDOM)return;const{activeElement:K}=document;C.div.contains(K)&&(C._focusEventsAllowed=!1,setTimeout(()=>{C.div.contains(document.activeElement)?C._focusEventsAllowed=!0:(C.div.addEventListener("focusin",()=>{C._focusEventsAllowed=!0},{once:!0}),K.focus())},0)),C._structTreeParentId=(rt=t(this,m))==null?void 0:rt.moveElementInDOM(this.div,C.div,C.contentDiv,!0)}addOrRebuild(C){C.needsToBeRebuilt()?C.rebuild():this.add(C)}addUndoableEditor(C){const K=()=>C._uiManager.rebuild(C),rt=()=>{C.remove()};this.addCommands({cmd:K,undo:rt,mustExec:!1})}getNextId(){return t(this,x).getId()}pasteEditor(C,K){t(this,x).updateToolbar(C),t(this,x).updateMode(C);const{offsetX:rt,offsetY:dt}=q(this,g,ni).call(this),V=this.getNextId(),ut=q(this,A,si).call(this,{parent:this,id:V,x:rt,y:dt,uiManager:t(this,x),isCentered:!0,...K});ut&&this.add(ut)}deserialize(C){var K;switch((K=C.annotationType)!=null?K:C.annotationEditorType){case d.AnnotationEditorType.FREETEXT:return nt.FreeTextEditor.deserialize(C,this,t(this,x));case d.AnnotationEditorType.INK:return $.InkEditor.deserialize(C,this,t(this,x));case d.AnnotationEditorType.STAMP:return H.StampEditor.deserialize(C,this,t(this,x))}return null}addNewEditor(){q(this,o,Re).call(this,q(this,g,ni).call(this),!0)}setSelected(C){t(this,x).setSelected(C)}toggleSelected(C){t(this,x).toggleSelected(C)}isSelected(C){return t(this,x).isSelected(C)}unselect(C){t(this,x).unselect(C)}pointerup(C){const{isMac:K}=d.FeatureTest.platform;if(!(C.button!==0||C.ctrlKey&&K)&&C.target===this.div&&!!t(this,p)){if(st(this,p,!1),!t(this,U)){st(this,U,!0);return}if(t(this,x).getMode()===d.AnnotationEditorType.STAMP){t(this,x).unselectAll();return}q(this,o,Re).call(this,C,!1)}}pointerdown(C){if(t(this,p)){st(this,p,!1);return}const{isMac:K}=d.FeatureTest.platform;if(C.button!==0||C.ctrlKey&&K||C.target!==this.div)return;st(this,p,!0);const rt=t(this,x).getActive();st(this,U,!rt||rt.isEmpty())}findNewParent(C,K,rt){const dt=t(this,x).findParent(K,rt);return dt===null||dt===this?!1:(dt.changeParent(C),!0)}destroy(){var C,K;((C=t(this,x).getActive())==null?void 0:C.parent)===this&&(t(this,x).commitOrRemove(),t(this,x).setActiveEditor(null));for(const rt of t(this,S).values())(K=t(this,m))==null||K.removePointerInTextLayer(rt.contentDiv),rt.setParent(null),rt.isAttachedToDOM=!1,rt.div.remove();this.div=null,t(this,S).clear(),t(this,x).removeLayer(this)}render({viewport:C}){this.viewport=C,(0,ft.setLayerDimensions)(this.div,C);for(const K of t(this,x).getEditors(this.pageIndex))this.add(K);this.updateMode()}update({viewport:C}){t(this,x).commitOrRemove(),this.viewport=C,(0,ft.setLayerDimensions)(this.div,{rotation:C.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:C,pageHeight:K}=this.viewport.rawDims;return[C,K]}};let F=z;m=new WeakMap,U=new WeakMap,j=new WeakMap,R=new WeakMap,E=new WeakMap,S=new WeakMap,p=new WeakMap,_=new WeakMap,T=new WeakMap,x=new WeakMap,A=new WeakSet,si=function(C){switch(t(this,x).getMode()){case d.AnnotationEditorType.FREETEXT:return new nt.FreeTextEditor(C);case d.AnnotationEditorType.INK:return new $.InkEditor(C);case d.AnnotationEditorType.STAMP:return new H.StampEditor(C)}return null},o=new WeakSet,Re=function(C,K){const rt=this.getNextId(),dt=q(this,A,si).call(this,{parent:this,id:rt,x:C.offsetX,y:C.offsetY,uiManager:t(this,x),isCentered:K});return dt&&this.add(dt),dt},g=new WeakSet,ni=function(){const{x:C,y:K,width:rt,height:dt}=this.div.getBoundingClientRect(),V=Math.max(0,C),ut=Math.max(0,K),_t=Math.min(window.innerWidth,C+rt),xt=Math.min(window.innerHeight,K+dt),Mt=(V+_t)/2-C,w=(ut+xt)/2-K,[i,n]=this.viewport.rotation%180===0?[Mt,w]:[w,Mt];return{offsetX:i,offsetY:n}},k=new WeakSet,ri=function(){st(this,_,!0);for(const C of t(this,S).values())C.isEmpty()&&C.remove();st(this,_,!1)},se(F,"_initialized",!1),f.AnnotationEditorLayer=F},(lt,f,ct)=>{var H,F,m,U,j,R,E,S,p,_,Fi,x,Di,r,Ii,P,Se,a,ai,v,Li,X,oi;Object.defineProperty(f,"__esModule",{value:!0}),f.FreeTextEditor=void 0;var d=ct(1),M=ct(5),nt=ct(4),$=ct(29);const K=class extends nt.AnnotationEditor{constructor(V){super({...V,name:"freeTextEditor"});B(this,_);B(this,x);B(this,r);B(this,P);B(this,a);B(this,v);B(this,X);B(this,H,this.editorDivBlur.bind(this));B(this,F,this.editorDivFocus.bind(this));B(this,m,this.editorDivInput.bind(this));B(this,U,this.editorDivKeydown.bind(this));B(this,j,void 0);B(this,R,"");B(this,E,`${this.id}-editor`);B(this,S,void 0);B(this,p,null);st(this,j,V.color||K._defaultColor||nt.AnnotationEditor._defaultLineColor),st(this,S,V.fontSize||K._defaultFontSize)}static get _keyboardManager(){const V=K.prototype,ut=Mt=>Mt.isEmpty(),_t=M.AnnotationEditorUIManager.TRANSLATE_SMALL,xt=M.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,d.shadow)(this,"_keyboardManager",new M.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],V.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],V.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],V._translateEmpty,{args:[-_t,0],checker:ut}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],V._translateEmpty,{args:[-xt,0],checker:ut}],[["ArrowRight","mac+ArrowRight"],V._translateEmpty,{args:[_t,0],checker:ut}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],V._translateEmpty,{args:[xt,0],checker:ut}],[["ArrowUp","mac+ArrowUp"],V._translateEmpty,{args:[0,-_t],checker:ut}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],V._translateEmpty,{args:[0,-xt],checker:ut}],[["ArrowDown","mac+ArrowDown"],V._translateEmpty,{args:[0,_t],checker:ut}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],V._translateEmpty,{args:[0,xt],checker:ut}]]))}static initialize(V){nt.AnnotationEditor.initialize(V,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const ut=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(ut.getPropertyValue("--freetext-padding"))}static updateDefaultParams(V,ut){switch(V){case d.AnnotationEditorParamsType.FREETEXT_SIZE:K._defaultFontSize=ut;break;case d.AnnotationEditorParamsType.FREETEXT_COLOR:K._defaultColor=ut;break}}updateParams(V,ut){switch(V){case d.AnnotationEditorParamsType.FREETEXT_SIZE:q(this,_,Fi).call(this,ut);break;case d.AnnotationEditorParamsType.FREETEXT_COLOR:q(this,x,Di).call(this,ut);break}}static get defaultPropertiesToUpdate(){return[[d.AnnotationEditorParamsType.FREETEXT_SIZE,K._defaultFontSize],[d.AnnotationEditorParamsType.FREETEXT_COLOR,K._defaultColor||nt.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[d.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,S)],[d.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,j)]]}_translateEmpty(V,ut){this._uiManager.translateSelectedEditors(V,ut,!0)}getInitialTranslation(){const V=this.parentScale;return[-K._internalPadding*V,-(K._internalPadding+t(this,S))*V]}rebuild(){!this.parent||(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(d.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,U)),this.editorDiv.addEventListener("focus",t(this,F)),this.editorDiv.addEventListener("blur",t(this,H)),this.editorDiv.addEventListener("input",t(this,m)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,E)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",t(this,U)),this.editorDiv.removeEventListener("focus",t(this,F)),this.editorDiv.removeEventListener("blur",t(this,H)),this.editorDiv.removeEventListener("input",t(this,m)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(V){!this._focusEventsAllowed||(super.focusin(V),V.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var V;if(this.width){q(this,X,oi).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(V=this._initialOptions)!=null&&V.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const V=t(this,R),ut=st(this,R,q(this,r,Ii).call(this).trimEnd());if(V===ut)return;const _t=xt=>{if(st(this,R,xt),!xt){this.remove();return}q(this,a,ai).call(this),this._uiManager.rebuild(this),q(this,P,Se).call(this)};this.addCommands({cmd:()=>{_t(ut)},undo:()=>{_t(V)},mustExec:!1}),q(this,P,Se).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(V){this.enterInEditMode()}keydown(V){V.target===this.div&&V.key==="Enter"&&(this.enterInEditMode(),V.preventDefault())}editorDivKeydown(V){K._keyboardManager.exec(this,V)}editorDivFocus(V){this.isEditing=!0}editorDivBlur(V){this.isEditing=!1}editorDivInput(V){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let V,ut;this.width&&(V=this.x,ut=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,E)),this.enableEditing(),nt.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(xt=>{var Mt;return(Mt=this.editorDiv)==null?void 0:Mt.setAttribute("aria-label",xt)}),nt.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(xt=>{var Mt;return(Mt=this.editorDiv)==null?void 0:Mt.setAttribute("default-content",xt)}),this.editorDiv.contentEditable=!0;const{style:_t}=this.editorDiv;if(_t.fontSize=`calc(${t(this,S)}px * var(--scale-factor))`,_t.color=t(this,j),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,M.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[xt,Mt]=this.parentDimensions;if(this.annotationElementId){const{position:w}=t(this,p);let[i,n]=this.getInitialTranslation();[i,n]=this.pageTranslationToScreen(i,n);const[s,l]=this.pageDimensions,[u,y]=this.pageTranslation;let I,W;switch(this.rotation){case 0:I=V+(w[0]-u)/s,W=ut+this.height-(w[1]-y)/l;break;case 90:I=V+(w[0]-u)/s,W=ut-(w[1]-y)/l,[i,n]=[n,-i];break;case 180:I=V-this.width+(w[0]-u)/s,W=ut-(w[1]-y)/l,[i,n]=[-i,-n];break;case 270:I=V+(w[0]-u-this.height*l)/s,W=ut+(w[1]-y-this.width*s)/l,[i,n]=[-n,i];break}this.setAt(I*xt,W*Mt,i,n)}else this.setAt(V*xt,ut*Mt,this.width*xt,this.height*Mt);q(this,a,ai).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(V,ut,_t){let xt=null;if(V instanceof $.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:w,fontColor:i},rect:n,rotation:s,id:l},textContent:u,textPosition:y,parent:{page:{pageNumber:I}}}=V;if(!u||u.length===0)return null;xt=V={annotationType:d.AnnotationEditorType.FREETEXT,color:Array.from(i),fontSize:w,value:u.join(`
`),position:y,pageIndex:I-1,rect:n,rotation:s,id:l,deleted:!1}}const Mt=super.deserialize(V,ut,_t);return st(Mt,S,V.fontSize),st(Mt,j,d.Util.makeHexColor(...V.color)),st(Mt,R,V.value),Mt.annotationElementId=V.id||null,st(Mt,p,xt),Mt}serialize(V=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const ut=K._internalPadding*this.parentScale,_t=this.getRect(ut,ut),xt=nt.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,j)),Mt={annotationType:d.AnnotationEditorType.FREETEXT,color:xt,fontSize:t(this,S),value:t(this,R),pageIndex:this.pageIndex,rect:_t,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return V?Mt:this.annotationElementId&&!q(this,v,Li).call(this,Mt)?null:(Mt.id=this.annotationElementId,Mt)}};let ft=K;H=new WeakMap,F=new WeakMap,m=new WeakMap,U=new WeakMap,j=new WeakMap,R=new WeakMap,E=new WeakMap,S=new WeakMap,p=new WeakMap,_=new WeakSet,Fi=function(V){const ut=xt=>{this.editorDiv.style.fontSize=`calc(${xt}px * var(--scale-factor))`,this.translate(0,-(xt-t(this,S))*this.parentScale),st(this,S,xt),q(this,P,Se).call(this)},_t=t(this,S);this.addCommands({cmd:()=>{ut(V)},undo:()=>{ut(_t)},mustExec:!0,type:d.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},x=new WeakSet,Di=function(V){const ut=t(this,j);this.addCommands({cmd:()=>{st(this,j,this.editorDiv.style.color=V)},undo:()=>{st(this,j,this.editorDiv.style.color=ut)},mustExec:!0,type:d.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},r=new WeakSet,Ii=function(){const V=this.editorDiv.getElementsByTagName("div");if(V.length===0)return this.editorDiv.innerText;const ut=[];for(const _t of V)ut.push(_t.innerText.replace(/\r\n?|\n/,""));return ut.join(`
`)},P=new WeakSet,Se=function(){const[V,ut]=this.parentDimensions;let _t;if(this.isAttachedToDOM)_t=this.div.getBoundingClientRect();else{const{currentLayer:xt,div:Mt}=this,w=Mt.style.display;Mt.style.display="hidden",xt.div.append(this.div),_t=Mt.getBoundingClientRect(),Mt.remove(),Mt.style.display=w}this.rotation%180===this.parentRotation%180?(this.width=_t.width/V,this.height=_t.height/ut):(this.width=_t.height/V,this.height=_t.width/ut),this.fixAndSetPosition()},a=new WeakSet,ai=function(){if(this.editorDiv.replaceChildren(),!!t(this,R))for(const V of t(this,R).split(`
`)){const ut=document.createElement("div");ut.append(V?document.createTextNode(V):document.createElement("br")),this.editorDiv.append(ut)}},v=new WeakSet,Li=function(V){const{value:ut,fontSize:_t,color:xt,rect:Mt,pageIndex:w}=t(this,p);return V.value!==ut||V.fontSize!==_t||V.rect.some((i,n)=>Math.abs(i-Mt[n])>=1)||V.color.some((i,n)=>i!==xt[n])||V.pageIndex!==w},X=new WeakSet,oi=function(V=!1){if(!this.annotationElementId)return;if(q(this,P,Se).call(this),!V&&(this.width===0||this.height===0)){setTimeout(()=>q(this,X,oi).call(this,!0),0);return}const ut=K._internalPadding*this.parentScale;t(this,p).rect=this.getRect(ut,ut)},se(ft,"_freeTextDefaultContent",""),se(ft,"_internalPadding",0),se(ft,"_defaultColor",null),se(ft,"_defaultFontSize",10),se(ft,"_type","freetext"),f.FreeTextEditor=ft},(lt,f,ct)=>{var n,l,de,y,Oi,W,it,et,ot,pt,Et,gt,Ft,Wt,wt,Lt,bt,D,N,J,mt,At,Bt,Ni,Nt,Fe,$t,li,qt,ci,tt,Y,vt,Ct,ie,ee,Z,hi,Ot,Pt,Ut,jt,Bi,St,di;Object.defineProperty(f,"__esModule",{value:!0}),f.StampAnnotationElement=f.InkAnnotationElement=f.FreeTextAnnotationElement=f.AnnotationLayer=void 0;var d=ct(1),M=ct(6),nt=ct(3),$=ct(30),ft=ct(31),H=ct(32);const F=1e3,m=9,U=new WeakSet;function j(Ht){return{width:Ht[2]-Ht[0],height:Ht[3]-Ht[1]}}class R{static create(L){switch(L.data.annotationType){case d.AnnotationType.LINK:return new S(L);case d.AnnotationType.TEXT:return new p(L);case d.AnnotationType.WIDGET:switch(L.data.fieldType){case"Tx":return new T(L);case"Btn":return L.data.radioButton?new r(L):L.data.checkBox?new A(L):new o(L);case"Ch":return new P(L);case"Sig":return new x(L)}return new _(L);case d.AnnotationType.POPUP:return new g(L);case d.AnnotationType.FREETEXT:return new k(L);case d.AnnotationType.LINE:return new v(L);case d.AnnotationType.SQUARE:return new z(L);case d.AnnotationType.CIRCLE:return new X(L);case d.AnnotationType.POLYLINE:return new C(L);case d.AnnotationType.CARET:return new rt(L);case d.AnnotationType.INK:return new dt(L);case d.AnnotationType.POLYGON:return new K(L);case d.AnnotationType.HIGHLIGHT:return new V(L);case d.AnnotationType.UNDERLINE:return new ut(L);case d.AnnotationType.SQUIGGLY:return new _t(L);case d.AnnotationType.STRIKEOUT:return new xt(L);case d.AnnotationType.STAMP:return new Mt(L);case d.AnnotationType.FILEATTACHMENT:return new w(L);default:return new E(L)}}}const s=class{constructor(L,{isRenderable:e=!1,ignoreBorder:b=!1,createQuadrilaterals:O=!1}={}){B(this,n,!1);this.isRenderable=e,this.data=L.data,this.layer=L.layer,this.linkService=L.linkService,this.downloadManager=L.downloadManager,this.imageResourcesPath=L.imageResourcesPath,this.renderForms=L.renderForms,this.svgFactory=L.svgFactory,this.annotationStorage=L.annotationStorage,this.enableScripting=L.enableScripting,this.hasJSActions=L.hasJSActions,this._fieldObjects=L.fieldObjects,this.parent=L.parent,e&&(this.container=this._createContainer(b)),O&&this._createQuadrilaterals()}static _hasPopupData({titleObj:L,contentsObj:e,richText:b}){return!!((L==null?void 0:L.str)||(e==null?void 0:e.str)||(b==null?void 0:b.str))}get hasPopupData(){return s._hasPopupData(this.data)}_createContainer(L){const{data:e,parent:{page:b,viewport:O}}=this,G=document.createElement("section");G.setAttribute("data-annotation-id",e.id),this instanceof _||(G.tabIndex=F),G.style.zIndex=this.parent.zIndex++,this.data.popupRef&&G.setAttribute("aria-haspopup","dialog"),e.noRotate&&G.classList.add("norotate");const{pageWidth:Q,pageHeight:at,pageX:yt,pageY:kt}=O.rawDims;if(!e.rect||this instanceof g){const{rotation:Gt}=e;return!e.hasOwnCanvas&&Gt!==0&&this.setRotation(Gt,G),G}const{width:Rt,height:Yt}=j(e.rect),Dt=d.Util.normalizeRect([e.rect[0],b.view[3]-e.rect[1]+b.view[1],e.rect[2],b.view[3]-e.rect[3]+b.view[1]]);if(!L&&e.borderStyle.width>0){G.style.borderWidth=`${e.borderStyle.width}px`;const Gt=e.borderStyle.horizontalCornerRadius,Kt=e.borderStyle.verticalCornerRadius;if(Gt>0||Kt>0){const te=`calc(${Gt}px * var(--scale-factor)) / calc(${Kt}px * var(--scale-factor))`;G.style.borderRadius=te}else if(this instanceof r){const te=`calc(${Rt}px * var(--scale-factor)) / calc(${Yt}px * var(--scale-factor))`;G.style.borderRadius=te}switch(e.borderStyle.style){case d.AnnotationBorderStyleType.SOLID:G.style.borderStyle="solid";break;case d.AnnotationBorderStyleType.DASHED:G.style.borderStyle="dashed";break;case d.AnnotationBorderStyleType.BEVELED:(0,d.warn)("Unimplemented border style: beveled");break;case d.AnnotationBorderStyleType.INSET:(0,d.warn)("Unimplemented border style: inset");break;case d.AnnotationBorderStyleType.UNDERLINE:G.style.borderBottomStyle="solid";break}const Qt=e.borderColor||null;Qt?(st(this,n,!0),G.style.borderColor=d.Util.makeHexColor(Qt[0]|0,Qt[1]|0,Qt[2]|0)):G.style.borderWidth=0}G.style.left=`${100*(Dt[0]-yt)/Q}%`,G.style.top=`${100*(Dt[1]-kt)/at}%`;const{rotation:It}=e;return e.hasOwnCanvas||It===0?(G.style.width=`${100*Rt/Q}%`,G.style.height=`${100*Yt/at}%`):this.setRotation(It,G),G}setRotation(L,e=this.container){if(!this.data.rect)return;const{pageWidth:b,pageHeight:O}=this.parent.viewport.rawDims,{width:G,height:Q}=j(this.data.rect);let at,yt;L%180===0?(at=100*G/b,yt=100*Q/O):(at=100*Q/b,yt=100*G/O),e.style.width=`${at}%`,e.style.height=`${yt}%`,e.setAttribute("data-main-rotation",(360-L)%360)}get _commonActions(){const L=(e,b,O)=>{const G=O.detail[e],Q=G[0],at=G.slice(1);O.target.style[b]=$.ColorConverters[`${Q}_HTML`](at),this.annotationStorage.setValue(this.data.id,{[b]:$.ColorConverters[`${Q}_rgb`](at)})};return(0,d.shadow)(this,"_commonActions",{display:e=>{const{display:b}=e.detail,O=b%2===1;this.container.style.visibility=O?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:O,noPrint:b===1||b===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:b}=e.detail;this.container.style.visibility=b?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:b,noView:b})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{L("bgColor","backgroundColor",e)},fillColor:e=>{L("fillColor","backgroundColor",e)},fgColor:e=>{L("fgColor","color",e)},textColor:e=>{L("textColor","color",e)},borderColor:e=>{L("borderColor","borderColor",e)},strokeColor:e=>{L("strokeColor","borderColor",e)},rotation:e=>{const b=e.detail.rotation;this.setRotation(b),this.annotationStorage.setValue(this.data.id,{rotation:b})}})}_dispatchEventFromSandbox(L,e){const b=this._commonActions;for(const O of Object.keys(e.detail)){const G=L[O]||b[O];G==null||G(e)}}_setDefaultPropertiesFromJS(L){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const b=this._commonActions;for(const[O,G]of Object.entries(e)){const Q=b[O];if(Q){const at={detail:{[O]:G},target:L};Q(at),delete e[O]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:L}=this.data;if(!L)return;const[e,b,O,G]=this.data.rect;if(L.length===1){const[,{x:Kt,y:Qt},{x:te,y:re}]=L[0];if(O===Kt&&G===Qt&&e===te&&b===re)return}const{style:Q}=this.container;let at;if(t(this,n)){const{borderColor:Kt,borderWidth:Qt}=Q;Q.borderWidth=0,at=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Kt}" stroke-width="${Qt}">`],this.container.classList.add("hasBorder")}const yt=O-e,kt=G-b,{svgFactory:Rt}=this,Yt=Rt.createElement("svg");Yt.classList.add("quadrilateralsContainer"),Yt.setAttribute("width",0),Yt.setAttribute("height",0);const Dt=Rt.createElement("defs");Yt.append(Dt);const It=Rt.createElement("clipPath"),Gt=`clippath_${this.data.id}`;It.setAttribute("id",Gt),It.setAttribute("clipPathUnits","objectBoundingBox"),Dt.append(It);for(const[,{x:Kt,y:Qt},{x:te,y:re}]of L){const ne=Rt.createElement("rect"),ae=(te-e)/yt,ce=(G-Qt)/kt,he=(Kt-te)/yt,vi=(Qt-re)/kt;ne.setAttribute("x",ae),ne.setAttribute("y",ce),ne.setAttribute("width",he),ne.setAttribute("height",vi),It.append(ne),at==null||at.push(`<rect vector-effect="non-scaling-stroke" x="${ae}" y="${ce}" width="${he}" height="${vi}"/>`)}t(this,n)&&(at.push("</g></svg>')"),Q.backgroundImage=at.join("")),this.container.append(Yt),this.container.style.clipPath=`url(#${Gt})`}_createPopup(){const{container:L,data:e}=this;L.setAttribute("aria-haspopup","dialog");const b=new g({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(b.render())}render(){(0,d.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(L,e=null){const b=[];if(this._fieldObjects){const O=this._fieldObjects[L];if(O)for(const{page:G,id:Q,exportValues:at}of O){if(G===-1||Q===e)continue;const yt=typeof at=="string"?at:null,kt=document.querySelector(`[data-element-id="${Q}"]`);if(kt&&!U.has(kt)){(0,d.warn)(`_getElementsByName - element not allowed: ${Q}`);continue}b.push({id:Q,exportValue:yt,domElement:kt})}return b}for(const O of document.getElementsByName(L)){const{exportValue:G}=O,Q=O.getAttribute("data-element-id");Q!==e&&(!U.has(O)||b.push({id:Q,exportValue:G,domElement:O}))}return b}show(){var L;this.container&&(this.container.hidden=!1),(L=this.popup)==null||L.maybeShow()}hide(){var L;this.container&&(this.container.hidden=!0),(L=this.popup)==null||L.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const L=this.getElementsToTriggerPopup();if(Array.isArray(L))for(const e of L)e.classList.add("highlightArea");else L.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:L,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var b;(b=this.linkService.eventBus)==null||b.dispatch("switchannotationeditormode",{source:this,mode:L,editId:e})})}};let E=s;n=new WeakMap;class S extends E{constructor(e,b=null){super(e,{isRenderable:!0,ignoreBorder:!!(b!=null&&b.ignoreBorder),createQuadrilaterals:!0});B(this,l);B(this,y);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:b}=this,O=document.createElement("a");O.setAttribute("data-element-id",e.id);let G=!1;return e.url?(b.addLinkAttributes(O,e.url,e.newWindow),G=!0):e.action?(this._bindNamedAction(O,e.action),G=!0):e.attachment?(this._bindAttachment(O,e.attachment),G=!0):e.setOCGState?(q(this,y,Oi).call(this,O,e.setOCGState),G=!0):e.dest?(this._bindLink(O,e.dest),G=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(O,e),G=!0),e.resetForm?(this._bindResetFormAction(O,e.resetForm),G=!0):this.isTooltipOnly&&!G&&(this._bindLink(O,""),G=!0)),this.container.classList.add("linkAnnotation"),G&&this.container.append(O),this.container}_bindLink(e,b){e.href=this.linkService.getDestinationHash(b),e.onclick=()=>(b&&this.linkService.goToDestination(b),!1),(b||b==="")&&q(this,l,de).call(this)}_bindNamedAction(e,b){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(b),!1),q(this,l,de).call(this)}_bindAttachment(e,b){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>{var O;return(O=this.downloadManager)==null||O.openOrDownloadData(this.container,b.content,b.filename),!1},q(this,l,de).call(this)}_bindJSAction(e,b){e.href=this.linkService.getAnchorUrl("");const O=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const G of Object.keys(b.actions)){const Q=O.get(G);!Q||(e[Q]=()=>{var at;return(at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b.id,name:G}}),!1})}e.onclick||(e.onclick=()=>!1),q(this,l,de).call(this)}_bindResetFormAction(e,b){const O=e.onclick;if(O||(e.href=this.linkService.getAnchorUrl("")),q(this,l,de).call(this),!this._fieldObjects){(0,d.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),O||(e.onclick=()=>!1);return}e.onclick=()=>{var Yt;O==null||O();const{fields:G,refs:Q,include:at}=b,yt=[];if(G.length!==0||Q.length!==0){const Dt=new Set(Q);for(const It of G){const Gt=this._fieldObjects[It]||[];for(const{id:Kt}of Gt)Dt.add(Kt)}for(const It of Object.values(this._fieldObjects))for(const Gt of It)Dt.has(Gt.id)===at&&yt.push(Gt)}else for(const Dt of Object.values(this._fieldObjects))yt.push(...Dt);const kt=this.annotationStorage,Rt=[];for(const Dt of yt){const{id:It}=Dt;switch(Rt.push(It),Dt.type){case"text":{const Kt=Dt.defaultValue||"";kt.setValue(It,{value:Kt});break}case"checkbox":case"radiobutton":{const Kt=Dt.defaultValue===Dt.exportValues;kt.setValue(It,{value:Kt});break}case"combobox":case"listbox":{const Kt=Dt.defaultValue||"";kt.setValue(It,{value:Kt});break}default:continue}const Gt=document.querySelector(`[data-element-id="${It}"]`);if(Gt){if(!U.has(Gt)){(0,d.warn)(`_bindResetFormAction - element not allowed: ${It}`);continue}}else continue;Gt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Yt=this.linkService.eventBus)==null||Yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Rt,name:"ResetForm"}})),!1}}}l=new WeakSet,de=function(){this.container.setAttribute("data-internal-link","")},y=new WeakSet,Oi=function(e,b){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(b),!1),q(this,l,de).call(this)};class p extends E{constructor(L){super(L,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const L=document.createElement("img");return L.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",L.alt="[{{type}} Annotation]",L.dataset.l10nId="text_annotation_type",L.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(L),this.container}}class _ extends E{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(L){var e;this.data.hasOwnCanvas&&(((e=L.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(L.previousSibling.hidden=!0),L.hidden=!1)}_getKeyModifier(L){const{isWin:e,isMac:b}=d.FeatureTest.platform;return e&&L.ctrlKey||b&&L.metaKey}_setEventListener(L,e,b,O,G){b.includes("mouse")?L.addEventListener(b,Q=>{var at;(at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:O,value:G(Q),shift:Q.shiftKey,modifier:this._getKeyModifier(Q)}})}):L.addEventListener(b,Q=>{var at;if(b==="blur"){if(!e.focused||!Q.relatedTarget)return;e.focused=!1}else if(b==="focus"){if(e.focused)return;e.focused=!0}!G||(at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:O,value:G(Q)}})})}_setEventListeners(L,e,b,O){var G,Q,at;for(const[yt,kt]of b)(kt==="Action"||((G=this.data.actions)==null?void 0:G[kt]))&&((kt==="Focus"||kt==="Blur")&&(e||(e={focused:!1})),this._setEventListener(L,e,yt,kt,O),kt==="Focus"&&!((Q=this.data.actions)!=null&&Q.Blur)?this._setEventListener(L,e,"blur","Blur",null):kt==="Blur"&&!((at=this.data.actions)!=null&&at.Focus)&&this._setEventListener(L,e,"focus","Focus",null))}_setBackgroundColor(L){const e=this.data.backgroundColor||null;L.style.backgroundColor=e===null?"transparent":d.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(L){const e=["left","center","right"],{fontColor:b}=this.data.defaultAppearanceData,O=this.data.defaultAppearanceData.fontSize||m,G=L.style;let Q;const at=2,yt=kt=>Math.round(10*kt)/10;if(this.data.multiLine){const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-at),Rt=Math.round(kt/(d.LINE_FACTOR*O))||1,Yt=kt/Rt;Q=Math.min(O,yt(Yt/d.LINE_FACTOR))}else{const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-at);Q=Math.min(O,yt(kt/d.LINE_FACTOR))}G.fontSize=`calc(${Q}px * var(--scale-factor))`,G.color=d.Util.makeHexColor(b[0],b[1],b[2]),this.data.textAlignment!==null&&(G.textAlign=e[this.data.textAlignment])}_setRequired(L,e){e?L.setAttribute("required",!0):L.removeAttribute("required"),L.setAttribute("aria-required",e)}}class T extends _{constructor(L){const e=L.renderForms||!L.data.hasAppearance&&!!L.data.fieldValue;super(L,{isRenderable:e})}setPropertyOnSiblings(L,e,b,O){const G=this.annotationStorage;for(const Q of this._getElementsByName(L.name,L.id))Q.domElement&&(Q.domElement[e]=b),G.setValue(Q.id,{[O]:b})}render(){var O,G;const L=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let b=null;if(this.renderForms){const Q=L.getValue(e,{value:this.data.fieldValue});let at=Q.value||"";const yt=L.getValue(e,{charLimit:this.data.maxLen}).charLimit;yt&&at.length>yt&&(at=at.slice(0,yt));let kt=Q.formattedValue||((O=this.data.textContent)==null?void 0:O.join(`
`))||null;kt&&this.data.comb&&(kt=kt.replaceAll(/\s+/g,""));const Rt={userValue:at,formattedValue:kt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(b=document.createElement("textarea"),b.textContent=kt!=null?kt:at,this.data.doNotScroll&&(b.style.overflowY="hidden")):(b=document.createElement("input"),b.type="text",b.setAttribute("value",kt!=null?kt:at),this.data.doNotScroll&&(b.style.overflowX="hidden")),this.data.hasOwnCanvas&&(b.hidden=!0),U.add(b),b.setAttribute("data-element-id",e),b.disabled=this.data.readOnly,b.name=this.data.fieldName,b.tabIndex=F,this._setRequired(b,this.data.required),yt&&(b.maxLength=yt),b.addEventListener("input",Dt=>{L.setValue(e,{value:Dt.target.value}),this.setPropertyOnSiblings(b,"value",Dt.target.value,"value"),Rt.formattedValue=null}),b.addEventListener("resetform",Dt=>{var Gt;const It=(Gt=this.data.defaultFieldValue)!=null?Gt:"";b.value=Rt.userValue=It,Rt.formattedValue=null});let Yt=Dt=>{const{formattedValue:It}=Rt;It!=null&&(Dt.target.value=It),Dt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){b.addEventListener("focus",It=>{if(Rt.focused)return;const{target:Gt}=It;Rt.userValue&&(Gt.value=Rt.userValue),Rt.lastCommittedValue=Gt.value,Rt.commitKey=1,Rt.focused=!0}),b.addEventListener("updatefromsandbox",It=>{this.showElementAndHideCanvas(It.target);const Gt={value(Kt){var Qt;Rt.userValue=(Qt=Kt.detail.value)!=null?Qt:"",L.setValue(e,{value:Rt.userValue.toString()}),Kt.target.value=Rt.userValue},formattedValue(Kt){const{formattedValue:Qt}=Kt.detail;Rt.formattedValue=Qt,Qt!=null&&Kt.target!==document.activeElement&&(Kt.target.value=Qt),L.setValue(e,{formattedValue:Qt})},selRange(Kt){Kt.target.setSelectionRange(...Kt.detail.selRange)},charLimit:Kt=>{var ne;const{charLimit:Qt}=Kt.detail,{target:te}=Kt;if(Qt===0){te.removeAttribute("maxLength");return}te.setAttribute("maxLength",Qt);let re=Rt.userValue;!re||re.length<=Qt||(re=re.slice(0,Qt),te.value=Rt.userValue=re,L.setValue(e,{value:re}),(ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:re,willCommit:!0,commitKey:1,selStart:te.selectionStart,selEnd:te.selectionEnd}}))}};this._dispatchEventFromSandbox(Gt,It)}),b.addEventListener("keydown",It=>{var Qt;Rt.commitKey=1;let Gt=-1;if(It.key==="Escape"?Gt=0:It.key==="Enter"&&!this.data.multiLine?Gt=2:It.key==="Tab"&&(Rt.commitKey=3),Gt===-1)return;const{value:Kt}=It.target;Rt.lastCommittedValue!==Kt&&(Rt.lastCommittedValue=Kt,Rt.userValue=Kt,(Qt=this.linkService.eventBus)==null||Qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Kt,willCommit:!0,commitKey:Gt,selStart:It.target.selectionStart,selEnd:It.target.selectionEnd}}))});const Dt=Yt;Yt=null,b.addEventListener("blur",It=>{var Kt;if(!Rt.focused||!It.relatedTarget)return;Rt.focused=!1;const{value:Gt}=It.target;Rt.userValue=Gt,Rt.lastCommittedValue!==Gt&&((Kt=this.linkService.eventBus)==null||Kt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Gt,willCommit:!0,commitKey:Rt.commitKey,selStart:It.target.selectionStart,selEnd:It.target.selectionEnd}})),Dt(It)}),(G=this.data.actions)!=null&&G.Keystroke&&b.addEventListener("beforeinput",It=>{var ce;Rt.lastCommittedValue=null;const{data:Gt,target:Kt}=It,{value:Qt,selectionStart:te,selectionEnd:re}=Kt;let ne=te,ae=re;switch(It.inputType){case"deleteWordBackward":{const he=Qt.substring(0,te).match(/\w*[^\w]*$/);he&&(ne-=he[0].length);break}case"deleteWordForward":{const he=Qt.substring(te).match(/^[^\w]*\w*/);he&&(ae+=he[0].length);break}case"deleteContentBackward":te===re&&(ne-=1);break;case"deleteContentForward":te===re&&(ae+=1);break}It.preventDefault(),(ce=this.linkService.eventBus)==null||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:Qt,change:Gt||"",willCommit:!1,selStart:ne,selEnd:ae}})}),this._setEventListeners(b,Rt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],It=>It.target.value)}if(Yt&&b.addEventListener("blur",Yt),this.data.comb){const It=(this.data.rect[2]-this.data.rect[0])/yt;b.classList.add("comb"),b.style.letterSpacing=`calc(${It}px * var(--scale-factor) - 1ch)`}}else b=document.createElement("div"),b.textContent=this.data.fieldValue,b.style.verticalAlign="middle",b.style.display="table-cell";return this._setTextStyle(b),this._setBackgroundColor(b),this._setDefaultPropertiesFromJS(b),this.container.append(b),this.container}}class x extends _{constructor(L){super(L,{isRenderable:!!L.data.hasOwnCanvas})}}class A extends _{constructor(L){super(L,{isRenderable:L.renderForms})}render(){const L=this.annotationStorage,e=this.data,b=e.id;let O=L.getValue(b,{value:e.exportValue===e.fieldValue}).value;typeof O=="string"&&(O=O!=="Off",L.setValue(b,{value:O})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const G=document.createElement("input");return U.add(G),G.setAttribute("data-element-id",b),G.disabled=e.readOnly,this._setRequired(G,this.data.required),G.type="checkbox",G.name=e.fieldName,O&&G.setAttribute("checked",!0),G.setAttribute("exportValue",e.exportValue),G.tabIndex=F,G.addEventListener("change",Q=>{const{name:at,checked:yt}=Q.target;for(const kt of this._getElementsByName(at,b)){const Rt=yt&&kt.exportValue===e.exportValue;kt.domElement&&(kt.domElement.checked=Rt),L.setValue(kt.id,{value:Rt})}L.setValue(b,{value:yt})}),G.addEventListener("resetform",Q=>{const at=e.defaultFieldValue||"Off";Q.target.checked=at===e.exportValue}),this.enableScripting&&this.hasJSActions&&(G.addEventListener("updatefromsandbox",Q=>{const at={value(yt){yt.target.checked=yt.detail.value!=="Off",L.setValue(b,{value:yt.target.checked})}};this._dispatchEventFromSandbox(at,Q)}),this._setEventListeners(G,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Q=>Q.target.checked)),this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class r extends _{constructor(L){super(L,{isRenderable:L.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const L=this.annotationStorage,e=this.data,b=e.id;let O=L.getValue(b,{value:e.fieldValue===e.buttonValue}).value;typeof O=="string"&&(O=O!==e.buttonValue,L.setValue(b,{value:O}));const G=document.createElement("input");if(U.add(G),G.setAttribute("data-element-id",b),G.disabled=e.readOnly,this._setRequired(G,this.data.required),G.type="radio",G.name=e.fieldName,O&&G.setAttribute("checked",!0),G.tabIndex=F,G.addEventListener("change",Q=>{const{name:at,checked:yt}=Q.target;for(const kt of this._getElementsByName(at,b))L.setValue(kt.id,{value:!1});L.setValue(b,{value:yt})}),G.addEventListener("resetform",Q=>{const at=e.defaultFieldValue;Q.target.checked=at!=null&&at===e.buttonValue}),this.enableScripting&&this.hasJSActions){const Q=e.buttonValue;G.addEventListener("updatefromsandbox",at=>{const yt={value:kt=>{const Rt=Q===kt.detail.value;for(const Yt of this._getElementsByName(kt.target.name)){const Dt=Rt&&Yt.id===b;Yt.domElement&&(Yt.domElement.checked=Dt),L.setValue(Yt.id,{value:Dt})}}};this._dispatchEventFromSandbox(yt,at)}),this._setEventListeners(G,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],at=>at.target.checked)}return this._setBackgroundColor(G),this._setDefaultPropertiesFromJS(G),this.container.append(G),this.container}}class o extends S{constructor(L){super(L,{ignoreBorder:L.data.hasAppearance})}render(){const L=super.render();L.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(L.title=this.data.alternativeText);const e=L.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",b=>{this._dispatchEventFromSandbox({},b)})),L}}class P extends _{constructor(L){super(L,{isRenderable:L.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const L=this.annotationStorage,e=this.data.id,b=L.getValue(e,{value:this.data.fieldValue}),O=document.createElement("select");U.add(O),O.setAttribute("data-element-id",e),O.disabled=this.data.readOnly,this._setRequired(O,this.data.required),O.name=this.data.fieldName,O.tabIndex=F;let G=this.data.combo&&this.data.options.length>0;this.data.combo||(O.size=this.data.options.length,this.data.multiSelect&&(O.multiple=!0)),O.addEventListener("resetform",Rt=>{const Yt=this.data.defaultFieldValue;for(const Dt of O.options)Dt.selected=Dt.value===Yt});for(const Rt of this.data.options){const Yt=document.createElement("option");Yt.textContent=Rt.displayValue,Yt.value=Rt.exportValue,b.value.includes(Rt.exportValue)&&(Yt.setAttribute("selected",!0),G=!1),O.append(Yt)}let Q=null;if(G){const Rt=document.createElement("option");Rt.value=" ",Rt.setAttribute("hidden",!0),Rt.setAttribute("selected",!0),O.prepend(Rt),Q=()=>{Rt.remove(),O.removeEventListener("input",Q),Q=null},O.addEventListener("input",Q)}const at=Rt=>{const Yt=Rt?"value":"textContent",{options:Dt,multiple:It}=O;return It?Array.prototype.filter.call(Dt,Gt=>Gt.selected).map(Gt=>Gt[Yt]):Dt.selectedIndex===-1?null:Dt[Dt.selectedIndex][Yt]};let yt=at(!1);const kt=Rt=>{const Yt=Rt.target.options;return Array.prototype.map.call(Yt,Dt=>({displayValue:Dt.textContent,exportValue:Dt.value}))};return this.enableScripting&&this.hasJSActions?(O.addEventListener("updatefromsandbox",Rt=>{const Yt={value(Dt){Q==null||Q();const It=Dt.detail.value,Gt=new Set(Array.isArray(It)?It:[It]);for(const Kt of O.options)Kt.selected=Gt.has(Kt.value);L.setValue(e,{value:at(!0)}),yt=at(!1)},multipleSelection(Dt){O.multiple=!0},remove(Dt){const It=O.options,Gt=Dt.detail.remove;It[Gt].selected=!1,O.remove(Gt),It.length>0&&Array.prototype.findIndex.call(It,Qt=>Qt.selected)===-1&&(It[0].selected=!0),L.setValue(e,{value:at(!0),items:kt(Dt)}),yt=at(!1)},clear(Dt){for(;O.length!==0;)O.remove(0);L.setValue(e,{value:null,items:[]}),yt=at(!1)},insert(Dt){const{index:It,displayValue:Gt,exportValue:Kt}=Dt.detail.insert,Qt=O.children[It],te=document.createElement("option");te.textContent=Gt,te.value=Kt,Qt?Qt.before(te):O.append(te),L.setValue(e,{value:at(!0),items:kt(Dt)}),yt=at(!1)},items(Dt){const{items:It}=Dt.detail;for(;O.length!==0;)O.remove(0);for(const Gt of It){const{displayValue:Kt,exportValue:Qt}=Gt,te=document.createElement("option");te.textContent=Kt,te.value=Qt,O.append(te)}O.options.length>0&&(O.options[0].selected=!0),L.setValue(e,{value:at(!0),items:kt(Dt)}),yt=at(!1)},indices(Dt){const It=new Set(Dt.detail.indices);for(const Gt of Dt.target.options)Gt.selected=It.has(Gt.index);L.setValue(e,{value:at(!0)}),yt=at(!1)},editable(Dt){Dt.target.disabled=!Dt.detail.editable}};this._dispatchEventFromSandbox(Yt,Rt)}),O.addEventListener("input",Rt=>{var Dt;const Yt=at(!0);L.setValue(e,{value:Yt}),Rt.preventDefault(),(Dt=this.linkService.eventBus)==null||Dt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:yt,changeEx:Yt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(O,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Rt=>Rt.target.value)):O.addEventListener("input",function(Rt){L.setValue(e,{value:at(!0)})}),this.data.combo&&this._setTextStyle(O),this._setBackgroundColor(O),this._setDefaultPropertiesFromJS(O),this.container.append(O),this.container}}class g extends E{constructor(L){const{data:e,elements:b}=L;super(L,{isRenderable:E._hasPopupData(e)}),this.elements=b}render(){this.container.classList.add("popupAnnotation");const L=new a({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const b of this.elements)b.popup=L,e.push(b.data.id),b.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(b=>`${d.AnnotationPrefix}${b}`).join(",")),this.container}}class a{constructor({container:L,color:e,elements:b,titleObj:O,modificationDate:G,contentsObj:Q,richText:at,parent:yt,rect:kt,parentRect:Rt,open:Yt}){B(this,Bt);B(this,Nt);B(this,$t);B(this,qt);B(this,W,null);B(this,it,q(this,Bt,Ni).bind(this));B(this,et,q(this,qt,ci).bind(this));B(this,ot,q(this,$t,li).bind(this));B(this,pt,q(this,Nt,Fe).bind(this));B(this,Et,null);B(this,gt,null);B(this,Ft,null);B(this,Wt,null);B(this,wt,null);B(this,Lt,null);B(this,bt,!1);B(this,D,null);B(this,N,null);B(this,J,null);B(this,mt,null);B(this,At,!1);var It;st(this,gt,L),st(this,mt,O),st(this,Ft,Q),st(this,J,at),st(this,wt,yt),st(this,Et,e),st(this,N,kt),st(this,Lt,Rt),st(this,Wt,b);const Dt=M.PDFDateString.toDateObject(G);Dt&&st(this,W,yt.l10n.get("annotation_date_string",{date:Dt.toLocaleDateString(),time:Dt.toLocaleTimeString()})),this.trigger=b.flatMap(Gt=>Gt.getElementsToTriggerPopup());for(const Gt of this.trigger)Gt.addEventListener("click",t(this,pt)),Gt.addEventListener("mouseenter",t(this,ot)),Gt.addEventListener("mouseleave",t(this,et)),Gt.classList.add("popupTriggerArea");for(const Gt of b)(It=Gt.container)==null||It.addEventListener("keydown",t(this,it));t(this,gt).hidden=!0,Yt&&q(this,Nt,Fe).call(this)}render(){if(t(this,D))return;const{page:{view:L},viewport:{rawDims:{pageWidth:e,pageHeight:b,pageX:O,pageY:G}}}=t(this,wt),Q=st(this,D,document.createElement("div"));if(Q.className="popup",t(this,Et)){const ne=Q.style.outlineColor=d.Util.makeHexColor(...t(this,Et));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Q.style.backgroundColor=`color-mix(in srgb, ${ne} 30%, white)`:Q.style.backgroundColor=d.Util.makeHexColor(...t(this,Et).map(ce=>Math.floor(.7*(255-ce)+ce)))}const at=document.createElement("span");at.className="header";const yt=document.createElement("h1");if(at.append(yt),{dir:yt.dir,str:yt.textContent}=t(this,mt),Q.append(at),t(this,W)){const ne=document.createElement("span");ne.classList.add("popupDate"),t(this,W).then(ae=>{ne.textContent=ae}),at.append(ne)}const kt=t(this,Ft),Rt=t(this,J);if((Rt==null?void 0:Rt.str)&&(!(kt!=null&&kt.str)||kt.str===Rt.str))H.XfaLayer.render({xfaHtml:Rt.html,intent:"richText",div:Q}),Q.lastChild.classList.add("richText","popupContent");else{const ne=this._formatContents(kt);Q.append(ne)}let Yt=!!t(this,Lt),Dt=Yt?t(this,Lt):t(this,N);for(const ne of t(this,Wt))if(!Dt||d.Util.intersect(ne.data.rect,Dt)!==null){Dt=ne.data.rect,Yt=!0;break}const It=d.Util.normalizeRect([Dt[0],L[3]-Dt[1]+L[1],Dt[2],L[3]-Dt[3]+L[1]]),Gt=5,Kt=Yt?Dt[2]-Dt[0]+Gt:0,Qt=It[0]+Kt,te=It[1],{style:re}=t(this,gt);re.left=`${100*(Qt-O)/e}%`,re.top=`${100*(te-G)/b}%`,t(this,gt).append(Q)}_formatContents({str:L,dir:e}){const b=document.createElement("p");b.classList.add("popupContent"),b.dir=e;const O=L.split(/(?:\r\n?|\n)/);for(let G=0,Q=O.length;G<Q;++G){const at=O[G];b.append(document.createTextNode(at)),G<Q-1&&b.append(document.createElement("br"))}return b}forceHide(){st(this,At,this.isVisible),t(this,At)&&(t(this,gt).hidden=!0)}maybeShow(){!t(this,At)||(st(this,At,!1),t(this,gt).hidden=!1)}get isVisible(){return t(this,gt).hidden===!1}}W=new WeakMap,it=new WeakMap,et=new WeakMap,ot=new WeakMap,pt=new WeakMap,Et=new WeakMap,gt=new WeakMap,Ft=new WeakMap,Wt=new WeakMap,wt=new WeakMap,Lt=new WeakMap,bt=new WeakMap,D=new WeakMap,N=new WeakMap,J=new WeakMap,mt=new WeakMap,At=new WeakMap,Bt=new WeakSet,Ni=function(L){L.altKey||L.shiftKey||L.ctrlKey||L.metaKey||(L.key==="Enter"||L.key==="Escape"&&t(this,bt))&&q(this,Nt,Fe).call(this)},Nt=new WeakSet,Fe=function(){st(this,bt,!t(this,bt)),t(this,bt)?(q(this,$t,li).call(this),t(this,gt).addEventListener("click",t(this,pt)),t(this,gt).addEventListener("keydown",t(this,it))):(q(this,qt,ci).call(this),t(this,gt).removeEventListener("click",t(this,pt)),t(this,gt).removeEventListener("keydown",t(this,it)))},$t=new WeakSet,li=function(){t(this,D)||this.render(),this.isVisible?t(this,bt)&&t(this,gt).classList.add("focused"):(t(this,gt).hidden=!1,t(this,gt).style.zIndex=parseInt(t(this,gt).style.zIndex)+1e3)},qt=new WeakSet,ci=function(){t(this,gt).classList.remove("focused"),!(t(this,bt)||!this.isVisible)&&(t(this,gt).hidden=!0,t(this,gt).style.zIndex=parseInt(t(this,gt).style.zIndex)-1e3)};class k extends E{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0}),this.textContent=L.data.textContent,this.textPosition=L.data.textPosition,this.annotationEditorType=d.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const L=document.createElement("div");L.classList.add("annotationTextContent"),L.setAttribute("role","comment");for(const e of this.textContent){const b=document.createElement("span");b.textContent=e,L.append(b)}this.container.append(L)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}f.FreeTextAnnotationElement=k;class v extends E{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});B(this,tt,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:b,height:O}=j(e.rect),G=this.svgFactory.create(b,O,!0),Q=st(this,tt,this.svgFactory.createElement("svg:line"));return Q.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),Q.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),Q.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),Q.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),Q.setAttribute("stroke-width",e.borderStyle.width||1),Q.setAttribute("stroke","transparent"),Q.setAttribute("fill","transparent"),G.append(Q),this.container.append(G),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,tt)}addHighlightArea(){this.container.classList.add("highlightArea")}}tt=new WeakMap;class z extends E{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});B(this,Y,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:b,height:O}=j(e.rect),G=this.svgFactory.create(b,O,!0),Q=e.borderStyle.width,at=st(this,Y,this.svgFactory.createElement("svg:rect"));return at.setAttribute("x",Q/2),at.setAttribute("y",Q/2),at.setAttribute("width",b-Q),at.setAttribute("height",O-Q),at.setAttribute("stroke-width",Q||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),G.append(at),this.container.append(G),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Y)}addHighlightArea(){this.container.classList.add("highlightArea")}}Y=new WeakMap;class X extends E{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});B(this,vt,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:b,height:O}=j(e.rect),G=this.svgFactory.create(b,O,!0),Q=e.borderStyle.width,at=st(this,vt,this.svgFactory.createElement("svg:ellipse"));return at.setAttribute("cx",b/2),at.setAttribute("cy",O/2),at.setAttribute("rx",b/2-Q/2),at.setAttribute("ry",O/2-Q/2),at.setAttribute("stroke-width",Q||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),G.append(at),this.container.append(G),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,vt)}addHighlightArea(){this.container.classList.add("highlightArea")}}vt=new WeakMap;class C extends E{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});B(this,Ct,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:b,height:O}=j(e.rect),G=this.svgFactory.create(b,O,!0);let Q=[];for(const yt of e.vertices){const kt=yt.x-e.rect[0],Rt=e.rect[3]-yt.y;Q.push(kt+","+Rt)}Q=Q.join(" ");const at=st(this,Ct,this.svgFactory.createElement(this.svgElementName));return at.setAttribute("points",Q),at.setAttribute("stroke-width",e.borderStyle.width||1),at.setAttribute("stroke","transparent"),at.setAttribute("fill","transparent"),G.append(at),this.container.append(G),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Ct)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ct=new WeakMap;class K extends C{constructor(L){super(L),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class rt extends E{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class dt extends E{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});B(this,ie,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=d.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:b,height:O}=j(e.rect),G=this.svgFactory.create(b,O,!0);for(const Q of e.inkLists){let at=[];for(const kt of Q){const Rt=kt.x-e.rect[0],Yt=e.rect[3]-kt.y;at.push(`${Rt},${Yt}`)}at=at.join(" ");const yt=this.svgFactory.createElement(this.svgElementName);t(this,ie).push(yt),yt.setAttribute("points",at),yt.setAttribute("stroke-width",e.borderStyle.width||1),yt.setAttribute("stroke","transparent"),yt.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),G.append(yt)}return this.container.append(G),this.container}getElementsToTriggerPopup(){return t(this,ie)}addHighlightArea(){this.container.classList.add("highlightArea")}}ie=new WeakMap,f.InkAnnotationElement=dt;class V extends E{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ut extends E{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class _t extends E{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class xt extends E{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Mt extends E{constructor(L){super(L,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}f.StampAnnotationElement=Mt;class w extends E{constructor(e){var G;super(e,{isRenderable:!0});B(this,Z);B(this,ee,null);const{filename:b,content:O}=this.data.file;this.filename=(0,M.getFilenameFromUrl)(b,!0),this.content=O,(G=this.linkService.eventBus)==null||G.dispatch("fileattachmentannotation",{source:this,filename:b,content:O})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:b}=this;let O;b.hasAppearance||b.fillAlpha===0?O=document.createElement("div"):(O=document.createElement("img"),O.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(b.name)?"paperclip":"pushpin"}.svg`,b.fillAlpha&&b.fillAlpha<1&&(O.style=`filter: opacity(${Math.round(b.fillAlpha*100)}%);`)),O.addEventListener("dblclick",q(this,Z,hi).bind(this)),st(this,ee,O);const{isMac:G}=d.FeatureTest.platform;return e.addEventListener("keydown",Q=>{Q.key==="Enter"&&(G?Q.metaKey:Q.ctrlKey)&&q(this,Z,hi).call(this)}),!b.popupRef&&this.hasPopupData?this._createPopup():O.classList.add("popupTriggerArea"),e.append(O),e}getElementsToTriggerPopup(){return t(this,ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}ee=new WeakMap,Z=new WeakSet,hi=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.container,this.content,this.filename)};class i{constructor({div:L,accessibilityManager:e,annotationCanvasMap:b,l10n:O,page:G,viewport:Q}){B(this,jt);B(this,St);B(this,Ot,null);B(this,Pt,null);B(this,Ut,new Map);this.div=L,st(this,Ot,e),st(this,Pt,b),this.l10n=O,this.page=G,this.viewport=Q,this.zIndex=0,this.l10n||(this.l10n=ft.NullL10n)}async render(L){const{annotations:e}=L,b=this.div;(0,M.setLayerDimensions)(b,this.viewport);const O=new Map,G={data:null,layer:b,linkService:L.linkService,downloadManager:L.downloadManager,imageResourcesPath:L.imageResourcesPath||"",renderForms:L.renderForms!==!1,svgFactory:new M.DOMSVGFactory,annotationStorage:L.annotationStorage||new nt.AnnotationStorage,enableScripting:L.enableScripting===!0,hasJSActions:L.hasJSActions,fieldObjects:L.fieldObjects,parent:this,elements:null};for(const Q of e){if(Q.noHTML)continue;const at=Q.annotationType===d.AnnotationType.POPUP;if(at){const Rt=O.get(Q.id);if(!Rt)continue;G.elements=Rt}else{const{width:Rt,height:Yt}=j(Q.rect);if(Rt<=0||Yt<=0)continue}G.data=Q;const yt=R.create(G);if(!yt.isRenderable)continue;if(!at&&Q.popupRef){const Rt=O.get(Q.popupRef);Rt?Rt.push(yt):O.set(Q.popupRef,[yt])}yt.annotationEditorType>0&&t(this,Ut).set(yt.data.id,yt);const kt=yt.render();Q.hidden&&(kt.style.visibility="hidden"),q(this,jt,Bi).call(this,kt,Q.id)}q(this,St,di).call(this),await this.l10n.translate(b)}update({viewport:L}){const e=this.div;this.viewport=L,(0,M.setLayerDimensions)(e,{rotation:L.rotation}),q(this,St,di).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(t(this,Ut).values())}getEditableAnnotation(L){return t(this,Ut).get(L)}}Ot=new WeakMap,Pt=new WeakMap,Ut=new WeakMap,jt=new WeakSet,Bi=function(L,e){var O;const b=L.firstChild||L;b.id=`${d.AnnotationPrefix}${e}`,this.div.append(L),(O=t(this,Ot))==null||O.moveElementInDOM(this.div,L,b,!1)},St=new WeakSet,di=function(){if(!t(this,Pt))return;const L=this.div;for(const[e,b]of t(this,Pt)){const O=L.querySelector(`[data-annotation-id="${e}"]`);if(!O)continue;const{firstChild:G}=O;G?G.nodeName==="CANVAS"?G.replaceWith(b):G.before(b):O.append(b)}t(this,Pt).clear()},f.AnnotationLayer=i},(lt,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.ColorConverters=void 0;function ct(nt){return Math.floor(Math.max(0,Math.min(1,nt))*255).toString(16).padStart(2,"0")}function d(nt){return Math.max(0,Math.min(255,255*nt))}class M{static CMYK_G([$,ft,H,F]){return["G",1-Math.min(1,.3*$+.59*H+.11*ft+F)]}static G_CMYK([$]){return["CMYK",0,0,0,1-$]}static G_RGB([$]){return["RGB",$,$,$]}static G_rgb([$]){return $=d($),[$,$,$]}static G_HTML([$]){const ft=ct($);return`#${ft}${ft}${ft}`}static RGB_G([$,ft,H]){return["G",.3*$+.59*ft+.11*H]}static RGB_rgb($){return $.map(d)}static RGB_HTML($){return`#${$.map(ct).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([$,ft,H,F]){return["RGB",1-Math.min(1,$+F),1-Math.min(1,H+F),1-Math.min(1,ft+F)]}static CMYK_rgb([$,ft,H,F]){return[d(1-Math.min(1,$+F)),d(1-Math.min(1,H+F)),d(1-Math.min(1,ft+F))]}static CMYK_HTML($){const ft=this.CMYK_RGB($).slice(1);return this.RGB_HTML(ft)}static RGB_CMYK([$,ft,H]){const F=1-$,m=1-ft,U=1-H,j=Math.min(F,m,U);return["CMYK",F,m,U,j]}}f.ColorConverters=M},(lt,f)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.NullL10n=void 0,f.getL10nFallback=d;const ct={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xD7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xD7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};ct.print_progress_percent="{{progress}}%";function d($,ft){switch($){case"find_match_count":$=`find_match_count[${ft.total===1?"one":"other"}]`;break;case"find_match_count_limit":$=`find_match_count_limit[${ft.limit===1?"one":"other"}]`;break}return ct[$]||""}function M($,ft){return ft?$.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(H,F)=>F in ft?ft[F]:"{{"+F+"}}"):$}const nt={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get($,ft=null,H=d($,ft)){return M(H,ft)},async translate($){}};f.NullL10n=nt},(lt,f,ct)=>{Object.defineProperty(f,"__esModule",{value:!0}),f.XfaLayer=void 0;var d=ct(25);class M{static setupStorage($,ft,H,F,m){const U=F.getValue(ft,{value:null});switch(H.name){case"textarea":if(U.value!==null&&($.textContent=U.value),m==="print")break;$.addEventListener("input",j=>{F.setValue(ft,{value:j.target.value})});break;case"input":if(H.attributes.type==="radio"||H.attributes.type==="checkbox"){if(U.value===H.attributes.xfaOn?$.setAttribute("checked",!0):U.value===H.attributes.xfaOff&&$.removeAttribute("checked"),m==="print")break;$.addEventListener("change",j=>{F.setValue(ft,{value:j.target.checked?j.target.getAttribute("xfaOn"):j.target.getAttribute("xfaOff")})})}else{if(U.value!==null&&$.setAttribute("value",U.value),m==="print")break;$.addEventListener("input",j=>{F.setValue(ft,{value:j.target.value})})}break;case"select":if(U.value!==null){$.setAttribute("value",U.value);for(const j of H.children)j.attributes.value===U.value?j.attributes.selected=!0:j.attributes.hasOwnProperty("selected")&&delete j.attributes.selected}$.addEventListener("input",j=>{const R=j.target.options,E=R.selectedIndex===-1?"":R[R.selectedIndex].value;F.setValue(ft,{value:E})});break}}static setAttributes({html:$,element:ft,storage:H=null,intent:F,linkService:m}){const{attributes:U}=ft,j=$ instanceof HTMLAnchorElement;U.type==="radio"&&(U.name=`${U.name}-${F}`);for(const[R,E]of Object.entries(U))if(E!=null)switch(R){case"class":E.length&&$.setAttribute(R,E.join(" "));break;case"dataId":break;case"id":$.setAttribute("data-element-id",E);break;case"style":Object.assign($.style,E);break;case"textContent":$.textContent=E;break;default:(!j||R!=="href"&&R!=="newWindow")&&$.setAttribute(R,E)}j&&m.addLinkAttributes($,U.href,U.newWindow),H&&U.dataId&&this.setupStorage($,U.dataId,ft,H)}static render($){var S;const ft=$.annotationStorage,H=$.linkService,F=$.xfaHtml,m=$.intent||"display",U=document.createElement(F.name);F.attributes&&this.setAttributes({html:U,element:F,intent:m,linkService:H});const j=[[F,-1,U]],R=$.div;if(R.append(U),$.viewport){const p=`matrix(${$.viewport.transform.join(",")})`;R.style.transform=p}m!=="richText"&&R.setAttribute("class","xfaLayer xfaFont");const E=[];for(;j.length>0;){const[p,_,T]=j.at(-1);if(_+1===p.children.length){j.pop();continue}const x=p.children[++j.at(-1)[1]];if(x===null)continue;const{name:A}=x;if(A==="#text"){const o=document.createTextNode(x.value);E.push(o),T.append(o);continue}const r=(S=x==null?void 0:x.attributes)!=null&&S.xmlns?document.createElementNS(x.attributes.xmlns,A):document.createElement(A);if(T.append(r),x.attributes&&this.setAttributes({html:r,element:x,storage:ft,intent:m,linkService:H}),x.children&&x.children.length>0)j.push([x,-1,r]);else if(x.value){const o=document.createTextNode(x.value);d.XfaText.shouldBuildText(A)&&E.push(o),r.append(o)}}for(const p of R.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:E}}static update($){const ft=`matrix(${$.viewport.transform.join(",")})`;$.div.style.transform=ft,$.div.hidden=!1}}f.XfaLayer=M},(lt,f,ct)=>{var F,m,U,j,R,E,S,p,_,T,x,A,r,o,P,Ui,a,ji,v,Hi,X,Wi,K,ui,dt,zi,ut,fi,xt,Vi,w,Gi,n,$i,l,Xi,y,qi,W,le,et,pi,pt,De,gt,Ie,Wt,ge,Lt,gi,D,Le,J,Yi,At,mi,zt,Ki,Vt,Ji,Xt,bi,ht,Oe,Y,me;Object.defineProperty(f,"__esModule",{value:!0}),f.InkEditor=void 0;var d=ct(1),M=ct(4),nt=ct(29),$=ct(6),ft=ct(5);const Ct=class extends M.AnnotationEditor{constructor(Z){super({...Z,name:"inkEditor"});B(this,P);B(this,a);B(this,v);B(this,X);B(this,K);B(this,dt);B(this,ut);B(this,xt);B(this,w);B(this,n);B(this,l);B(this,y);B(this,W);B(this,et);B(this,pt);B(this,gt);B(this,Wt);B(this,Lt);B(this,D);B(this,Vt);B(this,Xt);B(this,ht);B(this,Y);B(this,F,0);B(this,m,0);B(this,U,this.canvasPointermove.bind(this));B(this,j,this.canvasPointerleave.bind(this));B(this,R,this.canvasPointerup.bind(this));B(this,E,this.canvasPointerdown.bind(this));B(this,S,new Path2D);B(this,p,!1);B(this,_,!1);B(this,T,!1);B(this,x,null);B(this,A,0);B(this,r,0);B(this,o,null);this.color=Z.color||null,this.thickness=Z.thickness||null,this.opacity=Z.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Z){M.AnnotationEditor.initialize(Z,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Z,Tt){switch(Z){case d.AnnotationEditorParamsType.INK_THICKNESS:Ct._defaultThickness=Tt;break;case d.AnnotationEditorParamsType.INK_COLOR:Ct._defaultColor=Tt;break;case d.AnnotationEditorParamsType.INK_OPACITY:Ct._defaultOpacity=Tt/100;break}}updateParams(Z,Tt){switch(Z){case d.AnnotationEditorParamsType.INK_THICKNESS:q(this,P,Ui).call(this,Tt);break;case d.AnnotationEditorParamsType.INK_COLOR:q(this,a,ji).call(this,Tt);break;case d.AnnotationEditorParamsType.INK_OPACITY:q(this,v,Hi).call(this,Tt);break}}static get defaultPropertiesToUpdate(){return[[d.AnnotationEditorParamsType.INK_THICKNESS,Ct._defaultThickness],[d.AnnotationEditorParamsType.INK_COLOR,Ct._defaultColor||M.AnnotationEditor._defaultLineColor],[d.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ct._defaultOpacity*100)]]}get propertiesToUpdate(){var Z;return[[d.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ct._defaultThickness],[d.AnnotationEditorParamsType.INK_COLOR,this.color||Ct._defaultColor||M.AnnotationEditor._defaultLineColor],[d.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((Z=this.opacity)!=null?Z:Ct._defaultOpacity))]]}rebuild(){!this.parent||(super.rebuild(),this.div!==null&&(this.canvas||(q(this,pt,De).call(this),q(this,gt,Ie).call(this)),this.isAttachedToDOM||(this.parent.add(this),q(this,Wt,ge).call(this)),q(this,Y,me).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,x).disconnect(),st(this,x,null),super.remove())}setParent(Z){!this.parent&&Z?this._uiManager.removeShouldRescale(this):this.parent&&Z===null&&this._uiManager.addShouldRescale(this),super.setParent(Z)}onScaleChanging(){const[Z,Tt]=this.parentDimensions,Ot=this.width*Z,Pt=this.height*Tt;this.setDimensions(Ot,Pt)}enableEditMode(){t(this,p)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",t(this,E)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,E)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,p)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),st(this,p,!0),this.div.classList.add("disabled"),q(this,Y,me).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Z){!this._focusEventsAllowed||(super.focusin(Z),this.enableEditMode())}canvasPointerdown(Z){Z.button!==0||!this.isInEditMode()||t(this,p)||(this.setInForeground(),Z.preventDefault(),Z.type!=="mouse"&&this.div.focus(),q(this,dt,zi).call(this,Z.offsetX,Z.offsetY))}canvasPointermove(Z){Z.preventDefault(),q(this,ut,fi).call(this,Z.offsetX,Z.offsetY)}canvasPointerup(Z){Z.preventDefault(),q(this,et,pi).call(this,Z)}canvasPointerleave(Z){q(this,et,pi).call(this,Z)}get isResizable(){return!this.isEmpty()&&t(this,p)}render(){if(this.div)return this.div;let Z,Tt;this.width&&(Z=this.x,Tt=this.y),super.render(),M.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Zt=>{var St;return(St=this.div)==null?void 0:St.setAttribute("aria-label",Zt)});const[Ot,Pt,Ut,jt]=q(this,X,Wi).call(this);if(this.setAt(Ot,Pt,0,0),this.setDims(Ut,jt),q(this,pt,De).call(this),this.width){const[Zt,St]=this.parentDimensions;this.setAspectRatio(this.width*Zt,this.height*St),this.setAt(Z*Zt,Tt*St,this.width*Zt,this.height*St),st(this,T,!0),q(this,Wt,ge).call(this),this.setDims(this.width*Zt,this.height*St),q(this,W,le).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return q(this,gt,Ie).call(this),this.div}setDimensions(Z,Tt){const Ot=Math.round(Z),Pt=Math.round(Tt);if(t(this,A)===Ot&&t(this,r)===Pt)return;st(this,A,Ot),st(this,r,Pt),this.canvas.style.visibility="hidden";const[Ut,jt]=this.parentDimensions;this.width=Z/Ut,this.height=Tt/jt,this.fixAndSetPosition(),t(this,p)&&q(this,Lt,gi).call(this,Z,Tt),q(this,Wt,ge).call(this),q(this,W,le).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Z,Tt,Ot){var G,Q,at;if(Z instanceof nt.InkAnnotationElement)return null;const Pt=super.deserialize(Z,Tt,Ot);Pt.thickness=Z.thickness,Pt.color=d.Util.makeHexColor(...Z.color),Pt.opacity=Z.opacity;const[Ut,jt]=Pt.pageDimensions,Zt=Pt.width*Ut,St=Pt.height*jt,Jt=Pt.parentScale,Ht=Z.thickness/2;st(Pt,p,!0),st(Pt,A,Math.round(Zt)),st(Pt,r,Math.round(St));const{paths:L,rect:e,rotation:b}=Z;for(let{bezier:yt}of L){yt=q(G=Ct,zt,Ki).call(G,yt,e,b);const kt=[];Pt.paths.push(kt);let Rt=Jt*(yt[0]-Ht),Yt=Jt*(yt[1]-Ht);for(let It=2,Gt=yt.length;It<Gt;It+=6){const Kt=Jt*(yt[It]-Ht),Qt=Jt*(yt[It+1]-Ht),te=Jt*(yt[It+2]-Ht),re=Jt*(yt[It+3]-Ht),ne=Jt*(yt[It+4]-Ht),ae=Jt*(yt[It+5]-Ht);kt.push([[Rt,Yt],[Kt,Qt],[te,re],[ne,ae]]),Rt=ne,Yt=ae}const Dt=q(this,J,Yi).call(this,kt);Pt.bezierPath2D.push(Dt)}const O=q(Q=Pt,Xt,bi).call(Q);return st(Pt,m,Math.max(M.AnnotationEditor.MIN_SIZE,O[2]-O[0])),st(Pt,F,Math.max(M.AnnotationEditor.MIN_SIZE,O[3]-O[1])),q(at=Pt,Lt,gi).call(at,Zt,St),Pt}serialize(){if(this.isEmpty())return null;const Z=this.getRect(0,0),Tt=M.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:d.AnnotationEditorType.INK,color:Tt,thickness:this.thickness,opacity:this.opacity,paths:q(this,Vt,Ji).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Z),pageIndex:this.pageIndex,rect:Z,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};let H=Ct;F=new WeakMap,m=new WeakMap,U=new WeakMap,j=new WeakMap,R=new WeakMap,E=new WeakMap,S=new WeakMap,p=new WeakMap,_=new WeakMap,T=new WeakMap,x=new WeakMap,A=new WeakMap,r=new WeakMap,o=new WeakMap,P=new WeakSet,Ui=function(Z){const Tt=this.thickness;this.addCommands({cmd:()=>{this.thickness=Z,q(this,Y,me).call(this)},undo:()=>{this.thickness=Tt,q(this,Y,me).call(this)},mustExec:!0,type:d.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},a=new WeakSet,ji=function(Z){const Tt=this.color;this.addCommands({cmd:()=>{this.color=Z,q(this,W,le).call(this)},undo:()=>{this.color=Tt,q(this,W,le).call(this)},mustExec:!0,type:d.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},v=new WeakSet,Hi=function(Z){Z/=100;const Tt=this.opacity;this.addCommands({cmd:()=>{this.opacity=Z,q(this,W,le).call(this)},undo:()=>{this.opacity=Tt,q(this,W,le).call(this)},mustExec:!0,type:d.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},X=new WeakSet,Wi=function(){const{parentRotation:Z,parentDimensions:[Tt,Ot]}=this;switch(Z){case 90:return[0,Ot,Ot,Tt];case 180:return[Tt,Ot,Tt,Ot];case 270:return[Tt,0,Ot,Tt];default:return[0,0,Tt,Ot]}},K=new WeakSet,ui=function(){const{ctx:Z,color:Tt,opacity:Ot,thickness:Pt,parentScale:Ut,scaleFactor:jt}=this;Z.lineWidth=Pt*Ut/jt,Z.lineCap="round",Z.lineJoin="round",Z.miterLimit=10,Z.strokeStyle=`${Tt}${(0,ft.opacityToHex)(Ot)}`},dt=new WeakSet,zi=function(Z,Tt){var Ot;this.canvas.addEventListener("contextmenu",$.noContextMenu),this.canvas.addEventListener("pointerleave",t(this,j)),this.canvas.addEventListener("pointermove",t(this,U)),this.canvas.addEventListener("pointerup",t(this,R)),this.canvas.removeEventListener("pointerdown",t(this,E)),this.isEditing=!0,t(this,T)||(st(this,T,!0),q(this,Wt,ge).call(this),this.thickness||(this.thickness=Ct._defaultThickness),this.color||(this.color=Ct._defaultColor||M.AnnotationEditor._defaultLineColor),(Ot=this.opacity)!=null||(this.opacity=Ct._defaultOpacity)),this.currentPath.push([Z,Tt]),st(this,_,!1),q(this,K,ui).call(this),st(this,o,()=>{q(this,n,$i).call(this),t(this,o)&&window.requestAnimationFrame(t(this,o))}),window.requestAnimationFrame(t(this,o))},ut=new WeakSet,fi=function(Z,Tt){const[Ot,Pt]=this.currentPath.at(-1);if(this.currentPath.length>1&&Z===Ot&&Tt===Pt)return;const Ut=this.currentPath;let jt=t(this,S);if(Ut.push([Z,Tt]),st(this,_,!0),Ut.length<=2){jt.moveTo(...Ut[0]),jt.lineTo(Z,Tt);return}Ut.length===3&&(st(this,S,jt=new Path2D),jt.moveTo(...Ut[0])),q(this,l,Xi).call(this,jt,...Ut.at(-3),...Ut.at(-2),Z,Tt)},xt=new WeakSet,Vi=function(){if(this.currentPath.length===0)return;const Z=this.currentPath.at(-1);t(this,S).lineTo(...Z)},w=new WeakSet,Gi=function(Z,Tt){st(this,o,null),Z=Math.min(Math.max(Z,0),this.canvas.width),Tt=Math.min(Math.max(Tt,0),this.canvas.height),q(this,ut,fi).call(this,Z,Tt),q(this,xt,Vi).call(this);let Ot;if(this.currentPath.length!==1)Ot=q(this,y,qi).call(this);else{const St=[Z,Tt];Ot=[[St,St.slice(),St.slice(),St]]}const Pt=t(this,S),Ut=this.currentPath;this.currentPath=[],st(this,S,new Path2D);const jt=()=>{this.allRawPaths.push(Ut),this.paths.push(Ot),this.bezierPath2D.push(Pt),this.rebuild()},Zt=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(q(this,pt,De).call(this),q(this,gt,Ie).call(this)),q(this,Y,me).call(this))};this.addCommands({cmd:jt,undo:Zt,mustExec:!0})},n=new WeakSet,$i=function(){if(!t(this,_))return;st(this,_,!1);const Z=Math.ceil(this.thickness*this.parentScale),Tt=this.currentPath.slice(-3),Ot=Tt.map(jt=>jt[0]),Pt=Tt.map(jt=>jt[1]);Math.min(...Ot)-Z,Math.max(...Ot)+Z,Math.min(...Pt)-Z,Math.max(...Pt)+Z;const{ctx:Ut}=this;Ut.save(),Ut.clearRect(0,0,this.canvas.width,this.canvas.height);for(const jt of this.bezierPath2D)Ut.stroke(jt);Ut.stroke(t(this,S)),Ut.restore()},l=new WeakSet,Xi=function(Z,Tt,Ot,Pt,Ut,jt,Zt){const St=(Tt+Pt)/2,Jt=(Ot+Ut)/2,Ht=(Pt+jt)/2,L=(Ut+Zt)/2;Z.bezierCurveTo(St+2*(Pt-St)/3,Jt+2*(Ut-Jt)/3,Ht+2*(Pt-Ht)/3,L+2*(Ut-L)/3,Ht,L)},y=new WeakSet,qi=function(){const Z=this.currentPath;if(Z.length<=2)return[[Z[0],Z[0],Z.at(-1),Z.at(-1)]];const Tt=[];let Ot,[Pt,Ut]=Z[0];for(Ot=1;Ot<Z.length-2;Ot++){const[e,b]=Z[Ot],[O,G]=Z[Ot+1],Q=(e+O)/2,at=(b+G)/2,yt=[Pt+2*(e-Pt)/3,Ut+2*(b-Ut)/3],kt=[Q+2*(e-Q)/3,at+2*(b-at)/3];Tt.push([[Pt,Ut],yt,kt,[Q,at]]),[Pt,Ut]=[Q,at]}const[jt,Zt]=Z[Ot],[St,Jt]=Z[Ot+1],Ht=[Pt+2*(jt-Pt)/3,Ut+2*(Zt-Ut)/3],L=[St+2*(jt-St)/3,Jt+2*(Zt-Jt)/3];return Tt.push([[Pt,Ut],Ht,L,[St,Jt]]),Tt},W=new WeakSet,le=function(){if(this.isEmpty()){q(this,D,Le).call(this);return}q(this,K,ui).call(this);const{canvas:Z,ctx:Tt}=this;Tt.setTransform(1,0,0,1,0,0),Tt.clearRect(0,0,Z.width,Z.height),q(this,D,Le).call(this);for(const Ot of this.bezierPath2D)Tt.stroke(Ot)},et=new WeakSet,pi=function(Z){this.canvas.removeEventListener("pointerleave",t(this,j)),this.canvas.removeEventListener("pointermove",t(this,U)),this.canvas.removeEventListener("pointerup",t(this,R)),this.canvas.addEventListener("pointerdown",t(this,E)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",$.noContextMenu)},10),q(this,w,Gi).call(this,Z.offsetX,Z.offsetY),this.addToAnnotationStorage(),this.setInBackground()},pt=new WeakSet,De=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",M.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Z=>{var Tt;return(Tt=this.canvas)==null?void 0:Tt.setAttribute("aria-label",Z)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},gt=new WeakSet,Ie=function(){st(this,x,new ResizeObserver(Z=>{const Tt=Z[0].contentRect;Tt.width&&Tt.height&&this.setDimensions(Tt.width,Tt.height)})),t(this,x).observe(this.div)},Wt=new WeakSet,ge=function(){if(!t(this,T))return;const[Z,Tt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Z),this.canvas.height=Math.ceil(this.height*Tt),q(this,D,Le).call(this)},Lt=new WeakSet,gi=function(Z,Tt){const Ot=q(this,ht,Oe).call(this),Pt=(Z-Ot)/t(this,m),Ut=(Tt-Ot)/t(this,F);this.scaleFactor=Math.min(Pt,Ut)},D=new WeakSet,Le=function(){const Z=q(this,ht,Oe).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Z,this.translationY*this.scaleFactor+Z)},J=new WeakSet,Yi=function(Z){const Tt=new Path2D;for(let Ot=0,Pt=Z.length;Ot<Pt;Ot++){const[Ut,jt,Zt,St]=Z[Ot];Ot===0&&Tt.moveTo(...Ut),Tt.bezierCurveTo(jt[0],jt[1],Zt[0],Zt[1],St[0],St[1])}return Tt},At=new WeakSet,mi=function(Z,Tt,Ot){const[Pt,Ut,jt,Zt]=Tt;switch(Ot){case 0:for(let St=0,Jt=Z.length;St<Jt;St+=2)Z[St]+=Pt,Z[St+1]=Zt-Z[St+1];break;case 90:for(let St=0,Jt=Z.length;St<Jt;St+=2){const Ht=Z[St];Z[St]=Z[St+1]+Pt,Z[St+1]=Ht+Ut}break;case 180:for(let St=0,Jt=Z.length;St<Jt;St+=2)Z[St]=jt-Z[St],Z[St+1]+=Ut;break;case 270:for(let St=0,Jt=Z.length;St<Jt;St+=2){const Ht=Z[St];Z[St]=jt-Z[St+1],Z[St+1]=Zt-Ht}break;default:throw new Error("Invalid rotation")}return Z},zt=new WeakSet,Ki=function(Z,Tt,Ot){const[Pt,Ut,jt,Zt]=Tt;switch(Ot){case 0:for(let St=0,Jt=Z.length;St<Jt;St+=2)Z[St]-=Pt,Z[St+1]=Zt-Z[St+1];break;case 90:for(let St=0,Jt=Z.length;St<Jt;St+=2){const Ht=Z[St];Z[St]=Z[St+1]-Ut,Z[St+1]=Ht-Pt}break;case 180:for(let St=0,Jt=Z.length;St<Jt;St+=2)Z[St]=jt-Z[St],Z[St+1]-=Ut;break;case 270:for(let St=0,Jt=Z.length;St<Jt;St+=2){const Ht=Z[St];Z[St]=Zt-Z[St+1],Z[St+1]=jt-Ht}break;default:throw new Error("Invalid rotation")}return Z},Vt=new WeakSet,Ji=function(Z,Tt,Ot,Pt){var Jt,Ht;const Ut=[],jt=this.thickness/2,Zt=Z*Tt+jt,St=Z*Ot+jt;for(const L of this.paths){const e=[],b=[];for(let O=0,G=L.length;O<G;O++){const[Q,at,yt,kt]=L[O],Rt=Z*Q[0]+Zt,Yt=Z*Q[1]+St,Dt=Z*at[0]+Zt,It=Z*at[1]+St,Gt=Z*yt[0]+Zt,Kt=Z*yt[1]+St,Qt=Z*kt[0]+Zt,te=Z*kt[1]+St;O===0&&(e.push(Rt,Yt),b.push(Rt,Yt)),e.push(Dt,It,Gt,Kt,Qt,te),b.push(Dt,It),O===G-1&&b.push(Qt,te)}Ut.push({bezier:q(Jt=Ct,At,mi).call(Jt,e,Pt,this.rotation),points:q(Ht=Ct,At,mi).call(Ht,b,Pt,this.rotation)})}return Ut},Xt=new WeakSet,bi=function(){let Z=1/0,Tt=-1/0,Ot=1/0,Pt=-1/0;for(const Ut of this.paths)for(const[jt,Zt,St,Jt]of Ut){const Ht=d.Util.bezierBoundingBox(...jt,...Zt,...St,...Jt);Z=Math.min(Z,Ht[0]),Ot=Math.min(Ot,Ht[1]),Tt=Math.max(Tt,Ht[2]),Pt=Math.max(Pt,Ht[3])}return[Z,Ot,Tt,Pt]},ht=new WeakSet,Oe=function(){return t(this,p)?Math.ceil(this.thickness*this.parentScale):0},Y=new WeakSet,me=function(Z=!1){if(this.isEmpty())return;if(!t(this,p)){q(this,W,le).call(this);return}const Tt=q(this,Xt,bi).call(this),Ot=q(this,ht,Oe).call(this);st(this,m,Math.max(M.AnnotationEditor.MIN_SIZE,Tt[2]-Tt[0])),st(this,F,Math.max(M.AnnotationEditor.MIN_SIZE,Tt[3]-Tt[1]));const Pt=Math.ceil(Ot+t(this,m)*this.scaleFactor),Ut=Math.ceil(Ot+t(this,F)*this.scaleFactor),[jt,Zt]=this.parentDimensions;this.width=Pt/jt,this.height=Ut/Zt,this.setAspectRatio(Pt,Ut);const St=this.translationX,Jt=this.translationY;this.translationX=-Tt[0],this.translationY=-Tt[1],q(this,Wt,ge).call(this),q(this,W,le).call(this),st(this,A,Pt),st(this,r,Ut),this.setDims(Pt,Ut);const Ht=Z?Ot/this.scaleFactor/2:0;this.translate(St-this.translationX-Ht,Jt-this.translationY-Ht)},B(H,J),B(H,At),B(H,zt),se(H,"_defaultColor",null),se(H,"_defaultOpacity",1),se(H,"_defaultThickness",1),se(H,"_type","ink"),f.InkEditor=H},(lt,f,ct)=>{var H,F,m,U,j,R,E,S,p,_,T,Ee,A,we,o,Ne,g,_i,k,Qi,z,Zi,C,Ai,rt,Be,V,ts;Object.defineProperty(f,"__esModule",{value:!0}),f.StampEditor=void 0;var d=ct(1),M=ct(4),nt=ct(6),$=ct(29);const _t=class extends M.AnnotationEditor{constructor(w){super({...w,name:"stampEditor"});B(this,T);B(this,A);B(this,o);B(this,g);B(this,k);B(this,z);B(this,C);B(this,rt);B(this,V);B(this,H,null);B(this,F,null);B(this,m,null);B(this,U,null);B(this,j,null);B(this,R,null);B(this,E,null);B(this,S,null);B(this,p,!1);B(this,_,!1);st(this,U,w.bitmapUrl),st(this,j,w.bitmapFile)}static initialize(w){M.AnnotationEditor.initialize(w)}static get supportedTypes(){const w=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,d.shadow)(this,"supportedTypes",w.map(i=>`image/${i}`))}static get supportedTypesStr(){return(0,d.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(w){return this.supportedTypes.includes(w)}static paste(w,i){i.pasteEditor(d.AnnotationEditorType.STAMP,{bitmapFile:w.getAsFile()})}remove(){var w,i;t(this,F)&&(st(this,H,null),this._uiManager.imageManager.deleteId(t(this,F)),(w=t(this,R))==null||w.remove(),st(this,R,null),(i=t(this,E))==null||i.disconnect(),st(this,E,null)),super.remove()}rebuild(){if(!this.parent){t(this,F)&&q(this,o,Ne).call(this);return}super.rebuild(),this.div!==null&&(t(this,F)&&q(this,o,Ne).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(t(this,m)||t(this,H)||t(this,U)||t(this,j))}get isResizable(){return!0}render(){if(this.div)return this.div;let w,i;if(this.width&&(w=this.x,i=this.y),super.render(),this.div.hidden=!0,t(this,H)?q(this,g,_i).call(this):q(this,o,Ne).call(this),this.width){const[n,s]=this.parentDimensions;this.setAt(w*n,i*s,this.width*n,this.height*s)}return this.div}static deserialize(w,i,n){if(w instanceof $.StampAnnotationElement)return null;const s=super.deserialize(w,i,n),{rect:l,bitmapUrl:u,bitmapId:y,isSvg:I,accessibilityData:W}=w;y&&n.imageManager.isValidId(y)?st(s,F,y):st(s,U,u),st(s,p,I);const[it,et]=s.pageDimensions;return s.width=(l[2]-l[0])/it,s.height=(l[3]-l[1])/et,W&&(s.altTextData=W),s}serialize(w=!1,i=null){if(this.isEmpty())return null;const n={annotationType:d.AnnotationEditorType.STAMP,bitmapId:t(this,F),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,p),structTreeParentId:this._structTreeParentId};if(w)return n.bitmapUrl=q(this,rt,Be).call(this,!0),n.accessibilityData=this.altTextData,n;const{decorative:s,altText:l}=this.altTextData;if(!s&&l&&(n.accessibilityData={type:"Figure",alt:l}),i===null)return n;i.stamps||(i.stamps=new Map);const u=t(this,p)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!i.stamps.has(t(this,F)))i.stamps.set(t(this,F),{area:u,serialized:n}),n.bitmap=q(this,rt,Be).call(this,!1);else if(t(this,p)){const y=i.stamps.get(t(this,F));u>y.area&&(y.area=u,y.serialized.bitmap.close(),y.serialized.bitmap=q(this,rt,Be).call(this,!1))}return n}};let ft=_t;H=new WeakMap,F=new WeakMap,m=new WeakMap,U=new WeakMap,j=new WeakMap,R=new WeakMap,E=new WeakMap,S=new WeakMap,p=new WeakMap,_=new WeakMap,T=new WeakSet,Ee=function(w,i=!1){if(!w){this.remove();return}st(this,H,w.bitmap),i||(st(this,F,w.id),st(this,p,w.isSvg)),q(this,g,_i).call(this)},A=new WeakSet,we=function(){st(this,m,null),this._uiManager.enableWaiting(!1),t(this,R)&&this.div.focus()},o=new WeakSet,Ne=function(){if(t(this,F)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(t(this,F)).then(i=>q(this,T,Ee).call(this,i,!0)).finally(()=>q(this,A,we).call(this));return}if(t(this,U)){const i=t(this,U);st(this,U,null),this._uiManager.enableWaiting(!0),st(this,m,this._uiManager.imageManager.getFromUrl(i).then(n=>q(this,T,Ee).call(this,n)).finally(()=>q(this,A,we).call(this)));return}if(t(this,j)){const i=t(this,j);st(this,j,null),this._uiManager.enableWaiting(!0),st(this,m,this._uiManager.imageManager.getFromFile(i).then(n=>q(this,T,Ee).call(this,n)).finally(()=>q(this,A,we).call(this)));return}const w=document.createElement("input");w.type="file",w.accept=_t.supportedTypesStr,st(this,m,new Promise(i=>{w.addEventListener("change",async()=>{if(!w.files||w.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const n=await this._uiManager.imageManager.getFromFile(w.files[0]);q(this,T,Ee).call(this,n)}i()}),w.addEventListener("cancel",()=>{this.remove(),i()})}).finally(()=>q(this,A,we).call(this))),w.click()},g=new WeakSet,_i=function(){const{div:w}=this;let{width:i,height:n}=t(this,H);const[s,l]=this.pageDimensions,u=.75;if(this.width)i=this.width*s,n=this.height*l;else if(i>u*s||n>u*l){const it=Math.min(u*s/i,u*l/n);i*=it,n*=it}const[y,I]=this.parentDimensions;this.setDims(i*y/s,n*I/l),this._uiManager.enableWaiting(!1);const W=st(this,R,document.createElement("canvas"));w.append(W),w.hidden=!1,q(this,C,Ai).call(this,i,n),q(this,V,ts).call(this),t(this,_)||(this.parent.addUndoableEditor(this),st(this,_,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},k=new WeakSet,Qi=function(w,i){var u;const[n,s]=this.parentDimensions;this.width=w/n,this.height=i/s,this.setDims(w,i),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,t(this,S)!==null&&clearTimeout(t(this,S)),st(this,S,setTimeout(()=>{st(this,S,null),q(this,C,Ai).call(this,w,i)},200))},z=new WeakSet,Zi=function(w,i){const{width:n,height:s}=t(this,H);let l=n,u=s,y=t(this,H);for(;l>2*w||u>2*i;){const I=l,W=u;l>2*w&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),u>2*i&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const it=new OffscreenCanvas(l,u);it.getContext("2d").drawImage(y,0,0,I,W,0,0,l,u),y=it.transferToImageBitmap()}return y},C=new WeakSet,Ai=function(w,i){w=Math.ceil(w),i=Math.ceil(i);const n=t(this,R);if(!n||n.width===w&&n.height===i)return;n.width=w,n.height=i;const s=t(this,p)?t(this,H):q(this,z,Zi).call(this,w,i),l=n.getContext("2d");l.filter=this._uiManager.hcmFilter,l.drawImage(s,0,0,s.width,s.height,0,0,w,i)},rt=new WeakSet,Be=function(w){if(w){if(t(this,p)){const s=this._uiManager.imageManager.getSvgUrl(t(this,F));if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=t(this,H),i.getContext("2d").drawImage(t(this,H),0,0),i.toDataURL()}if(t(this,p)){const[i,n]=this.pageDimensions,s=Math.round(this.width*i*nt.PixelsPerInch.PDF_TO_CSS_UNITS),l=Math.round(this.height*n*nt.PixelsPerInch.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(s,l);return u.getContext("2d").drawImage(t(this,H),0,0,t(this,H).width,t(this,H).height,0,0,s,l),u.transferToImageBitmap()}return structuredClone(t(this,H))},V=new WeakSet,ts=function(){st(this,E,new ResizeObserver(w=>{const i=w[0].contentRect;i.width&&i.height&&q(this,k,Qi).call(this,i.width,i.height)})),t(this,E).observe(this.div)},se(ft,"_type","stamp"),f.StampEditor=ft}],__webpack_module_cache__={};function __w_pdfjs_require__(lt){var f=__webpack_module_cache__[lt];if(f!==void 0)return f.exports;var ct=__webpack_module_cache__[lt]={exports:{}};return __webpack_modules__[lt](ct,ct.exports,__w_pdfjs_require__),ct.exports}var __webpack_exports__={};return(()=>{var lt=__webpack_exports__;Object.defineProperty(lt,"__esModule",{value:!0}),Object.defineProperty(lt,"AbortException",{enumerable:!0,get:function(){return f.AbortException}}),Object.defineProperty(lt,"AnnotationEditorLayer",{enumerable:!0,get:function(){return nt.AnnotationEditorLayer}}),Object.defineProperty(lt,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return f.AnnotationEditorParamsType}}),Object.defineProperty(lt,"AnnotationEditorType",{enumerable:!0,get:function(){return f.AnnotationEditorType}}),Object.defineProperty(lt,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return $.AnnotationEditorUIManager}}),Object.defineProperty(lt,"AnnotationLayer",{enumerable:!0,get:function(){return ft.AnnotationLayer}}),Object.defineProperty(lt,"AnnotationMode",{enumerable:!0,get:function(){return f.AnnotationMode}}),Object.defineProperty(lt,"CMapCompressionType",{enumerable:!0,get:function(){return f.CMapCompressionType}}),Object.defineProperty(lt,"DOMSVGFactory",{enumerable:!0,get:function(){return d.DOMSVGFactory}}),Object.defineProperty(lt,"FeatureTest",{enumerable:!0,get:function(){return f.FeatureTest}}),Object.defineProperty(lt,"GlobalWorkerOptions",{enumerable:!0,get:function(){return H.GlobalWorkerOptions}}),Object.defineProperty(lt,"ImageKind",{enumerable:!0,get:function(){return f.ImageKind}}),Object.defineProperty(lt,"InvalidPDFException",{enumerable:!0,get:function(){return f.InvalidPDFException}}),Object.defineProperty(lt,"MissingPDFException",{enumerable:!0,get:function(){return f.MissingPDFException}}),Object.defineProperty(lt,"OPS",{enumerable:!0,get:function(){return f.OPS}}),Object.defineProperty(lt,"PDFDataRangeTransport",{enumerable:!0,get:function(){return ct.PDFDataRangeTransport}}),Object.defineProperty(lt,"PDFDateString",{enumerable:!0,get:function(){return d.PDFDateString}}),Object.defineProperty(lt,"PDFWorker",{enumerable:!0,get:function(){return ct.PDFWorker}}),Object.defineProperty(lt,"PasswordResponses",{enumerable:!0,get:function(){return f.PasswordResponses}}),Object.defineProperty(lt,"PermissionFlag",{enumerable:!0,get:function(){return f.PermissionFlag}}),Object.defineProperty(lt,"PixelsPerInch",{enumerable:!0,get:function(){return d.PixelsPerInch}}),Object.defineProperty(lt,"PromiseCapability",{enumerable:!0,get:function(){return f.PromiseCapability}}),Object.defineProperty(lt,"RenderingCancelledException",{enumerable:!0,get:function(){return d.RenderingCancelledException}}),Object.defineProperty(lt,"SVGGraphics",{enumerable:!0,get:function(){return ct.SVGGraphics}}),Object.defineProperty(lt,"UnexpectedResponseException",{enumerable:!0,get:function(){return f.UnexpectedResponseException}}),Object.defineProperty(lt,"Util",{enumerable:!0,get:function(){return f.Util}}),Object.defineProperty(lt,"VerbosityLevel",{enumerable:!0,get:function(){return f.VerbosityLevel}}),Object.defineProperty(lt,"XfaLayer",{enumerable:!0,get:function(){return F.XfaLayer}}),Object.defineProperty(lt,"build",{enumerable:!0,get:function(){return ct.build}}),Object.defineProperty(lt,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return f.createValidAbsoluteUrl}}),Object.defineProperty(lt,"getDocument",{enumerable:!0,get:function(){return ct.getDocument}}),Object.defineProperty(lt,"getFilenameFromUrl",{enumerable:!0,get:function(){return d.getFilenameFromUrl}}),Object.defineProperty(lt,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return d.getPdfFilenameFromUrl}}),Object.defineProperty(lt,"getXfaPageViewport",{enumerable:!0,get:function(){return d.getXfaPageViewport}}),Object.defineProperty(lt,"isDataScheme",{enumerable:!0,get:function(){return d.isDataScheme}}),Object.defineProperty(lt,"isPdfFile",{enumerable:!0,get:function(){return d.isPdfFile}}),Object.defineProperty(lt,"loadScript",{enumerable:!0,get:function(){return d.loadScript}}),Object.defineProperty(lt,"noContextMenu",{enumerable:!0,get:function(){return d.noContextMenu}}),Object.defineProperty(lt,"normalizeUnicode",{enumerable:!0,get:function(){return f.normalizeUnicode}}),Object.defineProperty(lt,"renderTextLayer",{enumerable:!0,get:function(){return M.renderTextLayer}}),Object.defineProperty(lt,"setLayerDimensions",{enumerable:!0,get:function(){return d.setLayerDimensions}}),Object.defineProperty(lt,"shadow",{enumerable:!0,get:function(){return f.shadow}}),Object.defineProperty(lt,"updateTextLayer",{enumerable:!0,get:function(){return M.updateTextLayer}}),Object.defineProperty(lt,"version",{enumerable:!0,get:function(){return ct.version}});var f=__w_pdfjs_require__(1),ct=__w_pdfjs_require__(2),d=__w_pdfjs_require__(6),M=__w_pdfjs_require__(26),nt=__w_pdfjs_require__(27),$=__w_pdfjs_require__(5),ft=__w_pdfjs_require__(29),H=__w_pdfjs_require__(14),F=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);const pdfWorkerUrl="/assets/pdf.worker.min.feabdf30.js",_hoisted_1=createBaseVNode("div",{style:{"font-size":"18px","font-weight":"600"}},"\u753B\u677F\uFF08Excalidraw\uFF09",-1),_hoisted_2={style:{"max-height":"60vh",overflow:"auto",border:"1px solid rgba(0,0,0,0.08)","border-radius":"8px",padding:"8px"}},_hoisted_3=createBaseVNode("div",{style:{height:"75vh"}},[createBaseVNode("iframe",{src:"https://excalidraw.com",style:{width:"100%",height:"100%",border:"0","border-radius":"8px"},allow:"clipboard-read; clipboard-write"})],-1),_sfc_main={__name:"excalidraw",setup(lt){pdf.exports.GlobalWorkerOptions.workerSrc=pdfWorkerUrl;const f=useMessage(),ct=ref(null),d=ref(null),M=ref(0),nt=ref(1),$=ref(1.25),ft=ref(!1),H=ref(null),F=computed(()=>nt.value>1),m=computed(()=>nt.value<M.value),U=async A=>{const r=await A.arrayBuffer(),P=await pdf.exports.getDocument({data:r}).promise;d.value=P,M.value=P.numPages,nt.value=1,await nextTick(),await R()},j=async({file:A})=>{var o;const r=A==null?void 0:A.file;if(!!r){if(!((o=r.name)!=null&&o.toLowerCase().endsWith(".pdf"))){f.error("\u8BF7\u4E0A\u4F20 PDF \u6587\u4EF6");return}ct.value=r;try{await U(r),f.success("PDF \u52A0\u8F7D\u6210\u529F")}catch{f.error("PDF \u52A0\u8F7D\u5931\u8D25")}}},R=async()=>{if(!d.value)return;const A=H.value;if(!!A){ft.value=!0;try{const r=await d.value.getPage(nt.value),o=r.getViewport({scale:$.value}),P=A.getContext("2d");A.width=Math.floor(o.width),A.height=Math.floor(o.height),await r.render({canvasContext:P,viewport:o}).promise}catch{f.error("\u6E32\u67D3\u5931\u8D25")}finally{ft.value=!1}}},E=async()=>{!F.value||(nt.value-=1,await nextTick(),await R())},S=async()=>{!m.value||(nt.value+=1,await nextTick(),await R())},p=async()=>{await nextTick(),await R()},_=()=>{const A=H.value;return A?new Promise(r=>{A.toBlob(o=>r(o),"image/png")}):Promise.resolve(null)},T=async()=>{var g;const A=await _();if(!A){f.error("\u6CA1\u6709\u53EF\u4E0B\u8F7D\u7684\u5185\u5BB9");return}const r=URL.createObjectURL(A),o=document.createElement("a");o.href=r;const P=(((g=ct.value)==null?void 0:g.name)||"pdf").replace(/\.pdf$/i,"");o.download=`${P}-p${nt.value}.png`,o.click(),URL.revokeObjectURL(r)},x=async()=>{var r;const A=await _();if(!A){f.error("\u6CA1\u6709\u53EF\u590D\u5236\u7684\u5185\u5BB9");return}try{if(!((r=navigator.clipboard)!=null&&r.write)){f.error("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301\u526A\u8D34\u677F\u5199\u5165\uFF0C\u8BF7\u4F7F\u7528\u4E0B\u8F7D PNG \u65B9\u6848");return}const o=new ClipboardItem({"image/png":A});await navigator.clipboard.write([o]),f.success("\u5DF2\u590D\u5236\u4E3A\u56FE\u7247\uFF1A\u5207\u5230\u53F3\u4FA7\u753B\u677F Ctrl+V \u7C98\u8D34")}catch{f.error("\u590D\u5236\u5931\u8D25\uFF08\u53EF\u80FD\u9700\u8981 HTTPS/localhost \u6743\u9650\uFF09\uFF0C\u5DF2\u4E3A\u4F60\u51C6\u5907\u4E0B\u8F7D PNG")}};return(A,r)=>{const o=__unplugin_components_0,P=__unplugin_components_1,g=__unplugin_components_2,a=__unplugin_components_3,k=__unplugin_components_4,v=__unplugin_components_5,z=__unplugin_components_6,X=__unplugin_components_7,C=__unplugin_components_8,K=__unplugin_components_9;return openBlock(),createBlock(X,null,{default:withCtx(()=>[createVNode(P,{justify:"space-between",align:"center"},{default:withCtx(()=>[_hoisted_1,createVNode(o,{tag:"a",href:"https://excalidraw.com",target:"_blank",tertiary:""},{default:withCtx(()=>[createTextVNode(" \u65B0\u7A97\u53E3\u6253\u5F00 ")]),_:1})]),_:1}),createVNode(K,{cols:2,"x-gap":12,style:{"margin-top":"12px"}},{default:withCtx(()=>[createVNode(C,null,{default:withCtx(()=>[createVNode(X,{size:"small",title:"PDF -> \u56FE\u7247\uFF08\u590D\u5236\u5230\u753B\u677F\uFF09"},{default:withCtx(()=>[createVNode(P,{vertical:""},{default:withCtx(()=>[createVNode(g,{max:1,accept:"application/pdf","default-upload":!1,onChange:j},{default:withCtx(()=>[createVNode(o,null,{default:withCtx(()=>[createTextVNode("\u9009\u62E9 PDF")]),_:1})]),_:1}),createVNode(P,{align:"center",justify:"space-between"},{default:withCtx(()=>[createVNode(P,{align:"center"},{default:withCtx(()=>[createVNode(o,{size:"small",disabled:!d.value||ft.value||!F.value,onClick:E},{default:withCtx(()=>[createTextVNode(" \u4E0A\u4E00\u9875 ")]),_:1},8,["disabled"]),createVNode(o,{size:"small",disabled:!d.value||ft.value||!m.value,onClick:S},{default:withCtx(()=>[createTextVNode(" \u4E0B\u4E00\u9875 ")]),_:1},8,["disabled"]),d.value?(openBlock(),createBlock(a,{key:0,depth:"3"},{default:withCtx(()=>[createTextVNode(toDisplayString(nt.value)+" / "+toDisplayString(M.value),1)]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(P,{align:"center"},{default:withCtx(()=>[createVNode(a,{depth:"3"},{default:withCtx(()=>[createTextVNode("\u7F29\u653E")]),_:1}),createVNode(k,{style:{width:"140px"},value:$.value,"onUpdate:value":[r[0]||(r[0]=rt=>$.value=rt),p],min:.5,max:2.5,step:.05,disabled:!d.value||ft.value},null,8,["value","disabled"])]),_:1})]),_:1}),createVNode(P,null,{default:withCtx(()=>[createVNode(o,{size:"small",type:"primary",disabled:!d.value||ft.value,onClick:x},{default:withCtx(()=>[createTextVNode(" \u590D\u5236\u5F53\u524D\u9875\u5230\u526A\u8D34\u677F ")]),_:1},8,["disabled"]),createVNode(o,{size:"small",disabled:!d.value||ft.value,onClick:T},{default:withCtx(()=>[createTextVNode(" \u4E0B\u8F7D PNG ")]),_:1},8,["disabled"])]),_:1}),createVNode(v,{type:"info",bordered:!1},{default:withCtx(()=>[createTextVNode(" \u8BF4\u660E\uFF1AExcalidraw \u4E0D\u652F\u6301\u76F4\u63A5\u5BFC\u5165 PDF\u3002 \u4F60\u53EF\u4EE5\u5728\u6B64\u5904\u4E0A\u4F20 PDF\uFF0C\u628A\u67D0\u4E00\u9875\u590D\u5236\u4E3A\u56FE\u7247\uFF0C\u7136\u540E\u5728\u53F3\u4FA7\u753B\u677F\u91CC Ctrl+V \u7C98\u8D34\u8FDB\u884C\u6807\u6CE8\u3002 ")]),_:1}),createVNode(z,{show:ft.value},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2,[createBaseVNode("canvas",{ref_key:"canvasRef",ref:H,style:{"max-width":"100%",display:"block",margin:"0 auto"}},null,512)])]),_:1},8,["show"])]),_:1})]),_:1})]),_:1}),createVNode(C,null,{default:withCtx(()=>[_hoisted_3]),_:1})]),_:1})]),_:1})}}};export{_sfc_main as default};
