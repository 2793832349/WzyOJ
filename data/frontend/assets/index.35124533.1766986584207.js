import{z as q,r,a0 as B,aB as N,bH as A,o as v,l as y,w as o,A as T,aC as V,n as t,m,B as I,C as h,J as z,s as K,L as Q,E as U}from"./index.eb4377b0.1766986584207.js";import{C as j}from"./ContestTable.e4672b41.1766986584207.js";import{_ as D}from"./utils.2f0dea37.1766986584207.js";import{A as E}from"./AddOutline.cf6c0ed3.1766986584207.js";import{_ as H}from"./Input.4c626101.1766986584207.js";import{_ as J}from"./FormItem.d0d13dbd.1766986584207.js";import{_ as L}from"./Form.f0be8e2f.1766986584207.js";import{_ as O}from"./LayoutContent.6fc7b93d.1766986584207.js";import{a as R}from"./DataTable.8d4e61d5.1766986584207.js";import"./consts.72579ead.1766986584207.js";import"./CheckCircleTwotone.04f14e2a.1766986584207.js";import"./Time.2d3501e9.1766986584207.js";import"./index.225da447.1766986584207.js";import"./Eye.1e3444f4.1766986584207.js";import"./Tag.ff1efa14.1766986584207.js";import"./Spin.3ae5ee7d.1766986584207.js";import"./ArrowDown.1ae467bd.1766986584207.js";import"./Checkbox.7ca0c7f4.1766986584207.js";import"./RadioGroup.668f9840.1766986584207.js";import"./Tooltip.2d4fe76d.1766986584207.js";import"./Select.324054db.1766986584207.js";import"./Forward.bac4cf6f.1766986584207.js";const F=m("h1",null,"\u6BD4\u8D5B\u5217\u8868",-1),G={style:{display:"inline-block"}},M={style:{"margin-top":"30px","text-align":"center"}},ve={__name:"index",setup(P){const s=q(),e=r({pageSize:20,page:1,count:0}),u=r(""),c=r([]),p=r(!1),d=()=>{const n={search:u.value};D(n,e.value,s)()},i=()=>{if(s.name==="contest_list"){s.query.search&&(u.value=s.query.search);for(const n in e.value)s.query[n]&&(e.value[n]=parseInt(s.query[n]));p.value=!0,T.get("/contest/",{params:{limit:e.value.pageSize,offset:(e.value.page-1)*e.value.pageSize,search:u.value,problem_list_mode:!1}}).then(n=>{e.value.count=n.count,c.value=n.results}).finally(()=>{p.value=!1})}};return B(()=>s.query,i),i(),(n,a)=>{const k=H,f=J,g=U,w=L,x=N,C=A("router-link"),_=O,S=R,b=V;return v(),y(b,null,{default:o(()=>[F,t(_,null,{default:o(()=>[m("div",G,[t(w,{inline:""},{default:o(()=>[t(f,{label:"\u6BD4\u8D5B ID/\u540D\u79F0"},{default:o(()=>[t(k,{value:u.value,"onUpdate:value":a[0]||(a[0]=l=>u.value=l),onKeydown:I(i,["enter"])},null,8,["value","onKeydown"])]),_:1}),t(f,null,{default:o(()=>[t(g,{type:"primary",onClick:i},{default:o(()=>[h("\u641C\u7D22")]),_:1})]),_:1})]),_:1})]),z(K).state.user.permissions.includes("contest")?(v(),y(C,{key:0,to:{name:"contest_create"}},{default:o(()=>[t(g,{style:{float:"right","margin-top":"25px"},type:"primary"},{icon:o(()=>[t(x,{component:z(E)},null,8,["component"])]),default:o(()=>[h(" \u521B\u5EFA\u6BD4\u8D5B ")]),_:1})]),_:1})):Q("",!0)]),_:1}),t(_,null,{default:o(()=>[t(j,{data:c.value,loading:p.value},null,8,["data","loading"])]),_:1}),t(_,null,{default:o(()=>[m("div",M,[t(S,{page:e.value.page,"onUpdate:page":[a[1]||(a[1]=l=>e.value.page=l),d],"page-size":e.value.pageSize,"onUpdate:pageSize":[a[2]||(a[2]=l=>e.value.pageSize=l),a[3]||(a[3]=l=>{e.value.pageSize=l,e.value.page=1,d()})],"item-count":e.value.count,"show-size-picker":"","show-quick-jumper":"","page-sizes":[10,20,50]},null,8,["page","page-size","item-count"])])]),_:1})]),_:1})}}};export{ve as default};
