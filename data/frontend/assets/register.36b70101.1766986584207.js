import{y,z as x,r as i,o as K,l as k,w as s,_ as U,n as a,B as _,C as b,m as B,A as C,s as f,D as c,E as N}from"./index.eb4377b0.1766986584207.js";import{_ as R}from"./captcha.18127446.1766986584207.js";import{_ as V}from"./Divider.97fa3e74.1766986584207.js";import{_ as q}from"./Input.4c626101.1766986584207.js";import{_ as A}from"./FormItem.d0d13dbd.1766986584207.js";import{_ as z}from"./Form.f0be8e2f.1766986584207.js";import"./Eye.1e3444f4.1766986584207.js";const D=B("h1",null,"\u7528\u6237\u6CE8\u518C",-1),H={__name:"register",setup(E){const u=y(),d=x(),e=i({username:"",password:"",re_password:"",captcha:""}),m=i(null),t=async()=>{if(!e.value.username||!e.value.password){u.error("\u7528\u6237\u540D\u6216\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A");return}else if(e.value.password!==e.value.re_password){u.error("\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4");return}!await m.value.checkCaptcha()||C.post("/user/register/",e.value).then(l=>{u.success("\u6CE8\u518C\u6210\u529F"),f.getters.loggedIn?c.push({name:"user_edit",params:{id:l.id}}):(f.commit("setUser",l),d.query.next?c.push(d.query.next):c.push({name:"home"}))})};return(l,n)=>{const v=V,p=q,r=A,w=N,g=z,h=U;return K(),k(h,{style:{"max-width":"500px",margin:"auto",padding:"20px"}},{default:s(()=>[D,a(v),a(g,null,{default:s(()=>[a(r,{label:"\u7528\u6237\u540D"},{default:s(()=>[a(p,{value:e.value.username,"onUpdate:value":n[0]||(n[0]=o=>e.value.username=o),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",onKeydown:_(t,["enter"])},null,8,["value","onKeydown"])]),_:1}),a(r,{label:"\u5BC6\u7801"},{default:s(()=>[a(p,{value:e.value.password,"onUpdate:value":n[1]||(n[1]=o=>e.value.password=o),type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",onKeydown:_(t,["enter"])},null,8,["value","onKeydown"])]),_:1}),a(r,{label:"\u91CD\u590D\u5BC6\u7801"},{default:s(()=>[a(p,{value:e.value.re_password,"onUpdate:value":n[2]||(n[2]=o=>e.value.re_password=o),type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",onKeydown:_(t,["enter"])},null,8,["value","onKeydown"])]),_:1}),a(R,{scene:"register",captcha:e.value.captcha,"onUpdate:captcha":n[3]||(n[3]=o=>e.value.captcha=o),ref_key:"captchaRef",ref:m},null,8,["captcha"]),a(r,null,{default:s(()=>[a(w,{onClick:t,style:{width:"100%"}},{default:s(()=>[b(" \u6CE8\u518C ")]),_:1})]),_:1})]),_:1})]),_:1})}}};export{H as default};
