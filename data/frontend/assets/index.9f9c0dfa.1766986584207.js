import{d as O,o as d,G as j,m as p,z as A,r,A as C,a0 as T,aB as K,bH as Q,l as y,w as n,aC as $,n as t,B as E,J as u,C as h,s as q,L as B,E as H}from"./index.eb4377b0.1766986584207.js";import{b as M}from"./consts.72579ead.1766986584207.js";import{P}from"./ProblemTable.6d141f6b.1766986584207.js";import{_ as D}from"./utils.2f0dea37.1766986584207.js";import{A as G}from"./AddOutline.cf6c0ed3.1766986584207.js";import{_ as J}from"./Input.4c626101.1766986584207.js";import{_ as L}from"./FormItem.d0d13dbd.1766986584207.js";import{_ as R}from"./Select.324054db.1766986584207.js";import{_ as F}from"./Form.f0be8e2f.1766986584207.js";import{_ as W}from"./LayoutContent.6fc7b93d.1766986584207.js";import{a as X}from"./DataTable.8d4e61d5.1766986584207.js";import"./CheckCircleTwotone.04f14e2a.1766986584207.js";import"./Spin.3ae5ee7d.1766986584207.js";import"./Eye.1e3444f4.1766986584207.js";import"./Tag.ff1efa14.1766986584207.js";import"./ArrowDown.1ae467bd.1766986584207.js";import"./Checkbox.7ca0c7f4.1766986584207.js";import"./RadioGroup.668f9840.1766986584207.js";import"./Tooltip.2d4fe76d.1766986584207.js";import"./Forward.bac4cf6f.1766986584207.js";const Y={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Z=p("path",{d:"M128 80V64a48.14 48.14 0 0 1 48-48h224a48.14 48.14 0 0 1 48 48v368l-80-64",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),ee=p("path",{d:"M320 96H112a48.14 48.14 0 0 0-48 48v352l152-128l152 128V144a48.14 48.14 0 0 0-48-48z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),te=[Z,ee],ne=O({name:"BookmarksOutline",render:function(l,_){return d(),j("svg",Y,te)}}),oe=p("h1",null,"\u9898\u76EE\u5217\u8868",-1),ae={style:{display:"inline-block"}},le={style:{"margin-top":"30px","text-align":"center"}},qe={__name:"index",setup(S){const l=A(),_=r([]);C.get("/problem/tag/").then(i=>{_.value=i.map(e=>({label:e.name,value:e.id}))});const o=r({pageSize:20,page:1,count:0}),a=r({search:"",difficulty:null,tags:[]}),k=r([]),f=r(!1),m=D(a.value,o.value,l),w=()=>{if(!l.name==="problem_list")return;a.value.search=l.query.search||"",a.value.difficulty=l.query.difficulty&&parseInt(l.query.difficulty)||null;const i=[];if(l.query.tags)for(const e of l.query.tags.split(","))i.push(parseInt(e));a.value.tags=i;for(const e in o.value)l.query[e]&&(o.value[e]=parseInt(l.query[e]));f.value=!0,C.get("/problem/",{params:{limit:o.value.pageSize,offset:(o.value.page-1)*o.value.pageSize,search:a.value.search,difficulty:a.value.difficulty,tags:a.value.tags.join(",")}}).then(e=>{o.value.count=e.count,k.value=e.results}).finally(()=>{f.value=!1})};return T(()=>l.query,w),w(),(i,e)=>{const U=J,c=L,b=R,g=H,V=F,x=K,z=Q("router-link"),v=W,I=X,N=$;return d(),y(N,null,{default:n(()=>[oe,t(v,null,{default:n(()=>[p("div",ae,[t(V,{inline:""},{default:n(()=>[t(c,{label:"\u9898\u76EEID/\u540D\u79F0"},{default:n(()=>[t(U,{value:a.value.search,"onUpdate:value":e[0]||(e[0]=s=>a.value.search=s),onKeydown:E(u(m),["enter"])},null,8,["value","onKeydown"])]),_:1}),t(c,{label:"\u9898\u76EE\u6807\u7B7E"},{default:n(()=>[t(b,{value:a.value.tags,"onUpdate:value":e[1]||(e[1]=s=>a.value.tags=s),options:_.value,clearable:"",filterable:"",multiple:"",placeholder:"\u8BF7\u9009\u62E9\u6807\u7B7E",style:{"min-width":"150px"},"max-tag-count":1,disabled:!_.value.length},null,8,["value","options","disabled"])]),_:1}),t(c,{label:"\u9898\u76EE\u96BE\u5EA6"},{default:n(()=>[t(b,{value:a.value.difficulty,"onUpdate:value":e[2]||(e[2]=s=>a.value.difficulty=s),options:[{label:"\u5168\u90E8",value:null}].concat(u(M)),placeholder:"\u8BF7\u9009\u62E9\u96BE\u5EA6",style:{"min-width":"150px"}},null,8,["value","options"])]),_:1}),t(c,null,{default:n(()=>[t(g,{type:"primary",onClick:u(m)},{default:n(()=>[h(" \u641C\u7D22 ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),u(q).state.user.permissions.includes("problem")?(d(),y(z,{key:0,to:{name:"tag_edit"}},{default:n(()=>[t(g,{style:{float:"right","margin-top":"25px"},type:"primary"},{icon:n(()=>[t(x,{component:u(ne)},null,8,["component"])]),default:n(()=>[h(" \u6807\u7B7E\u7BA1\u7406 ")]),_:1})]),_:1})):B("",!0),u(q).state.user.permissions.includes("problem")?(d(),y(z,{key:1,to:{name:"problem_create"}},{default:n(()=>[t(g,{style:{float:"right","margin-top":"25px","margin-right":"10px"},type:"primary"},{icon:n(()=>[t(x,{component:u(G)},null,8,["component"])]),default:n(()=>[h(" \u521B\u5EFA\u9898\u76EE ")]),_:1})]),_:1})):B("",!0)]),_:1}),t(v,null,{default:n(()=>[t(P,{data:k.value,loading:f.value},null,8,["data","loading"])]),_:1}),t(v,null,{default:n(()=>[p("div",le,[t(I,{page:o.value.page,"onUpdate:page":[e[3]||(e[3]=s=>o.value.page=s),u(m)],"page-size":o.value.pageSize,"onUpdate:pageSize":[e[4]||(e[4]=s=>o.value.pageSize=s),e[5]||(e[5]=s=>{o.value.pageSize=s,o.value.page=1,u(m)()})],"item-count":o.value.count,"show-size-picker":"","show-quick-jumper":"","page-sizes":[10,20,50]},null,8,["page","page-size","item-count","onUpdate:page"])])]),_:1})]),_:1})}}};export{qe as default};
