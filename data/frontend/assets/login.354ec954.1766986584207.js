import{y as g,z as y,r as c,o as x,l as k,w as a,_ as K,n,B as m,C as B,m as C,A as U,s as b,D as i,E as N}from"./index.eb4377b0.1766986584207.js";import{_ as R}from"./captcha.18127446.1766986584207.js";import{_ as V}from"./Divider.97fa3e74.1766986584207.js";import{_ as q}from"./Input.4c626101.1766986584207.js";import{_ as A}from"./Form.f0be8e2f.1766986584207.js";import{_ as z}from"./FormItem.d0d13dbd.1766986584207.js";import"./Eye.1e3444f4.1766986584207.js";const D=C("h1",null,"\u7528\u6237\u767B\u5F55",-1),I={__name:"login",setup(E){const d=g(),l=y(),e=c({username:"",password:"",captcha:""}),_=c(null),s=async()=>{if(!e.value.username||!e.value.password){d.error("\u7528\u6237\u540D\u6216\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A");return}!await _.value.checkCaptcha()||U.post("/user/login/",e.value).then(r=>{b.commit("setUser",r),l.query.next?i.push(l.query.next):i.push({name:"home"})})};return(r,o)=>{const f=V,p=q,u=z,h=N,v=A,w=K;return x(),k(w,{style:{"max-width":"500px",margin:"auto",padding:"20px"}},{default:a(()=>[D,n(f),n(v,null,{default:a(()=>[n(u,{label:"\u7528\u6237\u540D"},{default:a(()=>[n(p,{value:e.value.username,"onUpdate:value":o[0]||(o[0]=t=>e.value.username=t),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",onKeydown:m(s,["enter"])},null,8,["value","onKeydown"])]),_:1}),n(u,{label:"\u5BC6\u7801"},{default:a(()=>[n(p,{value:e.value.password,"onUpdate:value":o[1]||(o[1]=t=>e.value.password=t),type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",onKeydown:m(s,["enter"])},null,8,["value","onKeydown"])]),_:1}),n(R,{scene:"login",captcha:e.value.captcha,"onUpdate:captcha":o[2]||(o[2]=t=>e.value.captcha=t),ref_key:"captchaRef",ref:_},null,8,["captcha"]),n(u,null,{default:a(()=>[n(h,{onClick:s,style:{width:"100%"}},{default:a(()=>[B(" \u767B\u5F55 ")]),_:1})]),_:1})]),_:1})]),_:1})}}};export{I as default};
