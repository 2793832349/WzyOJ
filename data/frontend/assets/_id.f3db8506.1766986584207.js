import{ay as E,z as L,y as J,r as b,o,G as i,m as l,t as y,n as t,w as a,Q as K,A as h,aC as q,C as s,L as _,J as k,s as w,l as D,D as M,E as F,_ as G,aA as O,aK as Q,bJ as U,bK as W}from"./index.eb4377b0.1766986584207.js";import{M as X}from"./MdEditor.164db853.1766986584207.js";import{P as Y}from"./ProblemTable.6d141f6b.1766986584207.js";import{R as Z,_ as ee}from"./RankingTable.777cd9c0.1766986584207.js";import{_ as te}from"./Time.2d3501e9.1766986584207.js";import{_ as ne,a as ae}from"./Tabs.ad385494.1766986584207.js";import{_ as oe}from"./Alert.62d754d7.1766986584207.js";import{_ as se}from"./LayoutContent.6fc7b93d.1766986584207.js";import"./consts.72579ead.1766986584207.js";import"./CheckCircleTwotone.04f14e2a.1766986584207.js";import"./DataTable.8d4e61d5.1766986584207.js";import"./ArrowDown.1ae467bd.1766986584207.js";import"./Checkbox.7ca0c7f4.1766986584207.js";import"./RadioGroup.668f9840.1766986584207.js";import"./Input.4c626101.1766986584207.js";import"./Eye.1e3444f4.1766986584207.js";import"./Tooltip.2d4fe76d.1766986584207.js";import"./Select.324054db.1766986584207.js";import"./Tag.ff1efa14.1766986584207.js";import"./Forward.bac4cf6f.1766986584207.js";import"./Spin.3ae5ee7d.1766986584207.js";import"./index.225da447.1766986584207.js";import"./Add.3491e10c.1766986584207.js";const x=d=>(U("data-v-33f6c102"),d=d(),W(),d),ie={key:0,style:{"font-size":"medium"}},_e={key:0},le={key:1},ue=x(()=>l("div",null,null,-1)),me={key:0},re=x(()=>l("h2",null,"\u64CD\u4F5C",-1)),de={key:1},pe=x(()=>l("h2",null,"\u6BD4\u8D5B\u65F6\u95F4",-1)),ce={key:0,style:{"font-size":"medium"}},ve={key:2},fe={style:{"font-size":"medium"}},ge={key:0},be={key:1},ye={__name:"_id",setup(d){const N=L(),S=J(),u=N.params.id,e=b({problems:[]}),p=b("\u9898\u5355"),m=b({}),c=b(!1),v=(n=!1)=>{c.value=!0,h.get(`/contest/${u}/ranking/`,{params:{force_update:n}}).then(f=>{m.value=f}).finally(()=>{c.value=!1})},$=()=>{h.get(`/contest/${u}/`).then(n=>{n.start_time=n.start_time&&Number(new Date(n.start_time))||0,n.end_time=n.end_time&&Number(new Date(n.end_time))||0,e.value=n,n.problem_list_mode||n.start_time<=Date.now()?v():setTimeout(v,n.start_time-Date.now()),p.value=n.problem_list_mode?"\u9898\u5355":"\u6BD4\u8D5B"})};$();const B=n=>n==="discussion"?(M.push({name:"discussion_list",query:{related_contest__id:u}}),!1):n==="edit"?(M.push({name:"problemset_edit",params:{id:u}}),!1):!0,R=()=>{h.post(`/contest/${u}/sign_up/`).then(n=>{S.success("\u62A5\u540D\u6210\u529F"),$()})};return(n,f)=>{const z=ee,C=F,g=te,A=G,H=O,r=ne,I=oe,P=Q,T=ae,V=se,j=q;return o(),i(K,null,[l("div",null,[l("h1",null,"#"+y(e.value.id)+"\u2002"+y(e.value.title),1)]),t(j,{"has-sider":""},{default:a(()=>[t(V,null,{default:a(()=>[t(T,{type:"line",size:"large","tabs-padding":20,onBeforeLeave:B},{suffix:a(()=>[e.value.problem_list_mode?_("",!0):(o(),i("div",ie,[e.value.start_time&&e.value.start_time>Date.now()?(o(),i("span",_e,[s(" \u8DDD\u79BB\u6BD4\u8D5B\u5F00\u59CB\u8FD8\u6709\uFF1A"),t(z,{duration:e.value.start_time-Date.now()},null,8,["duration"])])):e.value.end_time&&e.value.end_time>Date.now()?(o(),i("span",le,[s(" \u8DDD\u79BB\u6BD4\u8D5B\u7ED3\u675F\u8FD8\u6709\uFF1A"),t(z,{duration:e.value.end_time-Date.now()},null,8,["duration"])])):_("",!0)]))]),default:a(()=>[t(r,{name:"description",tab:p.value+"\u4FE1\u606F"},{default:a(()=>[t(H,{vertical:"",size:"large"},{default:a(()=>[ue,e.value.joined||e.value.allow_sign_up?(o(),i("div",me,[re,t(C,{type:"primary",onClick:R,disabled:e.value.joined||Date.now()>e.value.end_time},{default:a(()=>[s(y(e.value.joined?"\u5DF2\u52A0\u5165":"\u62A5\u540D"),1)]),_:1},8,["disabled"])])):_("",!0),e.value.problem_list_mode?_("",!0):(o(),i("div",de,[pe,e.value.start_time||e.value.end_time?(o(),i("span",ce,[t(g,{time:e.value.start_time,format:"yyyy-MM-dd HH:mm:ss",style:{"margin-right":"5px"}},null,8,["time"]),s(" ~ "),t(g,{time:e.value.end_time,format:"yyyy-MM-dd HH:mm:ss",style:{"margin-left":"5px"}},null,8,["time"])])):_("",!0)])),e.value.description?(o(),i("div",ve,[l("h2",null,y(p.value)+"\u63CF\u8FF0",1),t(A,{class:"description"},{default:a(()=>[t(X,{content:e.value.description,previewOnly:!0},null,8,["content"])]),_:1})])):_("",!0)]),_:1})]),_:1},8,["tab"]),t(r,{name:"problem",tab:"\u9898\u76EE\u5217\u8868",disabled:!e.value.problems.length},{default:a(()=>[t(Y,{data:e.value.problems},null,8,["data"])]),_:1},8,["disabled"]),t(r,{name:"ranking",tab:"\u6392\u884C\u699C"},{default:a(()=>[l("p",fe,[e.value.problem_list_mode?(o(),i("span",ge,[s(" \u8BF4\u660E\uFF1A\u9898\u5355\u6392\u884C\u699C\u7EDF\u8BA1\u6240\u6709\u7528\u6237\u901A\u8FC7\uFF08AC\uFF09\u7684\u9898\u76EE\u6570\u91CF\u3002\u4E0A\u6B21\u66F4\u65B0\u65F6\u95F4\uFF1A"),t(g,{time:Number(new Date(m.value.time))},null,8,["time"]),s("\u3002 ")])):e.value.start_time<=Date.now()&&Date.now()<=e.value.end_time?(o(),i("span",be,[s(" \u8BF4\u660E\uFF1A\u6BD4\u8D5B\u6392\u884C\u699C\u4EC5\u7EDF\u8BA1\u6BD4\u8D5B\u6301\u7EED\u65F6\u95F4\u4E2D\u7684\u63D0\u4EA4\uFF0C\u6BCF\u5206\u949F\u66F4\u65B0\u4E00\u6B21\u3002\u4E0A\u6B21\u66F4\u65B0\u65F6\u95F4\uFF1A"),t(g,{time:Number(new Date(m.value.time))},null,8,["time"]),s("\u3002 ")])):_("",!0),m.value.is_frozen&&!k(w).state.user.permissions.includes("contest")?(o(),D(I,{key:2,type:"warning",style:{margin:"10px 0"}},{default:a(()=>[s(" \u23F8\uFE0F \u6392\u884C\u699C\u5DF2\u5C01\u699C\uFF0C\u5F53\u524D\u663E\u793A\u7684\u662F\u5C01\u699C\u65F6\u523B\u7684\u6392\u540D\uFF0C\u5B9E\u9645\u6392\u540D\u53EF\u80FD\u5DF2\u53D1\u751F\u53D8\u5316 ")]),_:1})):_("",!0),k(w).state.user.permissions.includes("contest")?(o(),D(P,{key:3},{trigger:a(()=>[t(C,{onClick:f[0]||(f[0]=he=>v(!0)),disabled:c.value},{default:a(()=>[s(" \u5F3A\u5236\u66F4\u65B0 ")]),_:1},8,["disabled"])]),default:a(()=>[s(" \u4EC5\u7BA1\u7406\u5458\u53EF\u7528\uFF0C\u5C06\u4F1A\u7ACB\u5373\u5237\u65B0\u6392\u884C\u699C\u7F13\u5B58\uFF0C\u8BE5\u7F13\u5B58\u5BF9\u6240\u6709\u7528\u6237\u751F\u6548\u3002 ")]),_:1})):_("",!0)]),t(Z,{data:m.value,loading:c.value,isProblemSet:e.value.problem_list_mode,style:{"margin-top":"15px"}},null,8,["data","loading","isProblemSet"])]),_:1}),t(r,{name:"discussion",tab:"\u8BA8\u8BBA",disabled:e.value.start_time<=Date.now()&&Date.now()<=e.value.end_time},null,8,["disabled"]),k(w).state.user.permissions.includes("contest")?(o(),D(r,{key:0,name:"edit",tab:"\u4FEE\u6539"+p.value},null,8,["tab"])):_("",!0)]),_:1})]),_:1})]),_:1})],64)}}},qe=E(ye,[["__scopeId","data-v-33f6c102"]]);export{qe as default};
