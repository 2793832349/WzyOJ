import{d as z,k as i,bS as se,c as ie,ae as re,bU as pe,cA as de,$ as ce,a1 as Q,b as C,S as Z,N as me,O as ve,u as fe,aq as he,r as x,V as $,a4 as ge,g as le,e as K,a9 as ye,aa as _e,j as be,E as T,X as ee,Y as j,a2 as te,cB as H,c1 as W,ap as ke,ai as G,y as we,a0 as Ve,o as J,G as ne,n,w as p,l as Pe,Q as Se,m as O,A as L,C as F,J as D,K as Ue,aA as Ie}from"./index.eb4377b0.1766986584207.js";import{f as Re,g as Ae,t as Ce,m as Oe,s as Be}from"./consts.72579ead.1766986584207.js";import{_ as M}from"./Input.4c626101.1766986584207.js";import{u as De}from"./Eye.1e3444f4.1766986584207.js";import{A as ae}from"./Add.3491e10c.1766986584207.js";import{_ as Te}from"./ButtonGroup.37583538.1766986584207.js";import{R as je}from"./Remove.15b35147.1766986584207.js";import{A as Fe}from"./ArrowDown.1ae467bd.1766986584207.js";import{_ as $e}from"./Spin.3ae5ee7d.1766986584207.js";import{_ as Ke}from"./Form.f0be8e2f.1766986584207.js";import{_ as Le}from"./FormItem.d0d13dbd.1766986584207.js";import{_ as Ne}from"./Switch.f34fe457.1766986584207.js";import{_ as xe}from"./Divider.97fa3e74.1766986584207.js";import{_ as Me}from"./Select.324054db.1766986584207.js";import{_ as ze}from"./Transfer.f013d8b6.1766986584207.js";import{_ as Ee}from"./Popconfirm.e2002990.1766986584207.js";import"./Tag.ff1efa14.1766986584207.js";import"./Checkbox.7ca0c7f4.1766986584207.js";const qe=z({name:"ArrowUp",render(){return i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},i("g",{fill:"none"},i("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}}),He=()=>de,We=se({name:"DynamicInput",common:ie,peers:{Input:re,Button:pe},self:He}),Ge=We,X=ce("n-dynamic-input"),Je=z({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:u,placeholderRef:h}=Q(X);return{mergedTheme:u,placeholder:h}},render(){const{mergedTheme:u,placeholder:h,value:e,clsPrefix:s,onUpdateValue:_,disabled:f}=this;return i("div",{class:`${s}-dynamic-input-preset-input`},i(M,{theme:u.peers.Input,"theme-overrides":u.peerOverrides.Input,value:e,placeholder:h,onUpdateValue:_,disabled:f}))}}),Qe=z({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(u){const{mergedThemeRef:h,keyPlaceholderRef:e,valuePlaceholderRef:s}=Q(X);return{mergedTheme:h,keyPlaceholder:e,valuePlaceholder:s,handleKeyInput(_){u.onUpdateValue({key:_,value:u.value.value})},handleValueInput(_){u.onUpdateValue({key:u.value.key,value:_})}}},render(){const{mergedTheme:u,keyPlaceholder:h,valuePlaceholder:e,value:s,clsPrefix:_,disabled:f}=this;return i("div",{class:`${_}-dynamic-input-preset-pair`},i(M,{theme:u.peers.Input,"theme-overrides":u.peerOverrides.Input,value:s.key,class:`${_}-dynamic-input-pair-input`,placeholder:h,onUpdateValue:this.handleKeyInput,disabled:f}),i(M,{theme:u.peers.Input,"theme-overrides":u.peerOverrides.Input,value:s.value,class:`${_}-dynamic-input-pair-input`,placeholder:e,onUpdateValue:this.handleValueInput,disabled:f}))}}),Xe=C("dynamic-input",{width:"100%"},[C("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[C("dynamic-input-preset-input",{flex:1,alignItems:"center"}),C("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[C("dynamic-input-pair-input",[Z("&:first-child",{"margin-right":"12px"})])]),me("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[ve("icon",{cursor:"pointer"})]),Z("&:last-child",{marginBottom:0})]),C("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[C("form-item-blank",{paddingTop:"0 !important"})])]),N=new WeakMap,Ye=Object.assign(Object.assign({},le.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),Ze=z({name:"DynamicInput",props:Ye,setup(u,{slots:h}){const{mergedComponentPropsRef:e,mergedClsPrefixRef:s,mergedRtlRef:_,inlineThemeDisabled:f}=fe(),V=Q(he,null),I=x(u.defaultValue),R=$(u,"value"),v=ge(R,I),t=le("DynamicInput","-dynamic-input",Xe,Ge,u,s),P=K(()=>{const{value:a}=v;if(Array.isArray(a)){const{max:l}=u;return l!==void 0&&a.length>=l}return!1}),b=K(()=>{const{value:a}=v;return Array.isArray(a)?a.length<=u.min:!0}),d=K(()=>{var a,l;return(l=(a=e==null?void 0:e.value)===null||a===void 0?void 0:a.DynamicInput)===null||l===void 0?void 0:l.buttonSize});function g(a){const{onInput:l,"onUpdate:value":m,onUpdateValue:r}=u;l&&G(l,a),m&&G(m,a),r&&G(r,a),I.value=a}function k(a,l){if(a==null||typeof a!="object")return l;const m=H(a)?W(a):a;let r=N.get(m);return r===void 0&&N.set(m,r=ke()),r}function A(a,l){const{value:m}=v,r=Array.from(m!=null?m:[]),U=r[a];if(r[a]=l,U&&l&&typeof U=="object"&&typeof l=="object"){const oe=H(U)?W(U):U,ue=H(l)?W(l):l,Y=N.get(oe);Y!==void 0&&N.set(ue,Y)}g(r)}function y(){w(-1)}function w(a){const{value:l}=v,{onCreate:m}=u,r=Array.from(l!=null?l:[]);if(m)r.splice(a+1,0,m(a+1)),g(r);else if(h.default)r.splice(a+1,0,null),g(r);else switch(u.preset){case"input":r.splice(a+1,0,""),g(r);break;case"pair":r.splice(a+1,0,{key:"",value:""}),g(r);break}}function c(a){const{value:l}=v;if(!Array.isArray(l))return;const{min:m}=u;if(l.length<=m)return;const{onRemove:r}=u;r&&r(a);const U=Array.from(l);U.splice(a,1),g(U)}function S(a,l,m){if(l<0||m<0||l>=a.length||m>=a.length||l===m)return;const r=a[l];a[l]=a[m],a[m]=r}function E(a,l){const{value:m}=v;if(!Array.isArray(m))return;const r=Array.from(m);a==="up"&&S(r,l,l-1),a==="down"&&S(r,l,l+1),g(r)}ye(X,{mergedThemeRef:t,keyPlaceholderRef:$(u,"keyPlaceholder"),valuePlaceholderRef:$(u,"valuePlaceholder"),placeholderRef:$(u,"placeholder")});const q=_e("DynamicInput",_,s),o=K(()=>{const{self:{actionMargin:a,actionMarginRtl:l}}=t.value;return{"--action-margin":a,"--action-margin-rtl":l}}),B=f?be("dynamic-input",void 0,o,u):void 0;return{locale:De("DynamicInput").localeRef,rtlEnabled:q,buttonSize:d,mergedClsPrefix:s,NFormItem:V,uncontrolledValue:I,mergedValue:v,insertionDisabled:P,removeDisabled:b,handleCreateClick:y,ensureKey:k,handleValueChange:A,remove:c,move:E,createItem:w,mergedTheme:t,cssVars:f?void 0:o,themeClass:B==null?void 0:B.themeClass,onRender:B==null?void 0:B.onRender}},render(){const{$slots:u,buttonSize:h,mergedClsPrefix:e,mergedValue:s,locale:_,mergedTheme:f,keyField:V,itemStyle:I,preset:R,showSortButton:v,NFormItem:t,ensureKey:P,handleValueChange:b,remove:d,createItem:g,move:k,onRender:A,disabled:y}=this;return A==null||A(),i("div",{class:[`${e}-dynamic-input`,this.rtlEnabled&&`${e}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(s)||s.length===0?i(T,Object.assign({block:!0,ghost:!0,dashed:!0,size:h},this.createButtonProps,{disabled:this.insertionDisabled||y,theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>ee(u["create-button-default"],()=>[_.create]),icon:()=>ee(u["create-button-icon"],()=>[i(j,{clsPrefix:e},{default:()=>i(ae,null)})])}):s.map((w,c)=>i("div",{key:V?w[V]:P(w,c),"data-key":V?w[V]:P(w,c),class:`${e}-dynamic-input-item`,style:I},te(u.default,{value:s[c],index:c},()=>[R==="input"?i(Je,{disabled:y,clsPrefix:e,value:s[c],parentPath:t?t.path.value:void 0,path:t!=null&&t.path.value?`${t.path.value}[${c}]`:void 0,onUpdateValue:S=>{b(c,S)}}):R==="pair"?i(Qe,{disabled:y,clsPrefix:e,value:s[c],parentPath:t?t.path.value:void 0,path:t!=null&&t.path.value?`${t.path.value}[${c}]`:void 0,onUpdateValue:S=>{b(c,S)}}):null]),te(u.action,{value:s[c],index:c,create:g,remove:d,move:k},()=>[i("div",{class:`${e}-dynamic-input-item__action`},i(Te,{size:h},{default:()=>[i(T,{disabled:this.removeDisabled||y,theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,circle:!0,onClick:()=>{d(c)}},{icon:()=>i(j,{clsPrefix:e},{default:()=>i(je,null)})}),i(T,{disabled:this.insertionDisabled||y,circle:!0,theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,onClick:()=>{g(c)}},{icon:()=>i(j,{clsPrefix:e},{default:()=>i(ae,null)})}),v?i(T,{disabled:c===0||y,circle:!0,theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,onClick:()=>{k("up",c)}},{icon:()=>i(j,{clsPrefix:e},{default:()=>i(qe,null)})}):null,v?i(T,{disabled:c===s.length-1||y,circle:!0,theme:f.peers.Button,themeOverrides:f.peerOverrides.Button,onClick:()=>{k("down",c)}},{icon:()=>i(j,{clsPrefix:e},{default:()=>i(Fe,null)})}):null]}))]))))}}),et=O("h1",null,"\u7AD9\u70B9\u914D\u7F6E",-1),tt={key:0,style:{"text-align":"center"}},nt=O("p",{style:{"font-weight":"bold"}}," \u589E\u52A0\u65B0\u7684\u8BC4\u6D4B\u8BED\u8A00\u9700\u8981\u540C\u6B65\u4FEE\u6539\u540E\u7AEF\u4EE3\u7801\uFF0C\u5426\u5219\u65B0\u589E\u7684\u8BED\u8A00\u5C06\u65E0\u6CD5\u8BC4\u6D4B\u3002\u8BF7\u5728\u9605\u8BFB\u6587\u6863\u540E\u8C28\u614E\u4FEE\u6539\u3002 ",-1),at=O("p",null,"reCAPTCHA V3\u7C7B\u578B\u7684\u9A8C\u8BC1\u4E0D\u4F1A\u5C55\u793A\u53EF\u89C1\u7684\u9A8C\u8BC1\u7801\uFF0C\u9A8C\u8BC1\u4F1A\u81EA\u52A8\u5B8C\u6210\u3002",-1),lt=O("p",null," \u5BF9\u4E8E\u975E\u9996\u6B21\u8BBF\u95EE\u7AD9\u70B9\u7684\u7528\u6237\uFF0C\u672C\u90E8\u5206\u914D\u7F6E\u9879\u5F53\u4E14\u4EC5\u5F53\u7528\u6237\u4E3B\u52A8\u5728\u4E2A\u4EBA\u8BBE\u7F6E\u9875\u66F4\u65B0\u65F6\u624D\u4F1A\u4E0E\u672C\u9875\u9762\u7684\u914D\u7F6E\u540C\u6B65\uFF0C\u5426\u5219\u5C06\u7EE7\u7EED\u4F7F\u7528\u6D4F\u89C8\u5668\u7F13\u5B58\u4E2D\u7684\u4FE1\u606F\u3002 ",-1),ot=O("h2",null,"\u8BF4\u660E",-1),ut=O("p",null,"\u4EE5\u4E0A\u4FE1\u606F\u5C06\u540C\u6B65\u81F3\u670D\u52A1\u5668\u4FDD\u5B58\u3002",-1),st=O("p",null," \u6BCF\u5F53\u7528\u6237\u8BBF\u95EE\u7F51\u7AD9\u65F6\uFF0C\u90FD\u4F1A\u81EA\u52A8\u4ECE\u670D\u52A1\u7AEF\u62C9\u53D6\u914D\u7F6E\u6587\u4EF6\u5E76\u4FDD\u5B58\u81F3\u6D4F\u89C8\u5668\u7F13\u5B58\u4E2D\u3002\u53C2\u6570\u4F1A\u5373\u523B\u5BF9\u6240\u6709\u4EBA\u751F\u6548\uFF08\u6709\u7279\u6B8A\u6807\u8BB0\u7684\u9664\u5916\uFF09\u3002 ",-1),Ut={__name:"settings",setup(u){const h=we(),e=x({});let s=x([]);(()=>{L.get("/site_settings/").then(v=>{e.value=v,s.value=[];for(const[t,P]of Object.entries(v.languages))s.value.push({key:t,value:P})})})();const f=()=>{e.value.languages={};for(const v of s.value)e.value.languages[v.key]=v.value;L.put("/site_settings/",e.value).then(v=>{h.success("\u4FDD\u5B58\u6210\u529F\uFF0C\u8BF7\u5237\u65B0\u9875\u9762")})},V=()=>{L.delete("/site_settings/").then(()=>{h.success("\u91CD\u7F6E\u6210\u529F\uFF0C\u8BF7\u5237\u65B0\u9875\u9762")})},I=()=>{L.patch("/site_settings/").then(()=>{h.success("\u6E05\u9664\u7F13\u5B58\u6210\u529F\uFF0C\u8BF7\u5237\u65B0\u9875\u9762")})},R=x([]);return Ve(s,()=>{R.value=s.value.map(v=>({label:v.value,value:v.key}))}),(v,t)=>{const P=$e,b=M,d=Le,g=Ne,k=xe,A=Ze,y=Me,w=ze,c=T,S=Ee,E=Ie,q=Ke;return J(),ne(Se,null,[et,Object.keys(e.value).length?(J(),Pe(q,{key:1,model:e.value,style:{"max-width":"min(100%, 500px)"}},{default:p(()=>[n(d,{label:"\u7AD9\u70B9\u540D\u79F0",prop:"name"},{default:p(()=>[n(b,{value:e.value.name,"onUpdate:value":t[0]||(t[0]=o=>e.value.name=o)},null,8,["value"])]),_:1}),n(d,{label:"\u7AD9\u70B9\u6807\u9898",prop:"title"},{default:p(()=>[n(b,{value:e.value.title,"onUpdate:value":t[1]||(t[1]=o=>e.value.title=o)},null,8,["value"])]),_:1}),n(d,{label:"\u542F\u7528\u9875\u811A",name:"footer_useFooter"},{default:p(()=>[n(g,{value:e.value.footer.useFooter,"onUpdate:value":t[2]||(t[2]=o=>e.value.footer.useFooter=o)},null,8,["value"])]),_:1}),n(d,{label:"ICP\u5907\u6848\u53F7",prop:"footer_icp"},{default:p(()=>[n(b,{value:e.value.footer.icp,"onUpdate:value":t[3]||(t[3]=o=>e.value.footer.icp=o)},null,8,["value"])]),_:1}),n(k),n(d,{label:"\u5141\u8BB8\u6CE8\u518C",prop:"allowRegister"},{default:p(()=>[n(g,{value:e.value.allowRegister,"onUpdate:value":t[4]||(t[4]=o=>e.value.allowRegister=o)},null,8,["value"])]),_:1}),n(d,{label:"\u5F3A\u5236\u9690\u85CF\u63D0\u4EA4",prop:"forceHideSubmissions"},{default:p(()=>[n(g,{value:e.value.forceHideSubmissions,"onUpdate:value":t[5]||(t[5]=o=>e.value.forceHideSubmissions=o)},null,8,["value"])]),_:1}),n(d,{label:"\u542F\u7528\u8BA8\u8BBA",prop:"enableDiscussion"},{default:p(()=>[n(g,{value:e.value.enableDiscussion,"onUpdate:value":t[6]||(t[6]=o=>e.value.enableDiscussion=o)},null,8,["value"])]),_:1}),n(k),nt,n(d,{label:"\u8BC4\u6D4B\u8BED\u8A00",prop:"languages"},{default:p(()=>[n(A,{value:D(s),"onUpdate:value":t[7]||(t[7]=o=>Ue(s)?s.value=o:s=o),preset:"pair","key-placeholder":"\u8BED\u8A00\u6807\u8BC6\u7B26","value-placeholder":"\u663E\u793A\u540D\u79F0"},null,8,["value"])]),_:1}),n(d,{label:"\u9ED8\u8BA4\u63D0\u4EA4\u8BED\u8A00",prop:"defaultSubmitLanguage"},{default:p(()=>[n(y,{value:e.value.defaultSubmitLanguage,"onUpdate:value":t[8]||(t[8]=o=>e.value.defaultSubmitLanguage=o),options:R.value,style:{"min-width":"125px"}},null,8,["value","options"])]),_:1}),n(k),n(d,{label:"\u542F\u7528\u4EBA\u673A\u9A8C\u8BC1",prop:"captcha_enabled"},{default:p(()=>[n(g,{value:e.value.captcha.enabled,"onUpdate:value":t[9]||(t[9]=o=>e.value.captcha.enabled=o)},null,8,["value"])]),_:1}),n(d,{label:"\u4EBA\u673A\u9A8C\u8BC1\u670D\u52A1",name:"captcha.type"},{default:p(()=>[n(y,{value:e.value.captcha.type,"onUpdate:value":t[10]||(t[10]=o=>e.value.captcha.type=o),options:D(Re),style:{"min-width":"125px"}},null,8,["value","options"])]),_:1}),n(d,{label:"\u5BA2\u6237\u7AEF\u5BC6\u94A5",prop:"captcha_clientKey"},{default:p(()=>[n(b,{value:e.value.captcha.clientKey,"onUpdate:value":t[11]||(t[11]=o=>e.value.captcha.clientKey=o)},null,8,["value"])]),_:1}),n(d,{label:"\u670D\u52A1\u7AEF\u5BC6\u94A5",prop:"captcha_serverKey"},{default:p(()=>[n(b,{value:e.value.captcha.serverKey,"onUpdate:value":t[12]||(t[12]=o=>e.value.captcha.serverKey=o)},null,8,["value"])]),_:1}),n(d,{label:"\u9A8C\u8BC1\u670D\u52A1\u540E\u7AEFURL",prop:"captcha_backendUrl"},{default:p(()=>[n(b,{value:e.value.captcha.backendUrl,"onUpdate:value":t[13]||(t[13]=o=>e.value.captcha.backendUrl=o),placeholder:"\u5EFA\u8BAE\u4F60\u7559\u7A7A\uFF0C\u9664\u975E\u4F60\u77E5\u9053\u81EA\u5DF1\u5728\u5E72\u4EC0\u4E48"},null,8,["value"])]),_:1}),n(d,{label:"\u4EBA\u673A\u9A8C\u8BC1\u573A\u666F",prop:"captcha_scenes"},{default:p(()=>[n(w,{value:e.value.captcha.scenes,"onUpdate:value":t[14]||(t[14]=o=>e.value.captcha.scenes=o),options:D(Ae)},null,8,["value","options"])]),_:1}),at,n(k),lt,n(d,{label:"\u4E3B\u9898",name:"displaySettings_theme"},{default:p(()=>[n(y,{value:e.value.displaySettings.theme,"onUpdate:value":t[15]||(t[15]=o=>e.value.displaySettings.theme=o),options:D(Ce),style:{"min-width":"125px"}},null,8,["value","options"])]),_:1}),n(d,{label:"MarkDown \u4E3B\u9898",name:"displaySettings_markdownTheme"},{default:p(()=>[n(y,{value:e.value.displaySettings.markdownTheme,"onUpdate:value":t[16]||(t[16]=o=>e.value.displaySettings.markdownTheme=o),options:D(Oe),style:{"min-width":"125px"}},null,8,["value","options"])]),_:1}),n(d,{label:"\u53E5\u5B50API\u63A5\u53E3",name:"displaySettings_sentenceApi"},{default:p(()=>[n(y,{value:e.value.displaySettings.sentenceApi,"onUpdate:value":t[17]||(t[17]=o=>e.value.displaySettings.sentenceApi=o),options:D(Be),style:{"min-width":"125px"}},null,8,["value","options"])]),_:1}),n(d,null,{default:p(()=>[n(E,null,{default:p(()=>[n(c,{type:"primary",onClick:f},{default:p(()=>[F(" \u4FDD\u5B58 ")]),_:1}),n(S,{onPositiveClick:V},{trigger:p(()=>[n(c,{type:"warning"},{default:p(()=>[F(" \u91CD\u7F6E ")]),_:1})]),default:p(()=>[F(" \u60A8\u786E\u8BA4\u8981\u91CD\u7F6E\u6240\u6709\u7AD9\u70B9\u8BBE\u7F6E\u4E3A\u9ED8\u8BA4\u503C\u5417\uFF1F ")]),_:1}),n(c,{onClick:I},{default:p(()=>[F(" \u6E05\u9664\u7F13\u5B58 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):(J(),ne("div",tt,[n(P,{show:"",size:"large"},{description:p(()=>[F(" \u52A0\u8F7D\u914D\u7F6E\u4E2D... ")]),_:1})])),n(k),ot,ut,st],64)}}};export{Ut as default};
